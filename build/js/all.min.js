!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,r){r.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:r,cofradesBajasPrepService:o}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:a,getMapsPrepService:n}}).state("cofradesCambios",{url:"/cofrades/nuevos/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCofradePrepService:a,getCallesPrepService:t}})}function r(e){return e.cofradesRest().query()}function o(e){return e.cofradesBajasRest().query()}function a(e,r){return r.cofradeId?e.cofradesRest().get({id:r.cofradeId}):!1}function t(e){return e.getCalles().then(function(e){return e.data})}function n(e,r,o){return r.$promise.then(function(r){var a=r.datosPersonales.direccion.calle+" "+r.datosPersonales.direccion.numero+" "+r.datosPersonales.direccion.municipio+" "+r.datosPersonales.direccion.provincia+" "+r.datosPersonales.direccion.cp;return o.geoCodingAPI(a).then(function(r){if(r.data.results.length){var o=r.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:o.lat,longitude:o.lng},marker:{latitude:o.lat,longitude:o.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],r.$inject=["cofradesService"],o.$inject=["cofradesService"],a.$inject=["cofradesService","$stateParams"],t.$inject=["cofradesService"],n.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,r){function o(r){e(r).toggle()}function a(e,a){o(a),r.go(e)}var t=this;t.toggleSidenav=o,t.navigateTo=a}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e,r,o,a,t,n,c,s){function i(){t?t.$promise.then(u):c.getRegistros().then(function(e){$.cofrade.numeroOrden=e.data.numeroOrden,$.cofrade.numeroCofrade=e.data.numeroCofrade}),$.calles=n}function u(e){return $.cofrade=e,$.calleSelected={calle:$.cofrade.datosPersonales.direccion.calle,cp:$.cofrade.datosPersonales.direccion.cp,provincia:$.cofrade.datosPersonales.direccion.provincia,municipio:$.cofrade.datosPersonales.direccion.municipio},g($.cofrade.datosPersonales.direccion.calle),$.cofrade.datosFinancieros=$.cofrade.datosFinancieros||{cuenta:{},deuda:[]},$.cofrade.datosFinancieros.cuenta=$.cofrade.datosFinancieros.cuenta||{},$.cofrade.datosFinancieros.deuda=$.cofrade.datosFinancieros.deuda||[],!0}function l(){window.history.back()}function d(e){var r=e?$.calles.filter(f(e)):$.calles;return r}function f(e){var r=angular.lowercase(e);return function(e){return 0===angular.lowercase(e.calle).indexOf(r)}}function p(e){e?($.cofrade.datosPersonales.direccion.calle=e.calle,$.cofrade.datosPersonales.direccion.municipio=e.municipio,$.cofrade.datosPersonales.direccion.cp=e.cp,$.cofrade.datosPersonales.direccion.provincia=e.provincia,g(e.calle)):($.cofrade.datosPersonales.direccion.calle=null,$.cofrade.datosPersonales.direccion.municipio=null,$.cofrade.datosPersonales.direccion.cp=null,$.cofrade.datosPersonales.direccion.provincia=null,$.sector=null,$.nuevaCalle=!0)}function g(e){s.sectoresRest().query({calle:e},function(e){$.sector=e[0].numeroSector,$.nuevaCalle=!1})}function m(){$.cofrade.datosFinancieros.cuenta.iban&&($.cofrade.datosFinancieros.cuenta.cc=e("calcularCC")($.cofrade.datosFinancieros.cuenta.iban))}function v(){$.cofrade.datosFinancieros.cuenta.cc&&($.cofrade.datosFinancieros.cuenta.iban=e("calcularIban")($.cofrade.datosFinancieros.cuenta.cc))}function h(e){function a(){s.sectoresRest().get({sector:$.sector},function(e){var a=e[0];a?(a.calles.push($.searchText),a.$save(),n.save($.cofrade,P,j)):o.show(o.simple().content("El sector "+$.sector+" no existe!!").position("top right").parent(r[0].querySelector("#toastBounds")).hideDelay(3e3))})}if(e){var t={cuenta:{},deuda:[]};$.cofrade.datosPersonales.direccion.calle=$.searchText,JSON.stringify($.cofrade.datosFinancieros)===JSON.stringify(t)&&delete $.cofrade.datosFinancieros;var n=c.cofradesRest();$.nuevaCalle?a():n.save($.cofrade,P,j)}else C()}function P(e){o.show(o.simple().content("Guardado con éxito!!").position("top right").hideDelay(3e3)),a.go("cofrades")}function j(e){o.show(o.simple().content("Error al guardar!!").position("top right").parent(r[0].querySelector("#toastBounds")).hideDelay(3e3))}function C(){o.show(o.simple().content("Existen errores en el formulario").action("OK").highlightAction(!1).parent(r[0].querySelector("#toastBounds")).position("top right"))}var $=this;$.nuevaCalle=!0,$.cofrade={datosFinancieros:{cuenta:{},deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:new Date}},$.backState=l,$.querySearch=d,$.selectedItemChange=p,$.calcularCC=m,$.calcularIban=v,$.guardar=h,i()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["$filter","$document","$mdToast","$state","getCofradePrepService","getCallesPrepService","cofradesService","sectoresService"]}(),function(){"use strict";function e(e,r,o,a){function t(){return o.$promise.then(function(e){c.cofrade=r("dateToString")(e),c.cofrade.datosFinancieros&&c.cofrade.datosFinancieros.cuenta&&(c.iban=r("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=r("parseCC")(c.cofrade.datosFinancieros.cuenta.cc)),c.maps=a})}function n(r,o){e.go("cofradesCambios",{cofradeId:r})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=n,t()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e,r){function o(){return e.$promise.then(function(e){a.nextPage=e.next,a.cofrades=e.results}),r.$promise.then(function(e){a.nextPageBajas=e.next,a.cofradesBajas=e.results})}var a=this;a.cofrades=null,a.nextPage=null,a.cofradesBajas=null,a.nextPageBajas=null,a.selectedTab=0,o()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService","cofradesBajasPrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,r,o){var a=r[0];r.bind("scroll",function(){a.scrollTop+a.offsetHeight>=a.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var r="",o=0;o<e.length;o++)o>0&&o%4===0&&(r+=" "),r+=e[o];return r}}function r(){return function(e){e=e||"";var r="";return r=e.substr(0,4)+"-",r+=e.substr(4,4)+"-",r+=e.substr(8,2)+"-",r+=e.substr(10,10)}}function o(){return function(e){return e=e||"",e.substr(4,20)}}function a(){function e(e){for(var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=[],a=0;a<e.length;a++){var t=r.indexOf(e[a]);o.push(0>t?"-":t)}return o.join("")}function r(e,r){for(var o=10,a=e.length,t=0,n=0;a>n;n+=o){var c=t+""+e.substr(n,o);t=c%r}return t}function o(e,r){for(e+="";e.length<r;)e="0"+e;return e}return function(a){var t="ES",n=a+e(t)+"00",c=r(n,97);return t+o(98-c,2)+a}}angular.module("app").filter("parseIban",e).filter("parseCC",r).filter("calcularIban",a).filter("calcularCC",o)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function r(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",r)}(),function(){"use strict";function e(){return function(r){var o=r instanceof Array;for(var a in r)null===r[a]?o?r.splice(a,1):delete r[a]:"object"==typeof r[a]&&e(r[a]);return r}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,r,o){function a(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1},get:{method:"GET",transformResponse:function(e,r){return o("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,r){return angular.toJson(o("removeNulls")(e))}}})}function t(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function n(){return r.get("http://127.0.0.1:5050/api/calles/").then(function(e){return angular.fromJson(e)})}function c(){return r.get("http://127.0.0.1:5050/api/registros/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:a,cofradesBajasRest:t,getCalles:n,getRegistros:c}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function r(r){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:r,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:r}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function r(){return e("http://127.0.0.1:5050/api/sectores/:id.json:json",null,{get:{method:"GET",isArray:!0}})}return{sectoresRest:r}}angular.module("app").factory("sectoresService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,r,o,a){function t(){m.bajas?c():n()}function n(){if(m.nextPage){var e={page:m.nextPage};m.buscar&&(e[m.filtro]=m.buscar),a.cofradesRest().query(e,function(e){m.nextPage=e.next,m.cofrades=m.cofrades.concat(e.results)})}}function c(){if(m.nextPageBajas){var e={page:m.nextPageBajas};m.buscar&&(e[m.filtro]=m.buscar),a.cofradesBajasRest().query(e,function(e){m.nextPageBajas=e.next,m.cofradesBajas=m.cofradesBajas.concat(e.results)})}}function s(){m.bajas?u():i()}function i(){var e={};e[m.filtro]=m.buscar,a.cofradesRest().query(e,function(e){m.nextPage=e.next,m.cofrades=e.results})}function u(){var e={};e[m.filtro]=m.buscar,a.cofradesBajasRest().query(e,function(e){m.nextPageBajas=e.next,m.cofradesBajas=e.results})}function l(){m.buscar=null,m.typeInput="nombre"===m.filtro?"text":"number",m.search()}function d(e,r){o.go("cofradesDetalle",{cofradeId:e})}function f(e,r){r.stopPropagation(),o.go("cofradesCambios",{cofradeId:e})}function p(e,r){r.stopPropagation(),console.log("eliminar cofrade")}function g(e,r){r.stopPropagation(),console.log("restaurar cofrade")}var m=this;m.filtro="nombre",m.typeInput="text",m.buscar=null,m.search=s,m.radioChange=l,m.goToCofrade=d,m.modifyCofrade=f,m.removeCofrade=p,m.restoreCofrade=g;var v=e.$on("scrollDown",t);r.$on("$destroy",function(){v(),v=null})}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$scope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/list/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page",cofradesBajas:"=cofradesBajas",nextPageBajas:"=pageBajas"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiY29mcmFkZXMvY29mcmFkZXMucm91dGVzLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL2xpc3QvY29mcmFkZXMuY29udHJvbGxlci5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9zY3JvbGx5LmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZmlsdGVycy9wYXJzZUN1ZW50YS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VEYXRlLmZpbHRlci5qcyIsImNvbW1vbnMvZmlsdGVycy9yZW1vdmVOdWxscy5maWx0ZXIuanMiLCJjb21tb25zL3NlcnZpY2VzL2NvZnJhZGVzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL21hcGFzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL3NlY3RvcmVzLnNlcnZpY2UuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5jb250cm9sbGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9saXN0L2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiZGF0ZVBpY2tlckNvbmZpZyIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsIm1vbnRocyIsInNob3J0TW9udGhzIiwiZGF5cyIsInNob3J0RGF5cyIsImZpcnN0RGF5T2ZXZWVrIiwicGFyc2VEYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInRoZW1lQW5ndWxhck1hdGVyaWFsIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidGVtcGxhdGVQcm92aWRlciIsIiR0ZW1wbGF0ZUNhY2hlIiwiZ2V0IiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc29sdmUiLCJjb2ZyYWRlc1ByZXBTZXJ2aWNlIiwiY29mcmFkZXNCYWphc1ByZXBTZXJ2aWNlIiwiZ2V0Q29mcmFkZVByZXBTZXJ2aWNlIiwiZ2V0TWFwc1ByZXBTZXJ2aWNlIiwiZ2V0Q2FsbGVzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc1NlcnZpY2UiLCJjb2ZyYWRlc1Jlc3QiLCJxdWVyeSIsImNvZnJhZGVzQmFqYXNSZXN0IiwiJHN0YXRlUGFyYW1zIiwiaWQiLCJjb2ZyYWRlSWQiLCJnZXRDYWxsZXMiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwidWlHbWFwR29vZ2xlTWFwQXBpIiwibWFwYXNTZXJ2aWNlIiwiJHByb21pc2UiLCJhZGRyZXNzIiwiZGF0b3NQZXJzb25hbGVzIiwiZGlyZWNjaW9uIiwiY2FsbGUiLCJudW1lcm8iLCJtdW5pY2lwaW8iLCJwcm92aW5jaWEiLCJjcCIsImdlb0NvZGluZ0FQSSIsInJlc3VsdHMiLCJsZW5ndGgiLCJjb29yZGluYXRlcyIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJtYXBzIiwiY29vcmQiLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxuZyIsIm1hcmtlciIsInpvb20iLCJBcHBDdHJsIiwiJG1kU2lkZW5hdiIsIiRzdGF0ZSIsInRvZ2dsZVNpZGVuYXYiLCJtZW51SWQiLCJ0b2dnbGUiLCJuYXZpZ2F0ZVRvIiwidG8iLCJnbyIsInZtIiwidGhpcyIsIkNvZnJhZGVOdWV2byIsIiRmaWx0ZXIiLCIkZG9jdW1lbnQiLCIkbWRUb2FzdCIsInNlY3RvcmVzU2VydmljZSIsImFjdGl2YXRlIiwiaW5pdENvZnJhZGUiLCJnZXRSZWdpc3Ryb3MiLCJjb2ZyYWRlIiwibnVtZXJvT3JkZW4iLCJudW1lcm9Db2ZyYWRlIiwiY2FsbGVzIiwiY2FsbGVTZWxlY3RlZCIsInNlYXJjaFNlY3RvciIsImRhdG9zRmluYW5jaWVyb3MiLCJjdWVudGEiLCJkZXVkYSIsImJhY2tTdGF0ZSIsIndpbmRvdyIsImhpc3RvcnkiLCJiYWNrIiwicXVlcnlTZWFyY2giLCJmaWx0ZXIiLCJjcmVhdGVGaWx0ZXJGb3IiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsIml0ZW0iLCJpbmRleE9mIiwic2VsZWN0ZWRJdGVtQ2hhbmdlIiwic2VjdG9yIiwibnVldmFDYWxsZSIsInNlY3RvcmVzUmVzdCIsIm51bWVyb1NlY3RvciIsImNhbGN1bGFyQ0MiLCJpYmFuIiwiY2MiLCJjYWxjdWxhckliYW4iLCJndWFyZGFyIiwiaXNWYWxpZCIsImd1YXJkYXJDYWxsZSIsInNlY3RvclJlc291cmNlIiwicHVzaCIsInNlYXJjaFRleHQiLCIkc2F2ZSIsIkNvZnJhZGVSZXNvdXJjZSIsInNhdmUiLCJndWFyZGFyU3VjY2VzcyIsImd1YXJkYXJFcnJvciIsInNob3ciLCJzaW1wbGUiLCJjb250ZW50IiwicG9zaXRpb24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGlkZURlbGF5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNob3dBY3Rpb25Ub2FzdCIsImFjdGlvbiIsImhpZ2hsaWdodEFjdGlvbiIsInNleG8iLCJmZWNoYUluc2NyaXBjaW9uIiwiZmVjaGFOYWNpbWllbnRvIiwiQ29mcmFkZURldGFsbGUiLCJtb2RpZnlDb2ZyYWRlIiwiZXZlbnQiLCJDb2ZyYWRlcyIsIm5leHRQYWdlIiwibmV4dCIsImNvZnJhZGVzIiwibmV4dFBhZ2VCYWphcyIsImNvZnJhZGVzQmFqYXMiLCJzZWxlY3RlZFRhYiIsInNjcm9sbHkiLCJyZXN0cmljdCIsImxpbmsiLCIkcm9vdFNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwicmF3IiwiYmluZCIsInNjcm9sbFRvcCIsIm9mZnNldEhlaWdodCIsInNjcm9sbEhlaWdodCIsIiRlbWl0IiwiZGlyZWN0aXZlIiwicGFyc2VJYmFuIiwiZm9ybWF0dGVkSWJhbiIsImkiLCJwYXJzZUNDIiwiZm9ybWF0dGVkQ0MiLCJzdWJzdHIiLCJ2YWxvckNpZnJhcyIsImNpZnJhcyIsIkxFVFJBUyIsIml0ZW1zIiwicG9zaWNpb24iLCJqb2luIiwibW9kdWxvIiwiZGl2aXNvciIsIkNVRU5UQSIsImxhcmdvIiwicmVzdG8iLCJkaXZpZGVuZG8iLCJjZXJvc0l6cXVpZXJkYSIsImNjYyIsInBhaXMiLCJzdHJpbmdUb0RhdGUiLCJkYXRlVG9TdHJpbmciLCJyZW1vdmVOdWxscyIsIm9iaiIsImlzQXJyYXkiLCJBcnJheSIsImsiLCJzcGxpY2UiLCIkcmVzb3VyY2UiLCIkaHR0cCIsIm1ldGhvZCIsInRyYW5zZm9ybVJlc3BvbnNlIiwiaGVhZGVyc0dldHRlciIsImZyb21Kc29uIiwidHJhbnNmb3JtUmVxdWVzdCIsInRvSnNvbiIsImZhY3RvcnkiLCJwYXJhbXMiLCJrZXkiLCJMaXN0YUNvZnJhZGVzIiwiJHNjb3BlIiwiZ2V0TmV4dFBhZ2UiLCJiYWphcyIsImdldE5leHRQYWdlQmFqYXMiLCJnZXROZXh0UGFnZUFsdGFzIiwicGFyYW1ldGVycyIsInBhZ2UiLCJidXNjYXIiLCJmaWx0cm8iLCJjb25jYXQiLCJzZWFyY2giLCJzZWFyY2hCYWphcyIsInNlYXJjaEFsdGFzIiwicmFkaW9DaGFuZ2UiLCJ0eXBlSW5wdXQiLCJnb1RvQ29mcmFkZSIsInN0b3BQcm9wYWdhdGlvbiIsInJlbW92ZUNvZnJhZGUiLCJjb25zb2xlIiwibG9nIiwicmVzdG9yZUNvZnJhZGUiLCJoYW5kbGVyIiwiJG9uIiwibGlzdGFDb2ZyYWRlcyIsInRlbXBsYXRlVXJsIiwic2Nv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QUNBLE9BQ0E1RSxTQUFBLElBQ0E2RSxZQUFBLCtEQUNBQyxPQUNBbkYsU0FBQSxZQUNBRixTQUFBLFFBQ0FJLGNBQUEsaUJBQ0FELGNBQUEsY0FHQTdILFdBQUEsZ0JBQ0FDLGFBQUEsS0FDQStNLGtCQUFBLEdBbEJBaFAsUUFDQUMsT0FBQSxPQUNBMkssVUFBQSxnQkFBQWlFIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAnbmdNYXRlcmlhbCcsXHJcbiAgICAndWlHbWFwZ29vZ2xlLW1hcHMnLFxyXG4gICAgJ25nTWVzc2FnZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGdvb2dsZU1hcEFQSSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdvb2dsZU1hcEFQSSh1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcil7XHJcbiAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgIGxpYnJhcmllczogJ3dlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvbidcclxuICAgIH0pOyAgICBcclxuICB9XHJcblxyXG59KSgpOyIsbnVsbCwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZGF0ZVBpY2tlckNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVQaWNrZXJDb25maWcoJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XHJcblxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLm1vbnRocyA9IFsnZW5lcm8nLCAnZmVicmVybycsICdtYXJ6bycsICdhYnJpbCcsICdtYXlvJywgJ2p1bmlvJywgJ2p1bGlvJywgJ2Fnb3N0bycsICdzZXB0aWVtYnJlJywgJ29jdHVicmUnLCAnbm92aWVtYnJlJywgJ2RpY2llbWJyZSddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0TW9udGhzID0gWydlbmUnLCAnZmViJywgJ21hcicsICdhYnInLCAnbWF5JywgJ2p1bicsICdqdWwnLCAnYWdvJywgJ3NlcCcsICdvY3QnLCAnbm92JywgJ2RpYyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmRheXMgPSBbJ2x1bmVzJywgJ21hcnRlcycsICdtacOpcmNvbGVzJywgJ2p1ZXZlcycsICd2aWVybmVzJywgJ3PDoWJhZG8nLCAnZG9taW5nbyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0RGF5cyA9IFsnbHVuJywgJ21hcicsICdtacOpJywgJ2p1ZScsICd2aWUnLCAnc8OhYicsICdkb20nXTtcclxuXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZmlyc3REYXlPZldlZWsgPSAxO1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIucGFyc2VEYXRlID0gZnVuY3Rpb24oZGF0ZVN0cmluZykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfTtcclxuXHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPHAgY2xhc3M9XCJsZWFkXCI+V2VsY29tZSB0byB0aGUgVUktUm91dGVyIERlbW88L3A+JyArXHJcbiAgICAgICAgICAnPHA+VXNlIHRoZSBtZW51IGFib3ZlIHRvIG5hdmlnYXRlLiAnICtcclxuICAgICAgICAgICdQYXkgYXR0ZW50aW9uIHRvIHRoZSA8Y29kZT4kc3RhdGU8L2NvZGU+IGFuZCA8Y29kZT4kc3RhdGVQYXJhbXM8L2NvZGU+IHZhbHVlcyBiZWxvdy48L3A+JyArXHJcbiAgICAgICAgICAnPHA+Q2xpY2sgdGhlc2UgbGlua3PigJQ8YSBocmVmPVwiIy9jP2lkPTFcIj5BbGljZTwvYT4gb3IgJyArXHJcbiAgICAgICAgICAnPGEgaHJlZj1cIiMvdXNlci80MlwiPkJvYjwvYT7igJR0byBzZWUgYSB1cmwgcmVkaXJlY3QgaW4gYWN0aW9uLjwvcD4nXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcodGhlbWVBbmd1bGFyTWF0ZXJpYWwpO1xyXG5cclxuICBmdW5jdGlvbiB0aGVtZUFuZ3VsYXJNYXRlcmlhbCgkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXMnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlc1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVzJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc1ByZXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2U6IGNvZnJhZGVzQmFqYXNQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnN0YXRlKCdjb2ZyYWRlc0RldGFsbGUnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlcy86Y29mcmFkZUlkXCIsXHJcbiAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpeyAgXHJcbiAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlRGV0YWxsZScsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlOiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsXHJcbiAgICAgICAgICAgIGdldE1hcHNQcmVwU2VydmljZTogZ2V0TWFwc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5cclxuICAgICAgc3RhdGUoJ2NvZnJhZGVzQ2FtYmlvcycsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzL251ZXZvcy86Y29mcmFkZUlkXCIsXHJcbiAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpeyAgXHJcbiAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmh0bWwnKTsgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOiAnQ29mcmFkZU51ZXZvJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBnZXRDb2ZyYWRlUHJlcFNlcnZpY2U6IGdldENvZnJhZGVQcmVwU2VydmljZSxcclxuICAgICAgICAgICAgZ2V0Q2FsbGVzUHJlcFNlcnZpY2U6IGdldENhbGxlc1ByZXBTZXJ2aWNlLFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb2ZyYWRlc1ByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29mcmFkZXNCYWphc1ByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc0JhamFzUmVzdCgpLnF1ZXJ5KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgIHJldHVybiAoJHN0YXRlUGFyYW1zLmNvZnJhZGVJZCkgPyBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkuZ2V0KHtpZDogJHN0YXRlUGFyYW1zLmNvZnJhZGVJZH0pIDogZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDYWxsZXNQcmVwU2VydmljZShjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuZ2V0Q2FsbGVzKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdldE1hcHNQcmVwU2VydmljZSh1aUdtYXBHb29nbGVNYXBBcGksIGdldENvZnJhZGVQcmVwU2VydmljZSwgbWFwYXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIFxyXG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSAgICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5udW1lcm8gICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcDtcclxuXHJcbiAgICAgIHJldHVybiBtYXBhc1NlcnZpY2UuZ2VvQ29kaW5nQVBJKGFkZHJlc3MpLlxyXG4gICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgICAgIHJldHVybiB1aUdtYXBHb29nbGVNYXBBcGkudGhlbihmdW5jdGlvbihtYXBzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICB7Y29vcmQ6ICB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyOiB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIEFwcEN0cmwoJG1kU2lkZW5hdiwgJHN0YXRlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0udG9nZ2xlU2lkZW5hdiA9IHRvZ2dsZVNpZGVuYXY7XHJcbiAgICB2bS5uYXZpZ2F0ZVRvICAgID0gbmF2aWdhdGVUbztcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZW5hdihtZW51SWQpIHtcclxuICAgICAgJG1kU2lkZW5hdihtZW51SWQpLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlVG8odG8sIG1lbnVJZCl7XHJcbiAgICAgIHRvZ2dsZVNpZGVuYXYobWVudUlkKTtcclxuICAgICAgJHN0YXRlLmdvKHRvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlTnVldm8nLCBDb2ZyYWRlTnVldm8pO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlTnVldm8oJGZpbHRlciwgJGRvY3VtZW50LCAkbWRUb2FzdCwgJHN0YXRlLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIGdldENhbGxlc1ByZXBTZXJ2aWNlLCBjb2ZyYWRlc1NlcnZpY2UsIHNlY3RvcmVzU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0ubnVldmFDYWxsZSA9IHRydWU7XHJcbiAgICB2bS5jb2ZyYWRlID0ge2RhdG9zRmluYW5jaWVyb3M6IHtjdWVudGE6IHt9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldWRhOiBbXX0sXHJcbiAgICAgICAgICAgICAgICAgIGRhdG9zUGVyc29uYWxlczogIHtkaXJlY2Npb246IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V4bzogXCJIb21icmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhSW5zY3JpcGNpb246IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWNoYU5hY2ltaWVudG86IG5ldyBEYXRlKCl9XHJcbiAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICB2bS5iYWNrU3RhdGUgICAgICAgICAgPSBiYWNrU3RhdGU7XHJcbiAgICB2bS5xdWVyeVNlYXJjaCAgICAgICAgPSBxdWVyeVNlYXJjaDtcclxuICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcclxuICAgIHZtLmNhbGN1bGFyQ0MgICAgICAgICA9IGNhbGN1bGFyQ0M7XHJcbiAgICB2bS5jYWxjdWxhckliYW4gICAgICAgPSBjYWxjdWxhckliYW47XHJcbiAgICB2bS5ndWFyZGFyICAgICAgICAgICAgPSBndWFyZGFyO1xyXG5cclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIGlmIChnZXRDb2ZyYWRlUHJlcFNlcnZpY2Upe1xyXG4gICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGluaXRDb2ZyYWRlKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5nZXRSZWdpc3Ryb3MoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNvZnJhZGUubnVtZXJvT3JkZW4gPSByZXNwb25zZS5kYXRhLm51bWVyb09yZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5udW1lcm9Db2ZyYWRlID0gcmVzcG9uc2UuZGF0YS5udW1lcm9Db2ZyYWRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgICB2bS5jYWxsZXMgPSBnZXRDYWxsZXNQcmVwU2VydmljZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdENvZnJhZGUoZGF0YSkge1xyXG4gICAgICB2bS5jb2ZyYWRlID0gZGF0YTtcclxuICAgICAgdm0uY2FsbGVTZWxlY3RlZCA9IHtjYWxsZTogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNwOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmluY2lhOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG11bmljaXBpbzogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpb307XHJcbiAgICAgIHNlYXJjaFNlY3Rvcih2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUpO1xyXG5cclxuICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zIHx8IHtjdWVudGE6IHt9LCBkZXVkYTogW119O1xyXG4gICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSB8fCB7fTtcclxuICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmRldWRhID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmRldWRhIHx8IFtdO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYWNrU3RhdGUoKSB7XHJcbiAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xyXG4gICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gdm0uY2FsbGVzLmZpbHRlciggY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSApIDogdm0uY2FsbGVzO1xyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpIHtcclxuICAgICAgdmFyIGxvd2VyY2FzZVF1ZXJ5ID0gYW5ndWxhci5sb3dlcmNhc2UocXVlcnkpO1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oaXRlbSkge1xyXG4gICAgICAgIHJldHVybiAoYW5ndWxhci5sb3dlcmNhc2UoaXRlbS5jYWxsZSkuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XHJcbiAgICAgIGlmIChpdGVtKXtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSBpdGVtLmNhbGxlO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gPSBpdGVtLm11bmljaXBpbztcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AgPSBpdGVtLmNwO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgPSBpdGVtLnByb3ZpbmNpYTtcclxuICAgICAgICBzZWFyY2hTZWN0b3IoaXRlbS5jYWxsZSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpbyA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNwID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhID0gbnVsbDtcclxuICAgICAgICB2bS5zZWN0b3IgPSBudWxsO1xyXG4gICAgICAgIHZtLm51ZXZhQ2FsbGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlYXJjaFNlY3RvcihjYWxsZSkge1xyXG4gICAgICBzZWN0b3Jlc1NlcnZpY2Uuc2VjdG9yZXNSZXN0KCkucXVlcnkoe2NhbGxlOiBjYWxsZX0sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLnNlY3RvciA9IGRhdGFbMF0ubnVtZXJvU2VjdG9yO1xyXG4gICAgICAgIHZtLm51ZXZhQ2FsbGUgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJDQygpIHtcclxuICAgICAgaWYgKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbilcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjID0gJGZpbHRlcignY2FsY3VsYXJDQycpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgICBpZiAodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYylcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4gPSAkZmlsdGVyKCdjYWxjdWxhckliYW4nKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBndWFyZGFyKGlzVmFsaWQpIHtcclxuICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgdmFyIGRhdG9zRmluYW5jaWVyb3MgPSB7Y3VlbnRhOiB7fSwgZGV1ZGE6IFtdfTtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSB2bS5zZWFyY2hUZXh0O1xyXG5cclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKSA9PT0gSlNPTi5zdHJpbmdpZnkoZGF0b3NGaW5hbmNpZXJvcykpXHJcbiAgICAgICAgICBkZWxldGUgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBDb2ZyYWRlUmVzb3VyY2UgPSBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCk7XHJcbiAgICAgICAgaWYodm0ubnVldmFDYWxsZSlcclxuICAgICAgICAgIGd1YXJkYXJDYWxsZSgpO1xyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICBDb2ZyYWRlUmVzb3VyY2Uuc2F2ZSh2bS5jb2ZyYWRlLCBndWFyZGFyU3VjY2VzcywgZ3VhcmRhckVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNob3dBY3Rpb25Ub2FzdCgpO1xyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gZ3VhcmRhckNhbGxlKCkge1xyXG4gICAgICAgIHNlY3RvcmVzU2VydmljZS5zZWN0b3Jlc1Jlc3QoKS5nZXQoe3NlY3Rvcjogdm0uc2VjdG9yfSwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2YXIgc2VjdG9yUmVzb3VyY2UgPSAgZGF0YVswXTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYoc2VjdG9yUmVzb3VyY2Upe1xyXG4gICAgICAgICAgICBzZWN0b3JSZXNvdXJjZS5jYWxsZXMucHVzaCh2bS5zZWFyY2hUZXh0KTtcclxuICAgICAgICAgICAgc2VjdG9yUmVzb3VyY2UuJHNhdmUoKTtcclxuICAgICAgICAgICAgQ29mcmFkZVJlc291cmNlLnNhdmUodm0uY29mcmFkZSwgZ3VhcmRhclN1Y2Nlc3MsIGd1YXJkYXJFcnJvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAuY29udGVudCgnRWwgc2VjdG9yICcgK3ZtLnNlY3RvcisgJyBubyBleGlzdGUhIScpXHJcbiAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGd1YXJkYXJTdWNjZXNzKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdHdWFyZGFkbyBjb24gw6l4aXRvISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICApO1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ3VhcmRhckVycm9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdFcnJvciBhbCBndWFyZGFyISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLnBhcmVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcignI3RvYXN0Qm91bmRzJykpXHJcbiAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dBY3Rpb25Ub2FzdCgpIHtcclxuICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgLmNvbnRlbnQoJ0V4aXN0ZW4gZXJyb3JlcyBlbiBlbCBmb3JtdWxhcmlvJylcclxuICAgICAgICAgIC5hY3Rpb24oJ09LJylcclxuICAgICAgICAgIC5oaWdobGlnaHRBY3Rpb24oZmFsc2UpXHJcbiAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlRGV0YWxsZScsIENvZnJhZGVEZXRhbGxlKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZURldGFsbGUoJHN0YXRlLCAkZmlsdGVyLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIGdldE1hcHNQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5jb2ZyYWRlID0gbnVsbDtcclxuICAgIHZtLm1hcHMgPSBudWxsO1xyXG4gICAgXHJcbiAgICB2bS5tb2RpZnlDb2ZyYWRlID0gbW9kaWZ5Q29mcmFkZTtcclxuICAgIFxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLmNvZnJhZGUgPSAkZmlsdGVyKCdkYXRlVG9TdHJpbmcnKShkYXRhKTtcclxuICAgICAgICBpZih2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MpXHJcbiAgICAgICAgICBpZih2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhKXtcclxuICAgICAgICAgICAgdm0uaWJhbiA9ICRmaWx0ZXIoJ3BhcnNlSWJhbicpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICAgICAgICAgIHZtLmNjID0gJGZpbHRlcigncGFyc2VDQycpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuY2MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIHZtLm1hcHMgPSBnZXRNYXBzUHJlcFNlcnZpY2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vZGlmeUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVzJywgQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlcyhjb2ZyYWRlc1ByZXBTZXJ2aWNlLCBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmNvZnJhZGVzID0gbnVsbDtcclxuICAgIHZtLm5leHRQYWdlID0gbnVsbDtcclxuICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBudWxsO1xyXG4gICAgdm0ubmV4dFBhZ2VCYWphcyA9IG51bGw7XHJcbiAgICB2bS5zZWxlY3RlZFRhYiA9IDA7XHJcbiAgICBhY3RpdmF0ZSgpO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgY29mcmFkZXNQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdzY3JvbGx5Jywgc2Nyb2xseSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbHkoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHJvb3RTY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICB2YXIgcmF3ID0gZWxlbWVudFswXTtcclxuICAgICAgICBlbGVtZW50LmJpbmQoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChyYXcuc2Nyb2xsVG9wICsgcmF3Lm9mZnNldEhlaWdodCA+PSByYXcuc2Nyb2xsSGVpZ2h0LTUpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInNjcm9sbERvd25cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3BhcnNlSWJhbicsIHBhcnNlSWJhbilcclxuICAgIC5maWx0ZXIoJ3BhcnNlQ0MnLCBwYXJzZUNDKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJJYmFuJywgY2FsY3VsYXJJYmFuKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJDQycsIGNhbGN1bGFyQ0MpO1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZUliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHZhciBmb3JtYXR0ZWRJYmFuID0gJyc7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGliYW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA+IDAgJiYgaSAlIDQgPT09IDApIHtcclxuICAgICAgICAgIGZvcm1hdHRlZEliYW4gKz0gJyAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXR0ZWRJYmFuICs9IGliYW5baV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZEliYW47XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2MpIHtcclxuICAgICAgY2MgPSBjYyB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZENDID0gJyc7XHJcblxyXG4gICAgICBmb3JtYXR0ZWRDQyA9IGNjLnN1YnN0cigwLCA0KSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDQsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoOCwgMikgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cigxMCwgMTApO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZENDO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbGN1bGFyQ0MoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHJldHVybiBpYmFuLnN1YnN0cig0LCAyMCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjY2MpIHtcclxuICAgICAgdmFyIHBhaXMgPSBcIkVTXCI7XHJcbiAgICAgIHZhciBjaWZyYXMgPSBjY2MgKyB2YWxvckNpZnJhcyhwYWlzKSArIFwiMDBcIjtcclxuICAgICAgdmFyIHJlc3RvID0gbW9kdWxvKGNpZnJhcywgOTcpO1xyXG4gICAgICByZXR1cm4gcGFpcyArIGNlcm9zSXpxdWllcmRhKDk4LXJlc3RvLCAyKSArIGNjYztcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsb3JDaWZyYXMoY2lmcmFzKSB7XHJcbiAgICAgIHZhciBMRVRSQVMgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPGNpZnJhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwb3NpY2lvbiA9IExFVFJBUy5pbmRleE9mKGNpZnJhc1tpXSk7XHJcbiAgICAgICAgaXRlbXMucHVzaChwb3NpY2lvbiA8IDA/IFwiLVwiOiBwb3NpY2lvbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGl0ZW1zLmpvaW4oXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kdWxvKGNpZnJhcywgZGl2aXNvcikge1xyXG4gICAgICB2YXIgQ1VFTlRBID0gMTA7XHJcbiAgICAgIHZhciBsYXJnbyA9IGNpZnJhcy5sZW5ndGg7XHJcbiAgICAgIHZhciByZXN0byA9IDA7XHJcbiAgICAgIGZvciAodmFyIGk9MDsgaTxsYXJnbzsgaSs9Q1VFTlRBKSB7XHJcbiAgICAgICAgdmFyIGRpdmlkZW5kbyA9IHJlc3RvICsgXCJcIiArIGNpZnJhcy5zdWJzdHIoaSwgQ1VFTlRBKTtcclxuICAgICAgICByZXN0byA9IGRpdmlkZW5kbyAlIGRpdmlzb3I7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3RvO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNlcm9zSXpxdWllcmRhKGNpZnJhcywgbGFyZ28pIHtcclxuICAgICAgY2lmcmFzICs9ICcnO1xyXG4gICAgICB3aGlsZShjaWZyYXMubGVuZ3RoIDwgbGFyZ28pIHsgY2lmcmFzID0gJzAnK2NpZnJhczsgfVxyXG4gICAgICByZXR1cm4gY2lmcmFzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3N0cmluZ1RvRGF0ZScsIHN0cmluZ1RvRGF0ZSlcclxuICAgIC5maWx0ZXIoJ2RhdGVUb1N0cmluZycsIGRhdGVUb1N0cmluZyk7XHJcblxyXG4gIGZ1bmN0aW9uIHN0cmluZ1RvRGF0ZSgpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBuZXcgRGF0ZShkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8pO1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uID0gbmV3IERhdGUoZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbik7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVUb1N0cmluZygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3JlbW92ZU51bGxzJywgcmVtb3ZlTnVsbHMpO1xyXG5cclxuICBmdW5jdGlvbiByZW1vdmVOdWxscygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iail7XHJcbiAgICAgIHZhciBpc0FycmF5ID0gb2JqIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgIGZvciAodmFyIGsgaW4gb2JqKXtcclxuICAgICAgICBpZiAob2JqW2tdPT09bnVsbCkgaXNBcnJheSA/IG9iai5zcGxpY2UoaywxKSA6IGRlbGV0ZSBvYmpba107XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9ialtrXT09XCJvYmplY3RcIikgcmVtb3ZlTnVsbHMob2JqW2tdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2NvZnJhZGVzU2VydmljZScsIGNvZnJhZGVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzU2VydmljZSgkcmVzb3VyY2UsICRodHRwLCAkZmlsdGVyKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb2ZyYWRlc1Jlc3Q6IGNvZnJhZGVzUmVzdCxcclxuICAgICAgY29mcmFkZXNCYWphc1Jlc3Q6IGNvZnJhZGVzQmFqYXNSZXN0LFxyXG4gICAgICBnZXRDYWxsZXM6IGdldENhbGxlcyxcclxuICAgICAgZ2V0UmVnaXN0cm9zOiBnZXRSZWdpc3Ryb3NcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzLzppZC5qc29uOmpzb24nLCBudWxsLCB7XHJcbiAgICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IGZhbHNlfSxcclxuICAgICAgICAnZ2V0JzogICAge21ldGhvZDonR0VUJywgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ3N0cmluZ1RvRGF0ZScpKGFuZ3VsYXIuZnJvbUpzb24oZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICdzYXZlJzogICB7bWV0aG9kOidQT1NUJywgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci50b0pzb24oJGZpbHRlcigncmVtb3ZlTnVsbHMnKShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvZnJhZGVzQmFqYXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzQmFqYXMvOmlkLmpzb246anNvbicsIG51bGwsIHsncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTpmYWxzZX19KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDYWxsZXMoKSB7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY2FsbGVzLycpLlxyXG4gICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlZ2lzdHJvcygpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9yZWdpc3Ryb3MvJykuXHJcbiAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5mcm9tSnNvbihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnbWFwYXNTZXJ2aWNlJywgbWFwYXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gbWFwYXNTZXJ2aWNlKCRodHRwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZW9Db2RpbmdBUEk6IGdlb0NvZGluZ0FQSVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZW9Db2RpbmdBUEkoYWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJywge3BhcmFtczoge2FkZHJlc3M6IGFkZHJlc3MsIGtleTogXCJBSXphU3lEQ19PSURTbDZjdXJqQ01DTHl6bjJ5aE1tZy1lcjVrbklcIn19KS5cclxuICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB9KTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NlY3RvcmVzU2VydmljZScsIHNlY3RvcmVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNlY3RvcmVzU2VydmljZSgkcmVzb3VyY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlY3RvcmVzUmVzdDogc2VjdG9yZXNSZXN0XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlY3RvcmVzUmVzdCgpIHtcclxuICAgICAgcmV0dXJuICRyZXNvdXJjZSgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9zZWN0b3Jlcy86aWQuanNvbjpqc29uJywgbnVsbCwge1xyXG4gICAgICAgICdnZXQnOiAge21ldGhvZDonR0VUJywgaXNBcnJheTogdHJ1ZX0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignTGlzdGFDb2ZyYWRlcycsIExpc3RhQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBMaXN0YUNvZnJhZGVzKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmZpbHRybyAgICA9ICdub21icmUnO1xyXG4gICAgdm0udHlwZUlucHV0ID0gJ3RleHQnO1xyXG4gICAgdm0uYnVzY2FyICAgID0gbnVsbDtcclxuXHJcbiAgICB2bS5zZWFyY2ggICAgICAgICA9IHNlYXJjaDtcclxuICAgIHZtLnJhZGlvQ2hhbmdlICAgID0gcmFkaW9DaGFuZ2U7XHJcbiAgICB2bS5nb1RvQ29mcmFkZSAgICA9IGdvVG9Db2ZyYWRlO1xyXG4gICAgdm0ubW9kaWZ5Q29mcmFkZSAgPSBtb2RpZnlDb2ZyYWRlO1xyXG4gICAgdm0ucmVtb3ZlQ29mcmFkZSAgPSByZW1vdmVDb2ZyYWRlO1xyXG4gICAgdm0ucmVzdG9yZUNvZnJhZGUgPSByZXN0b3JlQ29mcmFkZTtcclxuXHJcbiAgICB2YXIgaGFuZGxlciA9ICRyb290U2NvcGUuJG9uKCdzY3JvbGxEb3duJywgZ2V0TmV4dFBhZ2UpO1xyXG5cclxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgaGFuZGxlciA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKCF2bS5iYWphcylcclxuICAgICAgICBnZXROZXh0UGFnZUFsdGFzKCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBnZXROZXh0UGFnZUJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFBhZ2VBbHRhcygpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE5leHRQYWdlQmFqYXMoKSB7XHJcbiAgICAgIGlmICh2bS5uZXh0UGFnZUJhamFzKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZUJhamFzfTtcclxuXHJcbiAgICAgICAgaWYgKHZtLmJ1c2NhcilcclxuICAgICAgICAgIHBhcmFtZXRlcnNbdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuXHJcbiAgICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkocGFyYW1ldGVycywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXNCYWphcyA9IHZtLmNvZnJhZGVzQmFqYXMuY29uY2F0KGRhdGEucmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAgIGlmICghdm0uYmFqYXMpXHJcbiAgICAgICAgc2VhcmNoQWx0YXMoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlYXJjaEJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VhcmNoQWx0YXMoKSB7XHJcbiAgICAgIHZhciBmaWx0cm8gPSB7fTtcclxuICAgICAgZmlsdHJvW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcbiAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShmaWx0cm8sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2hCYWphcygpIHtcclxuICAgICAgdmFyIGZpbHRybyA9IHt9O1xyXG4gICAgICBmaWx0cm9bdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhZGlvQ2hhbmdlKCkge1xyXG4gICAgICB2bS5idXNjYXIgPSBudWxsO1xyXG4gICAgICB2bS50eXBlSW5wdXQgPSAodm0uZmlsdHJvID09PSAnbm9tYnJlJykgPyAndGV4dCc6ICdudW1iZXInO1xyXG4gICAgICB2bS5zZWFyY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnb1RvQ29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzRGV0YWxsZScsIHtjb2ZyYWRlSWQ6IGlkfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdlbGltaW5hciBjb2ZyYWRlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzdG9yZUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdyZXN0YXVyYXIgY29mcmFkZScpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdsaXN0YUNvZnJhZGVzJywgbGlzdGFDb2ZyYWRlcyk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBsaXN0YUNvZnJhZGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2NvZnJhZGVzL2xpc3QvY29mcmFkZXMuZGlyZWN0aXZlLmh0bWwnLFxyXG4gICAgICBzY29wZToge1xyXG4gICAgICAgIGNvZnJhZGVzOiAnPWNvZnJhZGVzJyxcclxuICAgICAgICBuZXh0UGFnZTogJz1wYWdlJyxcclxuICAgICAgICBjb2ZyYWRlc0JhamFzOiAnPWNvZnJhZGVzQmFqYXMnLFxyXG4gICAgICAgIG5leHRQYWdlQmFqYXM6ICc9cGFnZUJhamFzJ1xyXG4gICAgICAgIFxyXG4gICAgICB9LFxyXG4gICAgICBjb250cm9sbGVyOiAnTGlzdGFDb2ZyYWRlcycsXHJcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
