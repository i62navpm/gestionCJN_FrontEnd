!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,r){r.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e,r){function o(r){e(r).toggle()}function t(e,t){o(t),r.go(e)}var n=this;n.toggleSidenav=o,n.navigateTo=t}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:r}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:o,getMapsPrepService:a}}).state("cofradesCambios",{url:"/cofrades/nuevos/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCofradePrepService:o,getCallesPrepService:t,getRegistrosPrepService:n}})}function r(e){return e.cofradesRest().query()}function o(e,r){return r.cofradeId?e.cofradesRest().get({id:r.cofradeId}):!1}function t(e){return e.getCalles().then(function(e){return e.data})}function n(e){return e.getRegistros().then(function(e){return e.data})}function a(e,r,o){return r.$promise.then(function(r){var t=r.datosPersonales.direccion.calle+" "+r.datosPersonales.direccion.numero+" "+r.datosPersonales.direccion.municipio+" "+r.datosPersonales.direccion.provincia+" "+r.datosPersonales.direccion.cp;return o.geoCodingAPI(t).then(function(r){if(r.data.results.length){var o=r.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:o.lat,longitude:o.lng},marker:{latitude:o.lat,longitude:o.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],r.$inject=["cofradesService"],o.$inject=["cofradesService","$stateParams"],t.$inject=["cofradesService"],n.$inject=["cofradesService"],a.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,r,o){var t=r[0];r.bind("scroll",function(){t.scrollTop+t.offsetHeight>=t.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var r="",o=0;o<e.length;o++)o>0&&o%4===0&&(r+=" "),r+=e[o];return r}}function r(){return function(e){e=e||"";var r="";return r=e.substr(0,4)+"-",r+=e.substr(4,4)+"-",r+=e.substr(8,2)+"-",r+=e.substr(10,10)}}function o(){return function(e){return e=e||"",e.substr(4,20)}}function t(){function e(e){for(var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=[],t=0;t<e.length;t++){var n=r.indexOf(e[t]);o.push(0>n?"-":n)}return o.join("")}function r(e,r){for(var o=10,t=e.length,n=0,a=0;t>a;a+=o){var c=n+""+e.substr(a,o);n=c%r}return n}function o(e,r){for(e+="";e.length<r;)e="0"+e;return e}return function(t){var n="ES",a=t+e(n)+"00",c=r(a,97);return n+o(98-c,2)+t}}angular.module("app").filter("parseIban",e).filter("parseCC",r).filter("calcularIban",t).filter("calcularCC",o)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function r(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",r)}(),function(){"use strict";function e(){return function(r){var o=r instanceof Array;for(var t in r)null===r[t]?o?r.splice(t,1):delete r[t]:"object"==typeof r[t]&&e(r[t]);return r}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,r,o){function t(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1,cache:!0},get:{method:"GET",transformResponse:function(e,r){return o("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,r){return angular.toJson(o("removeNulls")(e))}}})}function n(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function a(){return r.get("http://127.0.0.1:5050/api/calles/").then(function(e){return angular.fromJson(e)})}function c(){return r.get("http://127.0.0.1:5050/api/registros/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:t,cofradesBajasRest:n,getCalles:a,getRegistros:c}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function r(r){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:r,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:r}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,r,o,t,n,a,c,i){function s(){n?n.$promise.then(function(e){return C.cofrade=e,C.calleSelected=C.cofrade.datosPersonales.direccion.calle,C.cofrade.datosFinancieros?(C.cofrade.datosFinancieros.cuenta||(C.cofrade.datosFinancieros.cuenta={}),C.cofrade.datosFinancieros.deuda||(C.cofrade.datosFinancieros.deuda=[])):C.cofrade.datosFinancieros={cuenta:{},deuda:[]},!0}):(C.cofrade.numeroOrden=c.numeroOrden,C.cofrade.numeroCofrade=c.numeroCofrade),C.calles=a}function u(){window.history.back()}function l(e){var r=e?C.calles.filter(d(e)):C.calles;return r}function d(e){var r=angular.lowercase(e);return function(e){return 0===angular.lowercase(e.calle).indexOf(r)}}function f(e){e?(C.cofrade.datosPersonales.direccion.calle=e.calle,C.cofrade.datosPersonales.direccion.municipio=e.municipio,C.cofrade.datosPersonales.direccion.cp=e.cp,C.cofrade.datosPersonales.direccion.provincia=e.provincia):(C.cofrade.datosPersonales.direccion.calle=null,C.cofrade.datosPersonales.direccion.municipio=null,C.cofrade.datosPersonales.direccion.cp=null,C.cofrade.datosPersonales.direccion.provincia=null)}function p(){C.cofrade.datosFinancieros.cuenta.iban&&(C.cofrade.datosFinancieros.cuenta.cc=e("calcularCC")(C.cofrade.datosFinancieros.cuenta.iban))}function g(){C.cofrade.datosFinancieros.cuenta.cc&&(C.cofrade.datosFinancieros.cuenta.iban=e("calcularIban")(C.cofrade.datosFinancieros.cuenta.cc))}function m(e){if(e){var r={cuenta:{},deuda:[]};JSON.stringify(C.cofrade.datosFinancieros)===JSON.stringify(r)&&delete C.cofrade.datosFinancieros;var o=i.cofradesRest();o.save(C.cofrade,v,h)}else P()}function v(e){o.show(o.simple().content("Guardado con éxito!!").position("top right").hideDelay(3e3)),t.go("cofrades")}function h(e){o.show(o.simple().content("Error al guardar!!").position("top right").parent(r[0].querySelector("#toastBounds")).hideDelay(3e3))}function P(){o.show(o.simple().content("Existen errores en el formulario").action("OK").highlightAction(!1).parent(r[0].querySelector("#toastBounds")).position("top right"))}var C=this;C.cofrade={datosFinancieros:{cuenta:{},deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:new Date}},C.backState=u,C.querySearch=l,C.selectedItemChange=f,C.calcularCC=p,C.calcularIban=g,C.guardar=m,s()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["$filter","$document","$mdToast","$state","getCofradePrepService","getCallesPrepService","getRegistrosPrepService","cofradesService"]}(),function(){"use strict";function e(e,r,o,t){function n(){return o.$promise.then(function(e){c.cofrade=r("dateToString")(e),c.cofrade.datosFinancieros&&c.cofrade.datosFinancieros.cuenta&&(c.iban=r("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=r("parseCC")(c.cofrade.datosFinancieros.cuenta.cc)),c.maps=t})}function a(r,o){e.go("cofradesCambios",{cofradeId:r})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=a,n()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e){function r(){return e.$promise.then(function(e){o.nextPage=e.next,o.cofrades=e.results})}var o=this;o.cofrades=null,o.nextPage=null,r()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService"]}(),function(){"use strict";function e(e){function r(){return e.$promise.then(function(e){t.cofrade=e,t.cofrade.datosFinancieros||(t.cofrade.datosFinancieros={deuda:[]})})}function o(){window.history.back()}var t=this;t.cofrade=null,t.cofrade={datosFinancieros:{deuda:[]}},t.backState=o,r()}angular.module("app").controller("CofradeModificar",e),e.$inject=["getCofradePrepService"]}(),function(){"use strict";function e(e,r,o){function t(){if(s.nextPage){var e={page:s.nextPage};s.buscar&&(e[s.filtro]=s.buscar),o.cofradesRest().query(e,function(e){s.nextPage=e.next,s.cofrades=s.cofrades.concat(e.results)})}}function n(){var e={};e[s.filtro]=s.buscar,o.cofradesRest().query(e,function(e){s.nextPage=e.next,s.cofrades=e.results})}function a(){s.buscar=null,s.typeInput="nombre"===s.filtro?"text":"number"}function c(e,o){r.go("cofradesDetalle",{cofradeId:e})}function i(e,o){r.go("cofradesCambios",{cofradeId:e})}var s=this;s.filtro="nombre",s.typeInput="text",s.buscar=null,s.busqueda=n,s.radioChange=a,s.goToCofrade=c,s.modifyCofrade=i,e.$on("scrollDown",t)}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9jb2ZyYWRlcy5yb3V0ZXMuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvc2Nyb2xseS5kaXJlY3RpdmUuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VDdWVudGEuZmlsdGVyLmpzIiwiY29tbW9ucy9maWx0ZXJzL3BhcnNlRGF0ZS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcmVtb3ZlTnVsbHMuZmlsdGVyLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9jb2ZyYWRlcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9tYXBhcy5zZXJ2aWNlLmpzIiwiY29mcmFkZXMvYWRkL2NvZnJhZGVOdWV2by5jb250cm9sbGVyLmpzIiwiY29mcmFkZXMvZGV0YWlsL2NvZnJhZGVEZXRhbGxlLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9saXN0L2NvZnJhZGVzLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9tb2RpZnkvY29mcmFkZU1vZGlmaWNhci5jb250cm9sbGVyLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiZGF0ZVBpY2tlckNvbmZpZyIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsIm1vbnRocyIsInNob3J0TW9udGhzIiwiZGF5cyIsInNob3J0RGF5cyIsImZpcnN0RGF5T2ZXZWVrIiwicGFyc2VEYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInRoZW1lQW5ndWxhck1hdGVyaWFsIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiQXBwQ3RybCIsIiRtZFNpZGVuYXYiLCIkc3RhdGUiLCJ0b2dnbGVTaWRlbmF2IiwibWVudUlkIiwidG9nZ2xlIiwibmF2aWdhdGVUbyIsInRvIiwiZ28iLCJ2bSIsInRoaXMiLCJjb250cm9sbGVyIiwidGVtcGxhdGVQcm92aWRlciIsIiR0ZW1wbGF0ZUNhY2hlIiwiZ2V0IiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImNvZnJhZGVzUHJlcFNlcnZpY2UiLCJnZXRDb2ZyYWRlUHJlcFNlcnZpY2UiLCJnZXRNYXBzUHJlcFNlcnZpY2UiLCJnZXRDYWxsZXNQcmVwU2VydmljZSIsImdldFJlZ2lzdHJvc1ByZXBTZXJ2aWNlIiwiY29mcmFkZXNTZXJ2aWNlIiwiY29mcmFkZXNSZXN0IiwicXVlcnkiLCIkc3RhdGVQYXJhbXMiLCJpZCIsImNvZnJhZGVJZCIsImdldENhbGxlcyIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJnZXRSZWdpc3Ryb3MiLCJ1aUdtYXBHb29nbGVNYXBBcGkiLCJtYXBhc1NlcnZpY2UiLCIkcHJvbWlzZSIsImFkZHJlc3MiLCJkYXRvc1BlcnNvbmFsZXMiLCJkaXJlY2Npb24iLCJjYWxsZSIsIm51bWVybyIsIm11bmljaXBpbyIsInByb3ZpbmNpYSIsImNwIiwiZ2VvQ29kaW5nQVBJIiwicmVzdWx0cyIsImxlbmd0aCIsImNvb3JkaW5hdGVzIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsIm1hcHMiLCJjb29yZCIsImxhdGl0dWRlIiwibGF0IiwibG9uZ2l0dWRlIiwibG5nIiwibWFya2VyIiwiem9vbSIsInNjcm9sbHkiLCJyZXN0cmljdCIsImxpbmsiLCIkcm9vdFNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwicmF3IiwiYmluZCIsInNjcm9sbFRvcCIsIm9mZnNldEhlaWdodCIsInNjcm9sbEhlaWdodCIsIiRlbWl0IiwiZGlyZWN0aXZlIiwicGFyc2VJYmFuIiwiaWJhbiIsImZvcm1hdHRlZEliYW4iLCJpIiwicGFyc2VDQyIsImNjIiwiZm9ybWF0dGVkQ0MiLCJzdWJzdHIiLCJjYWxjdWxhckNDIiwiY2FsY3VsYXJJYmFuIiwidmFsb3JDaWZyYXMiLCJjaWZyYXMiLCJMRVRSQVMiLCJpdGVtcyIsInBvc2ljaW9uIiwiaW5kZXhPZiIsInB1c2giLCJqb2luIiwibW9kdWxvIiwiZGl2aXNvciIsIkNVRU5UQSIsImxhcmdvIiwicmVzdG8iLCJkaXZpZGVuZG8iLCJjZXJvc0l6cXVpZXJkYSIsImNjYyIsInBhaXMiLCJmaWx0ZXIiLCJzdHJpbmdUb0RhdGUiLCJmZWNoYU5hY2ltaWVudG8iLCJmZWNoYUluc2NyaXBjaW9uIiwiZGF0ZVRvU3RyaW5nIiwicmVtb3ZlTnVsbHMiLCJvYmoiLCJpc0FycmF5IiwiQXJyYXkiLCJrIiwic3BsaWNlIiwiJHJlc291cmNlIiwiJGh0dHAiLCIkZmlsdGVyIiwibWV0aG9kIiwiY2FjaGUiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsImhlYWRlcnNHZXR0ZXIiLCJmcm9tSnNvbiIsInNhdmUiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwidG9Kc29uIiwiY29mcmFkZXNCYWphc1Jlc3QiLCJmYWN0b3J5IiwicGFyYW1zIiwia2V5IiwiQ29mcmFkZU51ZXZvIiwiJGRvY3VtZW50IiwiJG1kVG9hc3QiLCJhY3RpdmF0ZSIsImNvZnJhZGUiLCJjYWxsZVNlbGVjdGVkIiwiZGF0b3NGaW5hbmNpZXJvcyIsImN1ZW50YSIsImRldWRhIiwibnVtZXJvT3JkZW4iLCJudW1lcm9Db2ZyYWRlIiwiY2FsbGVzIiwiYmFja1N0YXRlIiwid2luZG93IiwiaGlzdG9yeSIsImJhY2siLCJxdWVyeVNlYXJjaCIsImNyZWF0ZUZpbHRlckZvciIsImxvd2VyY2FzZVF1ZXJ5IiwibG93ZXJjYXNlIiwiaXRlbSIsInNlbGVjdGVkSXRlbUNoYW5nZSIsImd1YXJkYXIiLCJpc1ZhbGlkIiwiSlNPTiIsInN0cmluZ2lmeSIsIkNvZnJhZGVSZXNvdXJjZSIsImd1YXJkYXJTdWNjZXNzIiwiZ3VhcmRhckVycm9yIiwic2hvd0FjdGlvblRvYXN0Iiwic2hvdyIsInNpbXBsZSIsImNvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJzZXhvIiwiQ29mcmFkZURldGFsbGUiLCJtb2RpZnlDb2ZyYWRlIiwiZXZlbnQiLCJDb2ZyYWRlcyIsIm5leHRQYWdlIiwibmV4dCIsImNvZnJhZGVzIiwiQ29mcmFkZU1vZGlmaWNhciIsIkxpc3RhQ29mcmFkZXMiLCJnZXROZXh0UGFnZSIsInBhcmFtZXRlcnMiLCJwYWdlIiwiYnVzY2FyIiwiZmlsdHJvIiwiY29uY2F0IiwiYnVzcXVlZGEiLCJyYWRpb0NoYW5nZSIsInR5cGVJbnB1dCIsImdvVG9Db2ZyYWRlIiwiJG9uIiwibGlzdGFDb2ZyYWRlcyIsInRlbXBsYXRlVXJsIiwic2NvcGUiLCJiaW5kVG9Db250cm9sbGVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQUFDLE9BQUEsT0FDQSxZQUNBLGFBQ0EsYUFDQSxvQkFDQSxrQkNSQSxXQUNBLFlBTUEsU0FBQUMsR0FBQUMsR0FDQUEsRUFBQUMsV0FDQUMsVUFBQSxtQ0FOQUwsUUFDQUMsT0FBQSxPQUNBSyxPQUFBSixHQ21CRUEsRUFBYUssU0FBVyxpQ0N4QjFCLFdBQ0EsWUFNQSxTQUFBQyxHQUFBQyxHQUVBQSxFQUFBQyxRQUFBLFFBQUEsVUFBQSxRQUFBLFFBQUEsT0FBQSxRQUFBLFFBQUEsU0FBQSxhQUFBLFVBQUEsWUFBQSxhQUNBRCxFQUFBRSxhQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFB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R2hCbXRCRUEsRUFBY2xNLFNBQVcsYUFBYyxTQUFVLHNCaUJ4dEJuRCxXQUNBLFlBT0EsU0FBQThNLEtBQ0EsT0FDQTdILFNBQUEsSUFDQThILFlBQUEsMERBQ0FDLE9BQ0FoQixTQUFBLFlBQ0FGLFNBQUEsU0FFQTdKLFdBQUEsZ0JBQ0FJLGFBQUEsS0FDQTRLLGtCQUFBLEdBZkF4TixRQUNBQyxPQUFBLE9BQ0FrRyxVQUFBLGdCQUFBa0giLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcbiAgICAndWkucm91dGVyJyxcclxuICAgICduZ1Jlc291cmNlJyxcclxuICAgICduZ01hdGVyaWFsJyxcclxuICAgICd1aUdtYXBnb29nbGUtbWFwcycsXHJcbiAgICAnbmdNZXNzYWdlcydcclxuICBdKTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZ29vZ2xlTWFwQVBJKTtcclxuXHJcbiAgZnVuY3Rpb24gZ29vZ2xlTWFwQVBJKHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyKXtcclxuICAgIHVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyLmNvbmZpZ3VyZSh7XHJcbiAgICAgICAgbGlicmFyaWVzOiAnd2VhdGhlcixnZW9tZXRyeSx2aXN1YWxpemF0aW9uJ1xyXG4gICAgfSk7ICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IixudWxsLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhkYXRlUGlja2VyQ29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gZGF0ZVBpY2tlckNvbmZpZygkbWREYXRlTG9jYWxlUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIubW9udGhzID0gWydlbmVybycsICdmZWJyZXJvJywgJ21hcnpvJywgJ2FicmlsJywgJ21heW8nLCAnanVuaW8nLCAnanVsaW8nLCAnYWdvc3RvJywgJ3NlcHRpZW1icmUnLCAnb2N0dWJyZScsICdub3ZpZW1icmUnLCAnZGljaWVtYnJlJ107XHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuc2hvcnRNb250aHMgPSBbJ2VuZScsICdmZWInLCAnbWFyJywgJ2FicicsICdtYXknLCAnanVuJywgJ2p1bCcsICdhZ28nLCAnc2VwJywgJ29jdCcsICdub3YnLCAnZGljJ107XHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZGF5cyA9IFsnbHVuZXMnLCAnbWFydGVzJywgJ21pw6lyY29sZXMnLCAnanVldmVzJywgJ3ZpZXJuZXMnLCAnc8OhYmFkbycsICdkb21pbmdvJ107XHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuc2hvcnREYXlzID0gWydsdW4nLCAnbWFyJywgJ21pw6knLCAnanVlJywgJ3ZpZScsICdzw6FiJywgJ2RvbSddO1xyXG5cclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5maXJzdERheU9mV2VlayA9IDE7XHJcbiAgICBcclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5wYXJzZURhdGUgPSBmdW5jdGlvbihkYXRlU3RyaW5nKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5mb3JtYXREYXRlID0gZnVuY3Rpb24oZGF0ZSkge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICB9O1xyXG5cclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG5cclxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZShcImhvbWVcIiwge1xyXG4gICAgICAgIHVybDogXCIvXCIsXHJcbiAgICAgICAgdGVtcGxhdGU6ICc8cCBjbGFzcz1cImxlYWRcIj5XZWxjb21lIHRvIHRoZSBVSS1Sb3V0ZXIgRGVtbzwvcD4nICtcclxuICAgICAgICAgICc8cD5Vc2UgdGhlIG1lbnUgYWJvdmUgdG8gbmF2aWdhdGUuICcgK1xyXG4gICAgICAgICAgJ1BheSBhdHRlbnRpb24gdG8gdGhlIDxjb2RlPiRzdGF0ZTwvY29kZT4gYW5kIDxjb2RlPiRzdGF0ZVBhcmFtczwvY29kZT4gdmFsdWVzIGJlbG93LjwvcD4nICtcclxuICAgICAgICAgICc8cD5DbGljayB0aGVzZSBsaW5rc+KAlDxhIGhyZWY9XCIjL2M/aWQ9MVwiPkFsaWNlPC9hPiBvciAnICtcclxuICAgICAgICAgICc8YSBocmVmPVwiIy91c2VyLzQyXCI+Qm9iPC9hPuKAlHRvIHNlZSBhIHVybCByZWRpcmVjdCBpbiBhY3Rpb24uPC9wPidcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyh0aGVtZUFuZ3VsYXJNYXRlcmlhbCk7XHJcblxyXG4gIGZ1bmN0aW9uIHRoZW1lQW5ndWxhck1hdGVyaWFsKCRtZFRoZW1pbmdQcm92aWRlcil7XHJcbiAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBBcHBDdHJsKCRtZFNpZGVuYXYsICRzdGF0ZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSB0b2dnbGVTaWRlbmF2O1xyXG4gICAgdm0ubmF2aWdhdGVUbyAgICA9IG5hdmlnYXRlVG87XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYobWVudUlkKSB7XHJcbiAgICAgICRtZFNpZGVuYXYobWVudUlkKS50b2dnbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHRvLCBtZW51SWQpe1xyXG4gICAgICB0b2dnbGVTaWRlbmF2KG1lbnVJZCk7XHJcbiAgICAgICRzdGF0ZS5nbyh0byk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXMnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlc1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVzJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuc3RhdGUoJ2NvZnJhZGVzRGV0YWxsZScsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2RldGFpbC9jb2ZyYWRlRGV0YWxsZS5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVEZXRhbGxlJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBnZXRDb2ZyYWRlUHJlcFNlcnZpY2U6IGdldENvZnJhZGVQcmVwU2VydmljZSxcclxuICAgICAgICAgICAgZ2V0TWFwc1ByZXBTZXJ2aWNlOiBnZXRNYXBzUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pLlxyXG4gICAgICBzdGF0ZSgnY29mcmFkZXNDYW1iaW9zJywge1xyXG4gICAgICAgIHVybDogXCIvY29mcmFkZXMvbnVldm9zLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2FkZC9jb2ZyYWRlTnVldm8uaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlTnVldm8nLFxyXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZTogZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICBnZXRDYWxsZXNQcmVwU2VydmljZTogZ2V0Q2FsbGVzUHJlcFNlcnZpY2UsXHJcbiAgICAgICAgICAgIGdldFJlZ2lzdHJvc1ByZXBTZXJ2aWNlOiBnZXRSZWdpc3Ryb3NQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb2ZyYWRlc1ByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICByZXR1cm4gKCRzdGF0ZVBhcmFtcy5jb2ZyYWRlSWQpID8gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLmdldCh7aWQ6ICRzdGF0ZVBhcmFtcy5jb2ZyYWRlSWR9KSA6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2FsbGVzUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmdldENhbGxlcygpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe3JldHVybiByZXNwb25zZS5kYXRhO30pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBnZXRSZWdpc3Ryb3NQcmVwU2VydmljZShjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuZ2V0UmVnaXN0cm9zKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdldE1hcHNQcmVwU2VydmljZSh1aUdtYXBHb29nbGVNYXBBcGksIGdldENvZnJhZGVQcmVwU2VydmljZSwgbWFwYXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIFxyXG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSAgICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5udW1lcm8gICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcDtcclxuXHJcbiAgICAgIHJldHVybiBtYXBhc1NlcnZpY2UuZ2VvQ29kaW5nQVBJKGFkZHJlc3MpLlxyXG4gICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgICAgIHJldHVybiB1aUdtYXBHb29nbGVNYXBBcGkudGhlbihmdW5jdGlvbihtYXBzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICB7Y29vcmQ6ICB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyOiB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ3Njcm9sbHknLCBzY3JvbGx5KTtcclxuXHJcbiAgZnVuY3Rpb24gc2Nyb2xseSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgIHZhciByYXcgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgIGVsZW1lbnQuYmluZCgnc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHJhdy5zY3JvbGxUb3AgKyByYXcub2Zmc2V0SGVpZ2h0ID49IHJhdy5zY3JvbGxIZWlnaHQtNSkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwic2Nyb2xsRG93blwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigncGFyc2VJYmFuJywgcGFyc2VJYmFuKVxyXG4gICAgLmZpbHRlcigncGFyc2VDQycsIHBhcnNlQ0MpXHJcbiAgICAuZmlsdGVyKCdjYWxjdWxhckliYW4nLCBjYWxjdWxhckliYW4pXHJcbiAgICAuZmlsdGVyKCdjYWxjdWxhckNDJywgY2FsY3VsYXJDQyk7XHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlSWJhbigpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoaWJhbikge1xyXG4gICAgICBpYmFuID0gaWJhbiB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZEliYW4gPSAnJztcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWJhbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChpID4gMCAmJiBpICUgNCA9PT0gMCkge1xyXG4gICAgICAgICAgZm9ybWF0dGVkSWJhbiArPSAnICc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcm1hdHRlZEliYW4gKz0gaWJhbltpXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm9ybWF0dGVkSWJhbjtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwYXJzZUNDKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYykge1xyXG4gICAgICBjYyA9IGNjIHx8ICcnO1xyXG4gICAgICB2YXIgZm9ybWF0dGVkQ0MgPSAnJztcclxuXHJcbiAgICAgIGZvcm1hdHRlZENDID0gY2Muc3Vic3RyKDAsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoNCwgNCkgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cig4LCAyKSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDEwLCAxMCk7XHJcblxyXG4gICAgICByZXR1cm4gZm9ybWF0dGVkQ0M7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXJDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoaWJhbikge1xyXG4gICAgICBpYmFuID0gaWJhbiB8fCAnJztcclxuICAgICAgcmV0dXJuIGliYW4uc3Vic3RyKDQsIDIwKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYWxjdWxhckliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNjYykge1xyXG4gICAgICB2YXIgcGFpcyA9IFwiRVNcIjtcclxuICAgICAgdmFyIGNpZnJhcyA9IGNjYyArIHZhbG9yQ2lmcmFzKHBhaXMpICsgXCIwMFwiO1xyXG4gICAgICB2YXIgcmVzdG8gPSBtb2R1bG8oY2lmcmFzLCA5Nyk7XHJcbiAgICAgIHJldHVybiBwYWlzICsgY2Vyb3NJenF1aWVyZGEoOTgtcmVzdG8sIDIpICsgY2NjO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB2YWxvckNpZnJhcyhjaWZyYXMpIHtcclxuICAgICAgdmFyIExFVFJBUyA9IFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XHJcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpPTA7IGk8Y2lmcmFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBvc2ljaW9uID0gTEVUUkFTLmluZGV4T2YoY2lmcmFzW2ldKTtcclxuICAgICAgICBpdGVtcy5wdXNoKHBvc2ljaW9uIDwgMD8gXCItXCI6IHBvc2ljaW9uKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gaXRlbXMuam9pbihcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb2R1bG8oY2lmcmFzLCBkaXZpc29yKSB7XHJcbiAgICAgIHZhciBDVUVOVEEgPSAxMDtcclxuICAgICAgdmFyIGxhcmdvID0gY2lmcmFzLmxlbmd0aDtcclxuICAgICAgdmFyIHJlc3RvID0gMDtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPGxhcmdvOyBpKz1DVUVOVEEpIHtcclxuICAgICAgICB2YXIgZGl2aWRlbmRvID0gcmVzdG8gKyBcIlwiICsgY2lmcmFzLnN1YnN0cihpLCBDVUVOVEEpO1xyXG4gICAgICAgIHJlc3RvID0gZGl2aWRlbmRvICUgZGl2aXNvcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdG87XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2Vyb3NJenF1aWVyZGEoY2lmcmFzLCBsYXJnbykge1xyXG4gICAgICBjaWZyYXMgKz0gJyc7XHJcbiAgICAgIHdoaWxlKGNpZnJhcy5sZW5ndGggPCBsYXJnbykgeyBjaWZyYXMgPSAnMCcrY2lmcmFzOyB9XHJcbiAgICAgIHJldHVybiBjaWZyYXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcignc3RyaW5nVG9EYXRlJywgc3RyaW5nVG9EYXRlKVxyXG4gICAgLmZpbHRlcignZGF0ZVRvU3RyaW5nJywgZGF0ZVRvU3RyaW5nKTtcclxuXHJcbiAgZnVuY3Rpb24gc3RyaW5nVG9EYXRlKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byA9IG5ldyBEYXRlKGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byk7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24gPSBuZXcgRGF0ZShkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGF0ZVRvU3RyaW5nKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50by50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbiA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigncmVtb3ZlTnVsbHMnLCByZW1vdmVOdWxscyk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZU51bGxzKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKXtcclxuICAgICAgdmFyIGlzQXJyYXkgPSBvYmogaW5zdGFuY2VvZiBBcnJheTtcclxuICAgICAgZm9yICh2YXIgayBpbiBvYmope1xyXG4gICAgICAgIGlmIChvYmpba109PT1udWxsKSBpc0FycmF5ID8gb2JqLnNwbGljZShrLDEpIDogZGVsZXRlIG9ialtrXTtcclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqW2tdPT1cIm9iamVjdFwiKSByZW1vdmVOdWxscyhvYmpba10pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnY29mcmFkZXNTZXJ2aWNlJywgY29mcmFkZXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY29mcmFkZXNTZXJ2aWNlKCRyZXNvdXJjZSwgJGh0dHAsICRmaWx0ZXIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvZnJhZGVzUmVzdDogY29mcmFkZXNSZXN0LFxyXG4gICAgICBjb2ZyYWRlc0JhamFzUmVzdDogY29mcmFkZXNCYWphc1Jlc3QsXHJcbiAgICAgIGdldENhbGxlczogZ2V0Q2FsbGVzLFxyXG4gICAgICBnZXRSZWdpc3Ryb3M6IGdldFJlZ2lzdHJvc1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb2ZyYWRlc1Jlc3QoKSB7XHJcbiAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY29mcmFkZXMvOmlkLmpzb246anNvbicsIG51bGwsIHtcclxuICAgICAgICAncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTogZmFsc2UsIGNhY2hlOiB0cnVlfSxcclxuICAgICAgICAnZ2V0JzogICAge21ldGhvZDonR0VUJywgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ3N0cmluZ1RvRGF0ZScpKGFuZ3VsYXIuZnJvbUpzb24oZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICdzYXZlJzogICB7bWV0aG9kOidQT1NUJywgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci50b0pzb24oJGZpbHRlcigncmVtb3ZlTnVsbHMnKShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvZnJhZGVzQmFqYXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzQmFqYXMvOmlkLmpzb246anNvbicsIG51bGwsIHsncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTpmYWxzZX19KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDYWxsZXMoKSB7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY2FsbGVzLycpLlxyXG4gICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlZ2lzdHJvcygpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9yZWdpc3Ryb3MvJykuXHJcbiAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5mcm9tSnNvbihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnbWFwYXNTZXJ2aWNlJywgbWFwYXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gbWFwYXNTZXJ2aWNlKCRodHRwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZW9Db2RpbmdBUEk6IGdlb0NvZGluZ0FQSVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZW9Db2RpbmdBUEkoYWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJywge3BhcmFtczoge2FkZHJlc3M6IGFkZHJlc3MsIGtleTogXCJBSXphU3lEQ19PSURTbDZjdXJqQ01DTHl6bjJ5aE1tZy1lcjVrbklcIn19KS5cclxuICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB9KTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZU51ZXZvJywgQ29mcmFkZU51ZXZvKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZU51ZXZvKCRmaWx0ZXIsICRkb2N1bWVudCwgJG1kVG9hc3QsICRzdGF0ZSwgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLCBnZXRDYWxsZXNQcmVwU2VydmljZSwgZ2V0UmVnaXN0cm9zUHJlcFNlcnZpY2UsIGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0uY29mcmFkZSA9IHtkYXRvc0ZpbmFuY2llcm9zOiB7Y3VlbnRhOiB7fSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXVkYTogW119LFxyXG4gICAgICAgICAgICAgICAgICBkYXRvc1BlcnNvbmFsZXM6ICB7ZGlyZWNjaW9uOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNleG86IFwiSG9tYnJlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWNoYUluc2NyaXBjaW9uOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVjaGFOYWNpbWllbnRvOiBuZXcgRGF0ZSgpfVxyXG4gICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgdm0uYmFja1N0YXRlID0gYmFja1N0YXRlO1xyXG4gICAgdm0ucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcclxuICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcclxuICAgIHZtLmNhbGN1bGFyQ0MgPSBjYWxjdWxhckNDO1xyXG4gICAgdm0uY2FsY3VsYXJJYmFuID0gY2FsY3VsYXJJYmFuO1xyXG4gICAgdm0uZ3VhcmRhciA9IGd1YXJkYXI7XHJcblxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgaWYgKGdldENvZnJhZGVQcmVwU2VydmljZSl7XHJcbiAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jb2ZyYWRlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhbGxlU2VsZWN0ZWQgPSB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0ge2N1ZW50YToge30sIGRldWRhOiBbXX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuZGV1ZGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmRldWRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICB2bS5jb2ZyYWRlLm51bWVyb09yZGVuID0gZ2V0UmVnaXN0cm9zUHJlcFNlcnZpY2UubnVtZXJvT3JkZW47XHJcbiAgICAgICAgdm0uY29mcmFkZS5udW1lcm9Db2ZyYWRlID0gZ2V0UmVnaXN0cm9zUHJlcFNlcnZpY2UubnVtZXJvQ29mcmFkZTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgdm0uY2FsbGVzID0gZ2V0Q2FsbGVzUHJlcFNlcnZpY2U7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJhY2tTdGF0ZSgpIHtcclxuICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5KSB7XHJcbiAgICAgIHZhciByZXN1bHRzID0gcXVlcnkgPyB2bS5jYWxsZXMuZmlsdGVyKCBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpICkgOiB2bS5jYWxsZXM7XHJcbiAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xyXG4gICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbiBmaWx0ZXJGbihpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIChhbmd1bGFyLmxvd2VyY2FzZShpdGVtLmNhbGxlKS5pbmRleE9mKGxvd2VyY2FzZVF1ZXJ5KSA9PT0gMCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcclxuICAgICAgaWYgKGl0ZW0pe1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSA9IGl0ZW0uY2FsbGU7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpbyA9IGl0ZW0ubXVuaWNpcGlvO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcCA9IGl0ZW0uY3A7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLnByb3ZpbmNpYSA9IGl0ZW0ucHJvdmluY2lhO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcCA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLnByb3ZpbmNpYSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJDQygpIHtcclxuICAgICAgaWYgKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbilcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjID0gJGZpbHRlcignY2FsY3VsYXJDQycpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgICBpZiAodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYylcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4gPSAkZmlsdGVyKCdjYWxjdWxhckliYW4nKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBndWFyZGFyKGlzVmFsaWQpIHtcclxuICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgdmFyIGRhdG9zRmluYW5jaWVyb3MgPSB7Y3VlbnRhOiB7fSwgZGV1ZGE6IFtdfTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKSA9PT0gSlNPTi5zdHJpbmdpZnkoZGF0b3NGaW5hbmNpZXJvcykpXHJcbiAgICAgICAgICBkZWxldGUgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBDb2ZyYWRlUmVzb3VyY2UgPSBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCk7XHJcbiAgICAgICAgQ29mcmFkZVJlc291cmNlLnNhdmUodm0uY29mcmFkZSwgZ3VhcmRhclN1Y2Nlc3MsIGd1YXJkYXJFcnJvcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNob3dBY3Rpb25Ub2FzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGd1YXJkYXJTdWNjZXNzKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdHdWFyZGFkbyBjb24gw6l4aXRvISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICApO1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ3VhcmRhckVycm9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdFcnJvciBhbCBndWFyZGFyISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLnBhcmVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcignI3RvYXN0Qm91bmRzJykpXHJcbiAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dBY3Rpb25Ub2FzdCgpIHtcclxuICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgLmNvbnRlbnQoJ0V4aXN0ZW4gZXJyb3JlcyBlbiBlbCBmb3JtdWxhcmlvJylcclxuICAgICAgICAgIC5hY3Rpb24oJ09LJylcclxuICAgICAgICAgIC5oaWdobGlnaHRBY3Rpb24oZmFsc2UpXHJcbiAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZURldGFsbGUnLCBDb2ZyYWRlRGV0YWxsZSk7XHJcblxyXG4gIGZ1bmN0aW9uIENvZnJhZGVEZXRhbGxlKCRzdGF0ZSwgJGZpbHRlciwgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLCBnZXRNYXBzUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgdm0uY29mcmFkZSA9IG51bGw7XHJcbiAgICB2bS5tYXBzID0gbnVsbDtcclxuICAgIFxyXG4gICAgdm0ubW9kaWZ5Q29mcmFkZSA9IG1vZGlmeUNvZnJhZGU7XHJcbiAgICBcclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIHJldHVybiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5jb2ZyYWRlID0gJGZpbHRlcignZGF0ZVRvU3RyaW5nJykoZGF0YSk7XHJcbiAgICAgICAgaWYodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKVxyXG4gICAgICAgICAgaWYodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSl7XHJcbiAgICAgICAgICAgIHZtLmliYW4gPSAkZmlsdGVyKCdwYXJzZUliYW4nKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4pO1xyXG4gICAgICAgICAgICB2bS5jYyA9ICRmaWx0ZXIoJ3BhcnNlQ0MnKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB2bS5tYXBzID0gZ2V0TWFwc1ByZXBTZXJ2aWNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb2RpZnlDb2ZyYWRlKGlkLCBldmVudCl7XHJcbiAgICAgICRzdGF0ZS5nbygnY29mcmFkZXNDYW1iaW9zJywge2NvZnJhZGVJZDogaWR9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlcycsIENvZnJhZGVzKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZXMoY29mcmFkZXNQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0uY29mcmFkZXMgPSBudWxsO1xyXG4gICAgdm0ubmV4dFBhZ2UgPSBudWxsO1xyXG5cclxuICAgIGFjdGl2YXRlKCk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICByZXR1cm4gY29mcmFkZXNQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZU1vZGlmaWNhcicsIENvZnJhZGVNb2RpZmljYXIpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlTW9kaWZpY2FyKGdldENvZnJhZGVQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5jb2ZyYWRlID0gbnVsbDtcclxuICAgIHZtLmNvZnJhZGUgPSB7ZGF0b3NGaW5hbmNpZXJvczoge2RldWRhOiBbXX19O1xyXG5cclxuICAgIHZtLmJhY2tTdGF0ZSA9IGJhY2tTdGF0ZTtcclxuICAgIFxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLmNvZnJhZGUgPSBkYXRhO1xyXG4gICAgICAgIGlmICghdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKVxyXG4gICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0ge2RldWRhOiBbXX07XHJcblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYWNrU3RhdGUoKXtcclxuICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdMaXN0YUNvZnJhZGVzJywgTGlzdGFDb2ZyYWRlcyk7XHJcblxyXG4gIGZ1bmN0aW9uIExpc3RhQ29mcmFkZXMoJHJvb3RTY29wZSwgJHN0YXRlLCBjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmZpbHRybyAgICA9ICdub21icmUnO1xyXG4gICAgdm0udHlwZUlucHV0ID0gJ3RleHQnO1xyXG4gICAgdm0uYnVzY2FyICAgID0gbnVsbDtcclxuXHJcbiAgICB2bS5idXNxdWVkYSAgICAgID0gYnVzcXVlZGE7XHJcbiAgICB2bS5yYWRpb0NoYW5nZSAgID0gcmFkaW9DaGFuZ2U7XHJcbiAgICB2bS5nb1RvQ29mcmFkZSAgID0gZ29Ub0NvZnJhZGU7XHJcbiAgICB2bS5tb2RpZnlDb2ZyYWRlID0gbW9kaWZ5Q29mcmFkZTtcclxuXHJcbiAgICAkcm9vdFNjb3BlLiRvbignc2Nyb2xsRG93bicsIGdldE5leHRQYWdlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1c3F1ZWRhKCkge1xyXG4gICAgICB2YXIgZmlsdHJvID0ge307XHJcbiAgICAgIGZpbHRyb1t2bS5maWx0cm9dID0gdm0uYnVzY2FyO1xyXG4gICAgICBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZSA9IGRhdGEubmV4dDtcclxuICAgICAgICB2bS5jb2ZyYWRlcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmFkaW9DaGFuZ2UoKSB7XHJcbiAgICAgIHZtLmJ1c2NhciA9IG51bGw7XHJcbiAgICAgIHZtLnR5cGVJbnB1dCA9ICh2bS5maWx0cm8gPT09ICdub21icmUnKSA/ICd0ZXh0JzogJ251bWJlcic7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ29Ub0NvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0RldGFsbGUnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vZGlmeUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdsaXN0YUNvZnJhZGVzJywgbGlzdGFDb2ZyYWRlcyk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBsaXN0YUNvZnJhZGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5odG1sJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBjb2ZyYWRlczogJz1jb2ZyYWRlcycsXHJcbiAgICAgICAgbmV4dFBhZ2U6ICc9cGFnZSdcclxuICAgICAgfSxcclxuICAgICAgY29udHJvbGxlcjogJ0xpc3RhQ29mcmFkZXMnLFxyXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
