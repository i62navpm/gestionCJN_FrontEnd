!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e,t){t.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:t}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:r,getMapsPrepService:o}})}function t(e){return e.cofradesRest().query()}function r(e,t){return e.cofradesRest().get({id:t.cofradeId})}function o(e,t,r){return t.$promise.then(function(t){var o=t.datosPersonales.direccion.calle+" "+t.datosPersonales.direccion.numero+" "+t.datosPersonales.direccion.municipio+" "+t.datosPersonales.direccion.provincia+" "+t.datosPersonales.direccion.cp;return r.geoCodingAPI(o).then(function(t){if(t.data.results.length){var r=t.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:r.lat,longitude:r.lng},marker:{latitude:r.lat,longitude:r.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],t.$inject=["cofradesService"],r.$inject=["cofradesService","$stateParams"],o.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,t){function r(t){e(t).toggle()}function o(e,o){r(o),t.go(e)}var n=this;n.toggleSidenav=r,n.navigateTo=o}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e,t){function r(){return e.$promise.then(function(e){o.cofrade=e})}var o=this;o.cofrade=null,o.maps=t,r()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e){function t(){return e.$promise.then(function(e){r.nextPage=e.next,r.cofrades=e.results})}var r=this;r.cofrades=null,r.nextPage=null,t()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,r){var o=t[0];t.bind("scroll",function(){o.scrollTop+o.offsetHeight>=o.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(t){var r=t instanceof Array;for(var o in t)null===t[o]?r?t.splice(o,1):delete t[o]:"object"==typeof t[o]&&e(t[o]);return t}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,t){function r(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1,cache:!0},save:{method:"POST",transformRequest:function(e,r){return angular.toJson(t("removeNulls")(e))}}})}function o(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}return{cofradesRest:r,cofradesBajasRest:o}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$filter"]}(),function(){"use strict";function e(e){function t(t){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:t,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:t}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,r){function o(){if(i.nextPage){var e={page:i.nextPage};i.buscar&&(e[i.filtro]=i.buscar),r.cofradesRest().query(e,function(e){i.nextPage=e.next,i.cofrades=i.cofrades.concat(e.results)})}}function n(){var e={};e[i.filtro]=i.buscar,r.cofradesRest().query(e,function(e){i.nextPage=e.next,i.cofrades=e.results})}function a(){i.buscar=null,i.typeInput="nombre"===i.filtro?"text":"number"}function c(e,r){t.go("cofradesDetalle",{cofradeId:e})}var i=this;i.filtro="nombre",i.typeInput="text",i.buscar=null,i.busqueda=n,i.radioChange=a,i.goToCofrade=c,e.$on("scrollDown",o)}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnJvdXRlcy5qcyIsImFwcC50aGVtZS5qcyIsImNvZnJhZGVzL2NvZnJhZGVzLnJvdXRlcy5qcyIsImludGVyZmF6L2FwcC5jb250cm9sbGVyLmpzIiwiY29mcmFkZXMvZGV0YWlsL2NvZnJhZGVEZXRhbGxlLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9saXN0L2NvZnJhZGVzLmNvbnRyb2xsZXIuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvc2Nyb2xseS5kaXJlY3RpdmUuanMiLCJjb21tb25zL2ZpbHRlcnMvcmVtb3ZlTnVsbHMuZmlsdGVyLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9jb2ZyYWRlcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9tYXBhcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwidGhlbWVBbmd1bGFyTWF0ZXJpYWwiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUiLCJnZXQiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImNvZnJhZGVzUHJlcFNlcnZpY2UiLCJnZXRDb2ZyYWRlUHJlcFNlcnZpY2UiLCJnZXRNYXBzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc1NlcnZpY2UiLCJjb2ZyYWRlc1Jlc3QiLCJxdWVyeSIsIiRzdGF0ZVBhcmFtcyIsImlkIiwiY29mcmFkZUlkIiwidWlHbWFwR29vZ2xlTWFwQXBpIiwibWFwYXNTZXJ2aWNlIiwiJHByb21pc2UiLCJ0aGVuIiwiZGF0YSIsImFkZHJlc3MiLCJkYXRvc1BlcnNvbmFsZXMiLCJkaXJlY2Npb24iLCJjYWxsZSIsIm51bWVybyIsIm11bmljaXBpbyIsInByb3ZpbmNpYSIsImNwIiwiZ2VvQ29kaW5nQVBJIiwicmVzcG9uc2UiLCJyZXN1bHRzIiwibGVuZ3RoIiwiY29vcmRpbmF0ZXMiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibWFwcyIsImNvb3JkIiwibGF0aXR1ZGUiLCJsYXQiLCJsb25naXR1ZGUiLCJsbmciLCJtYXJrZXIiLCJ6b29tIiwiQXBwQ3RybCIsIiRtZFNpZGVuYXYiLCIkc3RhdGUiLCJ0b2dnbGVTaWRlbmF2IiwibWVudUlkIiwidG9nZ2xlIiwibmF2aWdhdGVUbyIsInRvIiwiZ28iLCJ2bSIsInRoaXMiLCJDb2ZyYWRlRGV0YWxsZSIsImFjdGl2YXRlIiwiY29mcmFkZSIsIkNvZnJhZGVzIiwibmV4dFBhZ2UiLCJuZXh0IiwiY29mcmFkZXMiLCJzY3JvbGx5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHJvb3RTY29wZSIsImVsZW1lbnQiLCJhdHRycyIsInJhdyIsImJpbmQiLCJzY3JvbGxUb3AiLCJvZmZzZXRIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCIkZW1pdCIsImRpcmVjdGl2ZSIsInJlbW92ZU51bGxzIiwib2JqIiwiaXNBcnJheSIsIkFycmF5IiwiayIsInNwbGljZSIsImZpbHRlciIsIiRyZXNvdXJjZSIsIiRmaWx0ZXIiLCJtZXRob2QiLCJjYWNoZSIsInNhdmUiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaGVhZGVyc0dldHRlciIsInRvSnNvbiIsImNvZnJhZGVzQmFqYXNSZXN0IiwiZmFjdG9yeSIsIiRodHRwIiwicGFyYW1zIiwia2V5IiwiTGlzdGFDb2ZyYWRlcyIsImdldE5leHRQYWdlIiwicGFyYW1ldGVycyIsInBhZ2UiLCJidXNjYXIiLCJmaWx0cm8iLCJjb25jYXQiLCJidXNxdWVkYSIsInJhZGlvQ2hhbmdlIiwidHlwZUlucHV0IiwiZ29Ub0NvZnJhZGUiLCJldmVudCIsIiRvbiIsImxpc3RhQ29mcmFkZXMiLCJ0ZW1wbGF0ZVVybCIsInNjb3BlIiwiYmluZFRvQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLE9BQ0EsWUFDQSxhQUNBLGFBQ0EseUJDUEEsV0FDQSxZQU1BLFNBQUFDLEdBQUFDLEdBQ0FBLEVBQUFDLFdBQ0FDLFVBQUEsbUNBTkFMLFFBQ0FDLE9BQUEsT0FDQUssT0FBQUosR0NrQkVBLEVBQWFLLFNBQVcsaUNDdkIxQixXQUNBLFlBTUEsU0FBQUQsR0FBQUUsRUFBQUMsR0FFQUEsRUFBQUMsVUFBQSxLQUVBRixFQUNBRyxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsU0FBQSxzU0FYQWIsUUFDQUMsT0FBQSxPQUNBSyxPQUFBQSxHRDBDRUEsRUFBT0MsU0FBVyxpQkFBa0IseUJFL0N0QyxXQUNBLFlBTUEsU0FBQU8sR0FBQUMsSUFKQWYsUUFDQUMsT0FBQSxPQUNBSyxPQUFBUSxHRnVERUEsRUFBcUJQLFNBQVcseUJHNURsQyxXQUNBLFlBTUEsU0FBQUQsR0FBQUUsR0FDQUEsRUFDQUcsTUFBQSxZQUNBQyxJQUFBLFlBQ0FJLGtCQUFBLGlCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsSUFBQSxpQ0FFQUMsV0FBQSxXQUNBQyxhQUFBLEtBQ0FDLFNBQ0FDLG9CQUFBQSxLQUdBWCxNQUFBLG1CQUNBQyxJQUFBLHVCQUNBSSxrQkFBQSxpQkFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLElBQUEseUNBRUFDLFdBQUEsaUJBQ0FDLGFBQUEsS0FDQUMsU0FDQUUsc0JBQUFBLEVBQ0FDLG1CQUFBQSxLQUtBLFFBQUFGLEdBQUFHLEdBQ0EsTUFBQUEsR0FBQUMsZUFBQUMsUUFHQSxRQUFBSixHQUFBRSxFQUFB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d0YsRUFBQSxTQUFBaEYsR0FDQWlDLEVBQUFNLFNBQUF2QyxFQUFBd0MsS0FDQVAsRUFBQVEsU0FBQXpDLEVBQUFXLFVBSUEsUUFBQXdFLEtBQ0FsRCxFQUFBOEMsT0FBQSxLQUNBOUMsRUFBQW1ELFVBQUEsV0FBQW5ELEVBQUErQyxPQUFBLE9BQUEsU0FHQSxRQUFBSyxHQUFBM0YsRUFBQTRGLEdBQ0E1RCxFQUFBTSxHQUFBLG1CQUFBckMsVUFBQUQsSUF6Q0EsR0FBQXVDLEdBQUFDLElBRUFELEdBQUErQyxPQUFBLFNBQ0EvQyxFQUFBbUQsVUFBQSxPQUNBbkQsRUFBQThDLE9BQUEsS0FFQTlDLEVBQUFpRCxTQUFBQSxFQUNBakQsRUFBQWtELFlBQUFBLEVBQ0FsRCxFQUFBb0QsWUFBQUEsRUFFQXhDLEVBQUEwQyxJQUFBLGFBQUFYLEdBZkEvRyxRQUNBQyxPQUFBLE9BQ0FrQixXQUFBLGdCQUFBMkYsR1hrV0VBLEVBQWN2RyxTQUFXLGFBQWMsU0FBVSxzQll2V25ELFdBQ0EsWUFPQSxTQUFBb0gsS0FDQSxPQUNBN0MsU0FBQSxJQUNBOEMsWUFBQSwwREFDQUMsT0FDQWpELFNBQUEsWUFDQUYsU0FBQSxTQUVBdkQsV0FBQSxnQkFDQUMsYUFBQSxLQUNBMEcsa0JBQUEsR0FmQTlILFFBQ0FDLE9BQUEsT0FDQXdGLFVBQUEsZ0JBQUFrQyIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ25nUmVzb3VyY2UnLFxyXG4gICAgJ25nTWF0ZXJpYWwnLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJ1xyXG4gIF0pO1xyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhnb29nbGVNYXBBUEkpO1xyXG5cclxuICBmdW5jdGlvbiBnb29nbGVNYXBBUEkodWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIpe1xyXG4gICAgdWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIuY29uZmlndXJlKHtcclxuICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICB9KTsgICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLG51bGwsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XHJcblxyXG4gICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgLnN0YXRlKFwiaG9tZVwiLCB7XHJcbiAgICAgICAgdXJsOiBcIi9cIixcclxuICAgICAgICB0ZW1wbGF0ZTogJzxwIGNsYXNzPVwibGVhZFwiPldlbGNvbWUgdG8gdGhlIFVJLVJvdXRlciBEZW1vPC9wPicgK1xyXG4gICAgICAgICAgJzxwPlVzZSB0aGUgbWVudSBhYm92ZSB0byBuYXZpZ2F0ZS4gJyArXHJcbiAgICAgICAgICAnUGF5IGF0dGVudGlvbiB0byB0aGUgPGNvZGU+JHN0YXRlPC9jb2RlPiBhbmQgPGNvZGU+JHN0YXRlUGFyYW1zPC9jb2RlPiB2YWx1ZXMgYmVsb3cuPC9wPicgK1xyXG4gICAgICAgICAgJzxwPkNsaWNrIHRoZXNlIGxpbmtz4oCUPGEgaHJlZj1cIiMvYz9pZD0xXCI+QWxpY2U8L2E+IG9yICcgK1xyXG4gICAgICAgICAgJzxhIGhyZWY9XCIjL3VzZXIvNDJcIj5Cb2I8L2E+4oCUdG8gc2VlIGEgdXJsIHJlZGlyZWN0IGluIGFjdGlvbi48L3A+J1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKHRoZW1lQW5ndWxhck1hdGVyaWFsKTtcclxuXHJcbiAgZnVuY3Rpb24gdGhlbWVBbmd1bGFyTWF0ZXJpYWwoJG1kVGhlbWluZ1Byb3ZpZGVyKXtcclxuICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoJ2NvZnJhZGVzJywge1xyXG4gICAgICAgIHVybDogXCIvY29mcmFkZXNcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2xpc3QvY29mcmFkZXMuaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlcycsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgY29mcmFkZXNQcmVwU2VydmljZTogY29mcmFkZXNQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnN0YXRlKCdjb2ZyYWRlc0RldGFsbGUnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlcy86Y29mcmFkZUlkXCIsXHJcbiAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpeyAgXHJcbiAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlRGV0YWxsZScsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlOiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsXHJcbiAgICAgICAgICAgIGdldE1hcHNQcmVwU2VydmljZTogZ2V0TWFwc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLnF1ZXJ5KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkuZ2V0KHtpZDogJHN0YXRlUGFyYW1zLmNvZnJhZGVJZH0pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBnZXRNYXBzUHJlcFNlcnZpY2UodWlHbWFwR29vZ2xlTWFwQXBpLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIG1hcGFzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBcclxuICAgICAgdmFyIGFkZHJlc3MgPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubnVtZXJvICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3A7XHJcblxyXG4gICAgICByZXR1cm4gbWFwYXNTZXJ2aWNlLmdlb0NvZGluZ0FQSShhZGRyZXNzKS5cclxuICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdWlHbWFwR29vZ2xlTWFwQXBpLnRoZW4oZnVuY3Rpb24obWFwcykge1xyXG4gICAgICAgICAgICAgIHJldHVybiAge2Nvb3JkOiAgeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbTogMTcgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBBcHBDdHJsKCRtZFNpZGVuYXYsICRzdGF0ZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSB0b2dnbGVTaWRlbmF2O1xyXG4gICAgdm0ubmF2aWdhdGVUbyAgICA9IG5hdmlnYXRlVG87XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYobWVudUlkKSB7XHJcbiAgICAgICRtZFNpZGVuYXYobWVudUlkKS50b2dnbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHRvLCBtZW51SWQpe1xyXG4gICAgICB0b2dnbGVTaWRlbmF2KG1lbnVJZCk7XHJcbiAgICAgICRzdGF0ZS5nbyh0byk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZURldGFsbGUnLCBDb2ZyYWRlRGV0YWxsZSk7XHJcblxyXG4gIGZ1bmN0aW9uIENvZnJhZGVEZXRhbGxlKGdldENvZnJhZGVQcmVwU2VydmljZSwgZ2V0TWFwc1ByZXBTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLmNvZnJhZGUgPSBudWxsO1xyXG4gICAgdm0ubWFwcyA9IGdldE1hcHNQcmVwU2VydmljZTtcclxuICAgIFxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLmNvZnJhZGUgPSBkYXRhO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVzJywgQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlcyhjb2ZyYWRlc1ByZXBTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgXHJcbiAgICB2bS5jb2ZyYWRlcyA9IG51bGw7XHJcbiAgICB2bS5uZXh0UGFnZSA9IG51bGw7XHJcblxyXG4gICAgYWN0aXZhdGUoKTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIHJldHVybiBjb2ZyYWRlc1ByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0ubmV4dFBhZ2UgPSBkYXRhLm5leHQ7XHJcbiAgICAgICAgdm0uY29mcmFkZXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdzY3JvbGx5Jywgc2Nyb2xseSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbHkoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHJvb3RTY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICB2YXIgcmF3ID0gZWxlbWVudFswXTtcclxuICAgICAgICBlbGVtZW50LmJpbmQoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChyYXcuc2Nyb2xsVG9wICsgcmF3Lm9mZnNldEhlaWdodCA+PSByYXcuc2Nyb2xsSGVpZ2h0LTUpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInNjcm9sbERvd25cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3JlbW92ZU51bGxzJywgcmVtb3ZlTnVsbHMpO1xyXG5cclxuICBmdW5jdGlvbiByZW1vdmVOdWxscygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iail7XHJcbiAgICAgIHZhciBpc0FycmF5ID0gb2JqIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgIGZvciAodmFyIGsgaW4gb2JqKXtcclxuICAgICAgICBpZiAob2JqW2tdPT09bnVsbCkgaXNBcnJheSA/IG9iai5zcGxpY2UoaywxKSA6IGRlbGV0ZSBvYmpba107XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9ialtrXT09XCJvYmplY3RcIikgcmVtb3ZlTnVsbHMob2JqW2tdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2NvZnJhZGVzU2VydmljZScsIGNvZnJhZGVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzU2VydmljZSgkcmVzb3VyY2UsICRmaWx0ZXIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvZnJhZGVzUmVzdDogY29mcmFkZXNSZXN0LFxyXG4gICAgICBjb2ZyYWRlc0JhamFzUmVzdDogY29mcmFkZXNCYWphc1Jlc3RcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzLzppZC5qc29uOmpzb24nLCBudWxsLCB7XHJcbiAgICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IGZhbHNlLCBjYWNoZTogdHJ1ZX0sXHJcbiAgICAgICAgJ3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnLCB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLnRvSnNvbigkZmlsdGVyKCdyZW1vdmVOdWxscycpKGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNCYWphc1Jlc3QoKSB7XHJcbiAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY29mcmFkZXNCYWphcy86aWQuanNvbjpqc29uJywgbnVsbCwgeydxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OmZhbHNlfX0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ21hcGFzU2VydmljZScsIG1hcGFzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIG1hcGFzU2VydmljZSgkaHR0cCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZ2VvQ29kaW5nQVBJOiBnZW9Db2RpbmdBUElcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VvQ29kaW5nQVBJKGFkZHJlc3MpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsIHtwYXJhbXM6IHthZGRyZXNzOiBhZGRyZXNzLCBrZXk6IFwiQUl6YVN5RENfT0lEU2w2Y3VyakNNQ0x5em4yeWhNbWctZXI1a25JXCJ9fSkuXHJcbiAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgICB9ICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdMaXN0YUNvZnJhZGVzJywgTGlzdGFDb2ZyYWRlcyk7XHJcblxyXG4gIGZ1bmN0aW9uIExpc3RhQ29mcmFkZXMoJHJvb3RTY29wZSwgJHN0YXRlLCBjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmZpbHRybyAgICA9ICdub21icmUnO1xyXG4gICAgdm0udHlwZUlucHV0ID0gJ3RleHQnO1xyXG4gICAgdm0uYnVzY2FyICAgID0gbnVsbDtcclxuXHJcbiAgICB2bS5idXNxdWVkYSAgICAgPSBidXNxdWVkYTtcclxuICAgIHZtLnJhZGlvQ2hhbmdlICA9IHJhZGlvQ2hhbmdlO1xyXG4gICAgdm0uZ29Ub0NvZnJhZGUgPSBnb1RvQ29mcmFkZTtcclxuXHJcbiAgICAkcm9vdFNjb3BlLiRvbignc2Nyb2xsRG93bicsIGdldE5leHRQYWdlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1c3F1ZWRhKCkge1xyXG4gICAgICB2YXIgZmlsdHJvID0ge307XHJcbiAgICAgIGZpbHRyb1t2bS5maWx0cm9dID0gdm0uYnVzY2FyO1xyXG4gICAgICBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZSA9IGRhdGEubmV4dDtcclxuICAgICAgICB2bS5jb2ZyYWRlcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmFkaW9DaGFuZ2UoKSB7XHJcbiAgICAgIHZtLmJ1c2NhciA9IG51bGw7XHJcbiAgICAgIHZtLnR5cGVJbnB1dCA9ICh2bS5maWx0cm8gPT09ICdub21icmUnKSA/ICd0ZXh0JzogJ251bWJlcic7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ29Ub0NvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0RldGFsbGUnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdsaXN0YUNvZnJhZGVzJywgbGlzdGFDb2ZyYWRlcyk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBsaXN0YUNvZnJhZGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5odG1sJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBjb2ZyYWRlczogJz1jb2ZyYWRlcycsXHJcbiAgICAgICAgbmV4dFBhZ2U6ICc9cGFnZSdcclxuICAgICAgfSxcclxuICAgICAgY29udHJvbGxlcjogJ0xpc3RhQ29mcmFkZXMnLFxyXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
