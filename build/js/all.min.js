!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,r){r.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:r,cofradesBajasPrepService:o}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:t,getMapsPrepService:a}}).state("cofradesCambios",{url:"/cofrades/nuevos/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCofradePrepService:t}})}function r(e){return e.cofradesRest().query()}function o(e){return e.cofradesBajasRest().query()}function t(e,r){return r.cofradeId?e.cofradesRest().get({id:r.cofradeId}):!1}function a(e,r,o){return r.$promise.then(function(r){var t=r.datosPersonales.direccion.calle+" "+r.datosPersonales.direccion.numero+" "+r.datosPersonales.direccion.municipio+" "+r.datosPersonales.direccion.provincia+" "+r.datosPersonales.direccion.cp;return o.geoCodingAPI(t).then(function(r){if(r.data.results.length){var o=r.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:o.lat,longitude:o.lng},marker:{latitude:o.lat,longitude:o.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],r.$inject=["cofradesService"],o.$inject=["cofradesService"],t.$inject=["cofradesService","$stateParams"],a.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,r){function o(r){e(r).toggle()}function t(e,t){o(t),r.go(e)}var a=this;a.toggleSidenav=o,a.navigateTo=t}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e,r,o,t,a,n,c){function s(){a?a.$promise.then(i):n.getRegistros().then(function(e){C.cofrade.numeroOrden=e.data.numeroOrden,C.cofrade.numeroCofrade=e.data.numeroCofrade})}function i(e){return C.cofrade=e,C.calleSelected={calle:C.cofrade.datosPersonales.direccion.calle,cp:C.cofrade.datosPersonales.direccion.cp,provincia:C.cofrade.datosPersonales.direccion.provincia,municipio:C.cofrade.datosPersonales.direccion.municipio},f(C.cofrade.datosPersonales.direccion.calle),C.cofrade.datosFinancieros=C.cofrade.datosFinancieros||{cuenta:{},deuda:[]},C.cofrade.datosFinancieros.cuenta=C.cofrade.datosFinancieros.cuenta||{},C.cofrade.datosFinancieros.deuda=C.cofrade.datosFinancieros.deuda||[],!0}function u(){window.history.back()}function l(e){return n.getCalles(e).then(function(e){return e.data})}function d(e){e?(C.cofrade.datosPersonales.direccion.calle=e.calle,C.cofrade.datosPersonales.direccion.municipio=e.municipio,C.cofrade.datosPersonales.direccion.cp=e.cp,C.cofrade.datosPersonales.direccion.provincia=e.provincia,f(e.calle)):(C.cofrade.datosPersonales.direccion.calle=null,C.cofrade.datosPersonales.direccion.municipio=null,C.cofrade.datosPersonales.direccion.cp=null,C.cofrade.datosPersonales.direccion.provincia=null,C.sector=null,C.nuevaCalle=!0)}function f(e){c.sectoresRest().query({calle:e},function(e){C.sector=e[0].numeroSector,C.nuevaCalle=!1})}function p(){C.cofrade.datosFinancieros.cuenta.iban&&(C.cofrade.datosFinancieros.cuenta.cc=e("calcularCC")(C.cofrade.datosFinancieros.cuenta.iban))}function g(){C.cofrade.datosFinancieros.cuenta.cc&&(C.cofrade.datosFinancieros.cuenta.iban=e("calcularIban")(C.cofrade.datosFinancieros.cuenta.cc))}function m(e){function t(){c.sectoresRest().get({sector:C.sector},function(e){var t=e[0];t?(t.calles.push(C.searchText),t.$save(),s.save(C.cofrade,v,h)):o.show(o.simple().content("El sector "+C.sector+" no existe!!").position("top right").parent(r[0].querySelector("#toastBounds")).hideDelay(3e3))})}if(e){var a={cuenta:{},deuda:[]};C.cofrade.datosPersonales.direccion.calle=C.searchText,JSON.stringify(C.cofrade.datosFinancieros)===JSON.stringify(a)&&delete C.cofrade.datosFinancieros;var s=n.cofradesRest();C.nuevaCalle?t():s.save(C.cofrade,v,h)}else P()}function v(e){o.show(o.simple().content("Guardado con éxito!!").position("top right").hideDelay(3e3)),t.go("cofrades")}function h(e){o.show(o.simple().content("Error al guardar!!").position("top right").parent(r[0].querySelector("#toastBounds")).hideDelay(3e3))}function P(){o.show(o.simple().content("Existen errores en el formulario").action("OK").highlightAction(!1).parent(r[0].querySelector("#toastBounds")).position("top right"))}var C=this;C.nuevaCalle=!0,C.cofrade={datosFinancieros:{cuenta:{},deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:new Date}},C.backState=u,C.querySearch=l,C.selectedItemChange=d,C.calcularCC=p,C.calcularIban=g,C.guardar=m,s()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["$filter","$document","$mdToast","$state","getCofradePrepService","cofradesService","sectoresService"]}(),function(){"use strict";function e(e,r,o,t){function a(){return o.$promise.then(function(e){c.cofrade=r("dateToString")(e),c.cofrade.datosFinancieros&&c.cofrade.datosFinancieros.cuenta&&(c.iban=r("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=r("parseCC")(c.cofrade.datosFinancieros.cuenta.cc)),c.maps=t})}function n(r,o){e.go("cofradesCambios",{cofradeId:r})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=n,a()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e,r){function o(){return e.$promise.then(function(e){t.nextPage=e.next,t.cofrades=e.results}),r.$promise.then(function(e){t.nextPageBajas=e.next,t.cofradesBajas=e.results})}var t=this;t.cofrades=null,t.nextPage=null,t.cofradesBajas=null,t.nextPageBajas=null,t.selectedTab=0,o()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService","cofradesBajasPrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,r,o){var t=r[0];r.bind("scroll",function(){t.scrollTop+t.offsetHeight>=t.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var r="",o=0;o<e.length;o++)o>0&&o%4===0&&(r+=" "),r+=e[o];return r}}function r(){return function(e){e=e||"";var r="";return r=e.substr(0,4)+"-",r+=e.substr(4,4)+"-",r+=e.substr(8,2)+"-",r+=e.substr(10,10)}}function o(){return function(e){return e=e||"",e.substr(4,20)}}function t(){function e(e){for(var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",o=[],t=0;t<e.length;t++){var a=r.indexOf(e[t]);o.push(0>a?"-":a)}return o.join("")}function r(e,r){for(var o=10,t=e.length,a=0,n=0;t>n;n+=o){var c=a+""+e.substr(n,o);a=c%r}return a}function o(e,r){for(e+="";e.length<r;)e="0"+e;return e}return function(t){var a="ES",n=t+e(a)+"00",c=r(n,97);return a+o(98-c,2)+t}}angular.module("app").filter("parseIban",e).filter("parseCC",r).filter("calcularIban",t).filter("calcularCC",o)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function r(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",r)}(),function(){"use strict";function e(){return function(r){var o=r instanceof Array;for(var t in r)null===r[t]?o?r.splice(t,1):delete r[t]:"object"==typeof r[t]&&e(r[t]);return r}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,r,o){function t(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1},get:{method:"GET",transformResponse:function(e,r){return o("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,r){return angular.toJson(o("removeNulls")(e))}}})}function a(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function n(e){return r.get("http://127.0.0.1:5050/api/calles/",{params:{calle:e}}).then(function(e){return angular.fromJson(e)})}function c(){return r.get("http://127.0.0.1:5050/api/registros/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:t,cofradesBajasRest:a,getCalles:n,getRegistros:c}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function r(r){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:r,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:r}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function r(){return e("http://127.0.0.1:5050/api/sectores/:id.json:json",null,{get:{method:"GET",isArray:!0}})}return{sectoresRest:r}}angular.module("app").factory("sectoresService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,r,o){function t(e,o){o.stopPropagation();var t=r.confirm().title("Restaurar cofrade").content("¿Está seguro que desea restaurar este cofrade?<br>Su número de Cofrade se calculará de nuevo.").ariaLabel("Restaurar cofrade").targetEvent(o).ok("Aceptar").cancel("Cancelar");r.show(t).then(function(){a(e)})}function a(r){var t=o.cofradesRest().get({id:r},function(){t.baja=null,t.$save({updateNumeroCofrade:!0}).then(function(){"cofrades"===e.current.name?e.transitionTo(e.current,null,{reload:!0,inherit:!1,notify:!0}):e.go("cofrades")})})}var n=this;n.restoreCofrade=t}angular.module("app").controller("RestoreCofrade",e),e.$inject=["$state","$mdDialog","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/restore/restoreCofrade.directive.html",scope:{cofradeId:"=cofrade"},controller:"RestoreCofrade",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("restoreCofrade",e)}(),function(){"use strict";function e(e,r,o,t){function a(){g.bajas?c():n()}function n(){if(g.nextPage){var e={page:g.nextPage};g.buscar&&(e[g.filtro]=g.buscar),t.cofradesRest().query(e,function(e){g.nextPage=e.next,g.cofrades=g.cofrades.concat(e.results)})}}function c(){if(g.nextPageBajas){var e={page:g.nextPageBajas};g.buscar&&(e[g.filtro]=g.buscar),t.cofradesBajasRest().query(e,function(e){g.nextPageBajas=e.next,g.cofradesBajas=g.cofradesBajas.concat(e.results)})}}function s(){g.bajas?u():i()}function i(){var e={};e[g.filtro]=g.buscar,t.cofradesRest().query(e,function(e){g.nextPage=e.next,g.cofrades=e.results})}function u(){var e={};e[g.filtro]=g.buscar,t.cofradesBajasRest().query(e,function(e){g.nextPageBajas=e.next,g.cofradesBajas=e.results})}function l(){g.buscar=null,g.typeInput="nombre"===g.filtro?"text":"number",g.search()}function d(e,r){o.go("cofradesDetalle",{cofradeId:e})}function f(e,r){r.stopPropagation(),o.go("cofradesCambios",{cofradeId:e})}function p(e,r){r.stopPropagation(),console.log("eliminar cofrade")}var g=this;g.filtro="nombre",g.typeInput="text",g.buscar=null,g.search=s,g.radioChange=l,g.goToCofrade=d,g.modifyCofrade=f,g.removeCofrade=p;var m=e.$on("scrollDown",a);r.$on("$destroy",function(){m(),m=null})}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$scope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/list/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page",cofradesBajas:"=cofradesBajas",nextPageBajas:"=pageBajas"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiY29mcmFkZXMvY29mcmFkZXMucm91dGVzLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL2xpc3QvY29mcmFkZXMuY29udHJvbGxlci5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9zY3JvbGx5LmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZmlsdGVycy9wYXJzZUN1ZW50YS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VEYXRlLmZpbHRlci5qcyIsImNvbW1vbnMvZmlsdGVycy9yZW1vdmVOdWxscy5maWx0ZXIuanMiLCJjb21tb25zL3NlcnZpY2VzL2NvZnJhZGVzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL21hcGFzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL3NlY3RvcmVzLnNlcnZpY2UuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvY29mcmFkZXMvcmVzdG9yZS9yZXN0b3JlQ29mcmFkZS5jb250cm9sbGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9yZXN0b3JlL3Jlc3RvcmVDb2ZyYWRlLmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9saXN0L2NvZnJhZGVzLmNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2xpc3QvY29mcmFkZXMuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJnb29nbGVNYXBBUEkiLCJ1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlciIsImNvbmZpZ3VyZSIsImxpYnJhcmllcyIsImNvbmZpZyIsIiRpbmplY3QiLCJkYXRlUGlja2VyQ29uZmlnIiwiJG1kRGF0ZUxvY2FsZVByb3ZpZGVyIiwibW9udGhzIiwic2hvcnRNb250aHMiLCJkYXlzIiwic2hvcnREYXlzIiwiZmlyc3REYXlPZldlZWsiLCJwYXJzZURhdGUiLCJkYXRlU3RyaW5nIiwiRGF0ZSIsImZvcm1hdERhdGUiLCJkYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwidGhlbWVBbmd1bGFyTWF0ZXJpYWwiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUiLCJnZXQiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsImNvZnJhZGVzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2UiLCJnZXRDb2ZyYWRlUHJlcFNlcnZpY2UiLCJnZXRNYXBzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc1NlcnZpY2UiLCJjb2ZyYWRlc1Jlc3QiLCJxdWVyeSIsImNvZnJhZGVzQmFqYXNSZXN0IiwiJHN0YXRlUGFyYW1zIiwiaWQiLCJjb2ZyYWRlSWQiLCJ1aUdtYXBHb29nbGVNYXBBcGkiLCJtYXBhc1NlcnZpY2UiLCIkcHJvbWlzZSIsInRoZW4iLCJkYXRhIiwiYWRkcmVzcyIsImRhdG9zUGVyc29uYWxlcyIsImRpcmVjY2lvbiIsImNhbGxlIiwibnVtZXJvIiwibXVuaWNpcGlvIiwicHJvdmluY2lhIiwiY3AiLCJnZW9Db2RpbmdBUEkiLCJyZXNwb25zZSIsInJlc3VsdHMiLCJsZW5ndGgiLCJjb29yZGluYXRlcyIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJtYXBzIiwiY29vcmQiLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxuZyIsIm1hcmtlciIsInpvb20iLCJBcHBDdHJsIiwiJG1kU2lkZW5hdiIsIiRzdGF0ZSIsInRvZ2dsZVNpZGVuYXYiLCJtZW51SWQiLCJ0b2dnbGUiLCJuYXZpZ2F0ZVRvIiwidG8iLCJnbyIsInZtIiwidGhpcyIsIkNvZnJhZGVOdWV2byIsIiRmaWx0ZXIiLCIkZG9jdW1lbnQiLCIkbWRUb2FzdCIsInNlY3RvcmVzU2VydmljZSIsImFjdGl2YXRlIiwiaW5pdENvZnJhZGUiLCJnZXRSZWdpc3Ryb3MiLCJjb2ZyYWRlIiwibnVtZXJvT3JkZW4iLCJudW1lcm9Db2ZyYWRlIiwiY2FsbGVTZWxlY3RlZCIsInNlYXJjaFNlY3RvciIsImRhdG9zRmluYW5jaWVyb3MiLCJjdWVudGEiLCJkZXVkYSIsImJhY2tTdGF0ZSIsIndpbmRvdyIsImhpc3RvcnkiLCJiYWNrIiwicXVlcnlTZWFyY2giLCJnZXRDYWxsZXMiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJpdGVtIiwic2VjdG9yIiwibnVldmFDYWxsZSIsInNlY3RvcmVzUmVzdCIsIm51bWVyb1NlY3RvciIsImNhbGN1bGFyQ0MiLCJpYmFuIiwiY2MiLCJjYWxjdWxhckliYW4iLCJndWFyZGFyIiwiaXNWYWxpZCIsImd1YXJkYXJDYWxsZSIsInNlY3RvclJlc291cmNlIiwiY2FsbGVzIiwicHVzaCIsInNlYXJjaFRleHQiLCIkc2F2ZSIsIkNvZnJhZGVSZXNvdXJjZSIsInNhdmUiLCJndWFyZGFyU3VjY2VzcyIsImd1YXJkYXJFcnJvciIsInNob3ciLCJzaW1wbGUiLCJjb250ZW50IiwicG9zaXRpb24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGlkZURlbGF5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNob3dBY3Rpb25Ub2FzdCIsImFjdGlvbiIsImhpZ2hsaWdodEFjdGlvbiIsInNleG8iLCJmZWNoYUluc2NyaXBjaW9uIiwiZmVjaGFOYWNpbWllbnRvIiwiQ29mcmFkZURldGFsbGUiLCJtb2RpZnlDb2ZyYWRlIiwiZXZlbnQiLCJDb2ZyYWRlcyIsIm5leHRQYWdlIiwibmV4dCIsImNvZnJhZGVzIiwibmV4dFBhZ2VCYWphcyIsImNvZnJhZGVzQmFqYXMiLCJzZWxlY3RlZFRhYiIsInNjcm9sbHkiLCJyZXN0cmljdCIsImxpbmsiLCIkcm9vdFNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwicmF3IiwiYmluZCIsInNjcm9sbFRvcCIsIm9mZnNldEhlaWdodCIsInNjcm9sbEhlaWdodCIsIiRlbWl0IiwiZGlyZWN0aXZlIiwicGFyc2VJYmFuIiwiZm9ybWF0dGVkSWJhbiIsImkiLCJwYXJzZUNDIiwiZm9ybWF0dGVkQ0MiLCJzdWJzdHIiLCJ2YWxvckNpZnJhcyIsImNpZnJhcyIsIkxFVFJBUyIsIml0ZW1zIiwicG9zaWNpb24iLCJpbmRleE9mIiwiam9pbiIsIm1vZHVsbyIsImRpdmlzb3IiLCJDVUVOVEEiLCJsYXJnbyIsInJlc3RvIiwiZGl2aWRlbmRvIiwiY2Vyb3NJenF1aWVyZGEiLCJjY2MiLCJwYWlzIiwiZmlsdGVyIiwic3RyaW5nVG9EYXRlIiwiZGF0ZVRvU3RyaW5nIiwicmVtb3ZlTnVsbHMiLCJvYmoiLCJpc0FycmF5IiwiQXJyYXkiLCJrIiwic3BsaWNlIiwiJHJlc291cmNlIiwiJGh0dHAiLCJtZXRob2QiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsImhlYWRlcnNHZXR0ZXIiLCJmcm9tSnNvbiIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0b0pzb24iLCJwYXJhbXMiLCJmYWN0b3J5Iiwia2V5IiwiUmVzdG9yZUNvZnJhZGUiLCIkbWREaWFsb2ciLCJyZXN0b3JlQ29mcmFkZSIsInN0b3BQcm9wYWdhdGlvbiIsInJlc3RhdXJhckRpYWxvZyIsImNvbmZpcm0iLCJ0aXRsZSIsImFyaWFMYWJlbCIsInRhcmdldEV2ZW50Iiwib2siLCJjYW5jZWwiLCJyZXN0b3JlRW5kQ29mcmFkZSIsImJhamEiLCJ1cGRhdGVOdW1lcm9Db2ZyYWRlIiwiY3VycmVudCIsIm5hbWUiLCJ0cmFuc2l0aW9uVG8iLCJyZWxvYWQiLCJpbmhlcml0Iiwibm90aWZ5IiwidGVtcGxhdGVVcmwiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJMaXN0YUNvZnJhZGVzIiwiJHNjb3BlIiwiZ2V0TmV4dFBhZ2UiLCJiYWphcyIsImdldE5leHRQYWdlQmFqYXMiLCJnZXROZXh0UGFnZUFsdGFzIiwicGFyYW1ldGVycyIsInBhZ2UiLCJidXNjYXIiLCJmaWx0cm8iLCJjb25jYXQiLCJzZWFyY2giLCJzZWFyY2hCYWphcyIsInNlYXJjaEFsdGFzIiwicmFkaW9DaGFuZ2UiLCJ0eXBlSW5wdXQiLCJnb1RvQ29mcmFkZSIsInJlbW92ZUNvZnJhZGUiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlciIsIiRvbiIsImxpc3RhQ29mcmFkZXMiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FBQUMsT0FBQSxPQUNBLFlBQ0EsYUFDQSxhQUNBLG9CQUNBLGtCQ1JBLFdBQ0EsWUFNQSxTQUFBQyxHQUFBQyxHQUNBQSxFQUFBQyxXQUNBQyxVQUFBLG1DQU5BTCxRQUNBQyxPQUFBLE9BQ0FLLE9BQUFKLEdDbUJFQSxFQUFhSyxTQUFXLGlDQ3hCMUIsV0FDQSxZQU1BLFNBQUFDLEdBQUFDLEdBRUFBLEVBQUFDLFFBQUEsUUFBQSxVQUFBLFFBQUEsUUFBQSxPQUFBLFFBQUEsUUFBQSxTQUFBLGFBQUEsVUFBQSxZQUFBLGFBQ0FELEVBQUFFLGFBQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE9BQ0FGLEVBQUFHLE1BQUEsUUFBQSxTQUFBLFlBQUEsU0FBQSxVQUFBLFNBQUEsV0FDQUgsRUFBQUksV0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxPQUVBSixFQUFBSyxlQUFBLEVBRUFMLEVBQUFNLFVBQUEsU0FBQUMsR0FDQSxNQUFBLElBQUFDLE1BQUFELElBR0FQLEVBQUFTLFdBQUEsU0FBQUMsR0FDQSxNQUFBLElBQUFGLE1BQUFFLEdBQUFDLHNCQWxCQXBCLFFBQ0FDLE9BQUEsT0FDQUssT0FBQUUsR0QrQ0VBLEVBQWlC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QUFBbUcsS0FDQWxFLEVBQUFxRSxjQUFBdEcsRUFBQVcsVUFJQSxRQUFBeUwsS0FDQW5LLEVBQUE2SixPQUFBLEtBQ0E3SixFQUFBb0ssVUFBQSxXQUFBcEssRUFBQThKLE9BQUEsT0FBQSxTQUNBOUosRUFBQWdLLFNBR0EsUUFBQUssR0FBQTVNLEVBQUFzRyxHQUNBdEUsRUFBQU0sR0FBQSxtQkFBQXJDLFVBQUFELElBR0EsUUFBQXFHLEdBQUFyRyxFQUFBc0csR0FDQUEsRUFBQWtFLGtCQUNBeEksRUFBQU0sR0FBQSxtQkFBQXJDLFVBQUFELElBR0EsUUFBQTZNLEdBQUE3TSxFQUFBc0csR0FDQUEsRUFBQWtFLGtCQUNBc0MsUUFBQUMsSUFBQSxvQkFoR0EsR0FBQXhLLEdBQUFDLElBRUFELEdBQUE4SixPQUFBLFNBQ0E5SixFQUFBb0ssVUFBQSxPQUNBcEssRUFBQTZKLE9BQUEsS0FFQTdKLEVBQUFnSyxPQUFBQSxFQUNBaEssRUFBQW1LLFlBQUFBLEVBQ0FuSyxFQUFBcUssWUFBQUEsRUFDQXJLLEVBQUE4RCxjQUFBQSxFQUNBOUQsRUFBQXNLLGNBQUFBLENBRUEsSUFBQUcsR0FBQS9GLEVBQUFnRyxJQUFBLGFBQUFuQixFQUVBRCxHQUFBb0IsSUFBQSxXQUFBLFdBQ0FELElBQ0FBLEVBQUEsT0FyQkE1UCxRQUNBQyxPQUFBLE9BQ0ErQixXQUFBLGdCQUFBd00sR2xCZzJCRUEsRUFBY2pPLFNBQVcsYUFBYyxTQUFVLFNBQVUsc0JtQnIyQjdELFdBQ0EsWUFPQSxTQUFBdVAsS0FDQSxPQUNBbkcsU0FBQSxJQUNBMEUsWUFBQSwrREFDQUMsT0FDQWhGLFNBQUEsWUFDQUYsU0FBQSxRQUNBSSxjQUFBLGlCQUNBRCxjQUFBLGNBR0F2SCxXQUFBLGdCQUNBQyxhQUFBLEtBQ0FzTSxrQkFBQSxHQWxCQXZPLFFBQ0FDLE9BQUEsT0FDQXFLLFVBQUEsZ0JBQUF3RiIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICd1aS5yb3V0ZXInLFxyXG4gICAgJ25nUmVzb3VyY2UnLFxyXG4gICAgJ25nTWF0ZXJpYWwnLFxyXG4gICAgJ3VpR21hcGdvb2dsZS1tYXBzJyxcclxuICAgICduZ01lc3NhZ2VzJ1xyXG4gIF0pO1xyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhnb29nbGVNYXBBUEkpO1xyXG5cclxuICBmdW5jdGlvbiBnb29nbGVNYXBBUEkodWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIpe1xyXG4gICAgdWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIuY29uZmlndXJlKHtcclxuICAgICAgICBsaWJyYXJpZXM6ICd3ZWF0aGVyLGdlb21ldHJ5LHZpc3VhbGl6YXRpb24nXHJcbiAgICB9KTsgICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLG51bGwsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGRhdGVQaWNrZXJDb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBkYXRlUGlja2VyQ29uZmlnKCRtZERhdGVMb2NhbGVQcm92aWRlcikge1xyXG5cclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5tb250aHMgPSBbJ2VuZXJvJywgJ2ZlYnJlcm8nLCAnbWFyem8nLCAnYWJyaWwnLCAnbWF5bycsICdqdW5pbycsICdqdWxpbycsICdhZ29zdG8nLCAnc2VwdGllbWJyZScsICdvY3R1YnJlJywgJ25vdmllbWJyZScsICdkaWNpZW1icmUnXTtcclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5zaG9ydE1vbnRocyA9IFsnZW5lJywgJ2ZlYicsICdtYXInLCAnYWJyJywgJ21heScsICdqdW4nLCAnanVsJywgJ2FnbycsICdzZXAnLCAnb2N0JywgJ25vdicsICdkaWMnXTtcclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5kYXlzID0gWydsdW5lcycsICdtYXJ0ZXMnLCAnbWnDqXJjb2xlcycsICdqdWV2ZXMnLCAndmllcm5lcycsICdzw6FiYWRvJywgJ2RvbWluZ28nXTtcclxuICAgICRtZERhdGVMb2NhbGVQcm92aWRlci5zaG9ydERheXMgPSBbJ2x1bicsICdtYXInLCAnbWnDqScsICdqdWUnLCAndmllJywgJ3PDoWInLCAnZG9tJ107XHJcblxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmZpcnN0RGF5T2ZXZWVrID0gMTtcclxuICAgIFxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnBhcnNlRGF0ZSA9IGZ1bmN0aW9uKGRhdGVTdHJpbmcpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmZvcm1hdERhdGUgPSBmdW5jdGlvbihkYXRlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIH07XHJcblxyXG4gIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XHJcblxyXG4gICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgLnN0YXRlKFwiaG9tZVwiLCB7XHJcbiAgICAgICAgdXJsOiBcIi9cIixcclxuICAgICAgICB0ZW1wbGF0ZTogJzxwIGNsYXNzPVwibGVhZFwiPldlbGNvbWUgdG8gdGhlIFVJLVJvdXRlciBEZW1vPC9wPicgK1xyXG4gICAgICAgICAgJzxwPlVzZSB0aGUgbWVudSBhYm92ZSB0byBuYXZpZ2F0ZS4gJyArXHJcbiAgICAgICAgICAnUGF5IGF0dGVudGlvbiB0byB0aGUgPGNvZGU+JHN0YXRlPC9jb2RlPiBhbmQgPGNvZGU+JHN0YXRlUGFyYW1zPC9jb2RlPiB2YWx1ZXMgYmVsb3cuPC9wPicgK1xyXG4gICAgICAgICAgJzxwPkNsaWNrIHRoZXNlIGxpbmtz4oCUPGEgaHJlZj1cIiMvYz9pZD0xXCI+QWxpY2U8L2E+IG9yICcgK1xyXG4gICAgICAgICAgJzxhIGhyZWY9XCIjL3VzZXIvNDJcIj5Cb2I8L2E+4oCUdG8gc2VlIGEgdXJsIHJlZGlyZWN0IGluIGFjdGlvbi48L3A+J1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKHRoZW1lQW5ndWxhck1hdGVyaWFsKTtcclxuXHJcbiAgZnVuY3Rpb24gdGhlbWVBbmd1bGFyTWF0ZXJpYWwoJG1kVGhlbWluZ1Byb3ZpZGVyKXtcclxuICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoJ2NvZnJhZGVzJywge1xyXG4gICAgICAgIHVybDogXCIvY29mcmFkZXNcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2xpc3QvY29mcmFkZXMuaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlcycsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgY29mcmFkZXNQcmVwU2VydmljZTogY29mcmFkZXNQcmVwU2VydmljZSxcclxuICAgICAgICAgICAgY29mcmFkZXNCYWphc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXNEZXRhbGxlJywge1xyXG4gICAgICAgIHVybDogXCIvY29mcmFkZXMvOmNvZnJhZGVJZFwiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvZGV0YWlsL2NvZnJhZGVEZXRhbGxlLmh0bWwnKTsgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOiAnQ29mcmFkZURldGFsbGUnLFxyXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZTogZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICBnZXRNYXBzUHJlcFNlcnZpY2U6IGdldE1hcHNQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSkuXHJcbiAgICAgIHN0YXRlKCdjb2ZyYWRlc0NhbWJpb3MnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlcy9udWV2b3MvOmNvZnJhZGVJZFwiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvYWRkL2NvZnJhZGVOdWV2by5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVOdWV2bycsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlOiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29mcmFkZXNQcmVwU2VydmljZShjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkucXVlcnkoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzQmFqYXNQcmVwU2VydmljZShjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNCYWphc1Jlc3QoKS5xdWVyeSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICByZXR1cm4gKCRzdGF0ZVBhcmFtcy5jb2ZyYWRlSWQpID8gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLmdldCh7aWQ6ICRzdGF0ZVBhcmFtcy5jb2ZyYWRlSWR9KSA6IGZhbHNlO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBnZXRNYXBzUHJlcFNlcnZpY2UodWlHbWFwR29vZ2xlTWFwQXBpLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIG1hcGFzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBcclxuICAgICAgdmFyIGFkZHJlc3MgPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubnVtZXJvICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3A7XHJcblxyXG4gICAgICByZXR1cm4gbWFwYXNTZXJ2aWNlLmdlb0NvZGluZ0FQSShhZGRyZXNzKS5cclxuICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdWlHbWFwR29vZ2xlTWFwQXBpLnRoZW4oZnVuY3Rpb24obWFwcykge1xyXG4gICAgICAgICAgICAgIHJldHVybiAge2Nvb3JkOiAgeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbTogMTcgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBBcHBDdHJsKCRtZFNpZGVuYXYsICRzdGF0ZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSB0b2dnbGVTaWRlbmF2O1xyXG4gICAgdm0ubmF2aWdhdGVUbyAgICA9IG5hdmlnYXRlVG87XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYobWVudUlkKSB7XHJcbiAgICAgICRtZFNpZGVuYXYobWVudUlkKS50b2dnbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHRvLCBtZW51SWQpe1xyXG4gICAgICB0b2dnbGVTaWRlbmF2KG1lbnVJZCk7XHJcbiAgICAgICRzdGF0ZS5nbyh0byk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZU51ZXZvJywgQ29mcmFkZU51ZXZvKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZU51ZXZvKCRmaWx0ZXIsICRkb2N1bWVudCwgJG1kVG9hc3QsICRzdGF0ZSwgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLCBjb2ZyYWRlc1NlcnZpY2UsIHNlY3RvcmVzU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0ubnVldmFDYWxsZSA9IHRydWU7XHJcbiAgICB2bS5jb2ZyYWRlID0ge2RhdG9zRmluYW5jaWVyb3M6IHtjdWVudGE6IHt9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldWRhOiBbXX0sXHJcbiAgICAgICAgICAgICAgICAgIGRhdG9zUGVyc29uYWxlczogIHtkaXJlY2Npb246IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V4bzogXCJIb21icmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhSW5zY3JpcGNpb246IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWNoYU5hY2ltaWVudG86IG5ldyBEYXRlKCl9XHJcbiAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICB2bS5iYWNrU3RhdGUgICAgICAgICAgPSBiYWNrU3RhdGU7XHJcbiAgICB2bS5xdWVyeVNlYXJjaCAgICAgICAgPSBxdWVyeVNlYXJjaDtcclxuICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcclxuICAgIHZtLmNhbGN1bGFyQ0MgICAgICAgICA9IGNhbGN1bGFyQ0M7XHJcbiAgICB2bS5jYWxjdWxhckliYW4gICAgICAgPSBjYWxjdWxhckliYW47XHJcbiAgICB2bS5ndWFyZGFyICAgICAgICAgICAgPSBndWFyZGFyO1xyXG5cclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIGlmIChnZXRDb2ZyYWRlUHJlcFNlcnZpY2Upe1xyXG4gICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGluaXRDb2ZyYWRlKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5nZXRSZWdpc3Ryb3MoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNvZnJhZGUubnVtZXJvT3JkZW4gPSByZXNwb25zZS5kYXRhLm51bWVyb09yZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5udW1lcm9Db2ZyYWRlID0gcmVzcG9uc2UuZGF0YS5udW1lcm9Db2ZyYWRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRDb2ZyYWRlKGRhdGEpIHtcclxuICAgICAgdm0uY29mcmFkZSA9IGRhdGE7XHJcbiAgICAgIHZtLmNhbGxlU2VsZWN0ZWQgPSB7Y2FsbGU6IHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjcDogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpbmNpYTogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLnByb3ZpbmNpYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtdW5pY2lwaW86IHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW99O1xyXG4gICAgICBzZWFyY2hTZWN0b3Iodm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlKTtcclxuXHJcbiAgICAgIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcyA9IHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcyB8fCB7Y3VlbnRhOiB7fSwgZGV1ZGE6IFtdfTtcclxuICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSA9IHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEgfHwge307XHJcbiAgICAgIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5kZXVkYSA9IHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5kZXVkYSB8fCBbXTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFja1N0YXRlKCkge1xyXG4gICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcclxuICAgICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5nZXRDYWxsZXMocXVlcnkpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe3JldHVybiByZXNwb25zZS5kYXRhO30pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdGVkSXRlbUNoYW5nZShpdGVtKSB7XHJcbiAgICAgIGlmIChpdGVtKXtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSBpdGVtLmNhbGxlO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gPSBpdGVtLm11bmljaXBpbztcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AgPSBpdGVtLmNwO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgPSBpdGVtLnByb3ZpbmNpYTtcclxuICAgICAgICBzZWFyY2hTZWN0b3IoaXRlbS5jYWxsZSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpbyA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNwID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhID0gbnVsbDtcclxuICAgICAgICB2bS5zZWN0b3IgPSBudWxsO1xyXG4gICAgICAgIHZtLm51ZXZhQ2FsbGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlYXJjaFNlY3RvcihjYWxsZSkge1xyXG4gICAgICBzZWN0b3Jlc1NlcnZpY2Uuc2VjdG9yZXNSZXN0KCkucXVlcnkoe2NhbGxlOiBjYWxsZX0sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLnNlY3RvciA9IGRhdGFbMF0ubnVtZXJvU2VjdG9yO1xyXG4gICAgICAgIHZtLm51ZXZhQ2FsbGUgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJDQygpIHtcclxuICAgICAgaWYgKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbilcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjID0gJGZpbHRlcignY2FsY3VsYXJDQycpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgICBpZiAodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYylcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4gPSAkZmlsdGVyKCdjYWxjdWxhckliYW4nKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBndWFyZGFyKGlzVmFsaWQpIHtcclxuICAgICAgaWYoaXNWYWxpZCl7XHJcbiAgICAgICAgdmFyIGRhdG9zRmluYW5jaWVyb3MgPSB7Y3VlbnRhOiB7fSwgZGV1ZGE6IFtdfTtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSB2bS5zZWFyY2hUZXh0O1xyXG5cclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKSA9PT0gSlNPTi5zdHJpbmdpZnkoZGF0b3NGaW5hbmNpZXJvcykpXHJcbiAgICAgICAgICBkZWxldGUgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBDb2ZyYWRlUmVzb3VyY2UgPSBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCk7XHJcbiAgICAgICAgaWYodm0ubnVldmFDYWxsZSlcclxuICAgICAgICAgIGd1YXJkYXJDYWxsZSgpO1xyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICBDb2ZyYWRlUmVzb3VyY2Uuc2F2ZSh2bS5jb2ZyYWRlLCBndWFyZGFyU3VjY2VzcywgZ3VhcmRhckVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNob3dBY3Rpb25Ub2FzdCgpO1xyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gZ3VhcmRhckNhbGxlKCkge1xyXG4gICAgICAgIHNlY3RvcmVzU2VydmljZS5zZWN0b3Jlc1Jlc3QoKS5nZXQoe3NlY3Rvcjogdm0uc2VjdG9yfSwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2YXIgc2VjdG9yUmVzb3VyY2UgPSAgZGF0YVswXTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYoc2VjdG9yUmVzb3VyY2Upe1xyXG4gICAgICAgICAgICBzZWN0b3JSZXNvdXJjZS5jYWxsZXMucHVzaCh2bS5zZWFyY2hUZXh0KTtcclxuICAgICAgICAgICAgc2VjdG9yUmVzb3VyY2UuJHNhdmUoKTtcclxuICAgICAgICAgICAgQ29mcmFkZVJlc291cmNlLnNhdmUodm0uY29mcmFkZSwgZ3VhcmRhclN1Y2Nlc3MsIGd1YXJkYXJFcnJvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAuY29udGVudCgnRWwgc2VjdG9yICcgK3ZtLnNlY3RvcisgJyBubyBleGlzdGUhIScpXHJcbiAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGd1YXJkYXJTdWNjZXNzKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdHdWFyZGFkbyBjb24gw6l4aXRvISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICApO1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ3VhcmRhckVycm9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdFcnJvciBhbCBndWFyZGFyISEnKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgLnBhcmVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcignI3RvYXN0Qm91bmRzJykpXHJcbiAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dBY3Rpb25Ub2FzdCgpIHtcclxuICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgLmNvbnRlbnQoJ0V4aXN0ZW4gZXJyb3JlcyBlbiBlbCBmb3JtdWxhcmlvJylcclxuICAgICAgICAgIC5hY3Rpb24oJ09LJylcclxuICAgICAgICAgIC5oaWdobGlnaHRBY3Rpb24oZmFsc2UpXHJcbiAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlRGV0YWxsZScsIENvZnJhZGVEZXRhbGxlKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZURldGFsbGUoJHN0YXRlLCAkZmlsdGVyLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIGdldE1hcHNQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5jb2ZyYWRlID0gbnVsbDtcclxuICAgIHZtLm1hcHMgPSBudWxsO1xyXG4gICAgXHJcbiAgICB2bS5tb2RpZnlDb2ZyYWRlID0gbW9kaWZ5Q29mcmFkZTtcclxuICAgIFxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLmNvZnJhZGUgPSAkZmlsdGVyKCdkYXRlVG9TdHJpbmcnKShkYXRhKTtcclxuICAgICAgICBpZih2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MpXHJcbiAgICAgICAgICBpZih2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhKXtcclxuICAgICAgICAgICAgdm0uaWJhbiA9ICRmaWx0ZXIoJ3BhcnNlSWJhbicpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICAgICAgICAgIHZtLmNjID0gJGZpbHRlcigncGFyc2VDQycpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuY2MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIHZtLm1hcHMgPSBnZXRNYXBzUHJlcFNlcnZpY2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vZGlmeUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVzJywgQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlcyhjb2ZyYWRlc1ByZXBTZXJ2aWNlLCBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmNvZnJhZGVzID0gbnVsbDtcclxuICAgIHZtLm5leHRQYWdlID0gbnVsbDtcclxuICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBudWxsO1xyXG4gICAgdm0ubmV4dFBhZ2VCYWphcyA9IG51bGw7XHJcbiAgICB2bS5zZWxlY3RlZFRhYiA9IDA7XHJcbiAgICBhY3RpdmF0ZSgpO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgY29mcmFkZXNQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdzY3JvbGx5Jywgc2Nyb2xseSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbHkoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHJvb3RTY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICB2YXIgcmF3ID0gZWxlbWVudFswXTtcclxuICAgICAgICBlbGVtZW50LmJpbmQoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChyYXcuc2Nyb2xsVG9wICsgcmF3Lm9mZnNldEhlaWdodCA+PSByYXcuc2Nyb2xsSGVpZ2h0LTUpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInNjcm9sbERvd25cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3BhcnNlSWJhbicsIHBhcnNlSWJhbilcclxuICAgIC5maWx0ZXIoJ3BhcnNlQ0MnLCBwYXJzZUNDKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJJYmFuJywgY2FsY3VsYXJJYmFuKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJDQycsIGNhbGN1bGFyQ0MpO1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZUliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHZhciBmb3JtYXR0ZWRJYmFuID0gJyc7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGliYW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA+IDAgJiYgaSAlIDQgPT09IDApIHtcclxuICAgICAgICAgIGZvcm1hdHRlZEliYW4gKz0gJyAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXR0ZWRJYmFuICs9IGliYW5baV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZEliYW47XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2MpIHtcclxuICAgICAgY2MgPSBjYyB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZENDID0gJyc7XHJcblxyXG4gICAgICBmb3JtYXR0ZWRDQyA9IGNjLnN1YnN0cigwLCA0KSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDQsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoOCwgMikgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cigxMCwgMTApO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZENDO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbGN1bGFyQ0MoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHJldHVybiBpYmFuLnN1YnN0cig0LCAyMCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjY2MpIHtcclxuICAgICAgdmFyIHBhaXMgPSBcIkVTXCI7XHJcbiAgICAgIHZhciBjaWZyYXMgPSBjY2MgKyB2YWxvckNpZnJhcyhwYWlzKSArIFwiMDBcIjtcclxuICAgICAgdmFyIHJlc3RvID0gbW9kdWxvKGNpZnJhcywgOTcpO1xyXG4gICAgICByZXR1cm4gcGFpcyArIGNlcm9zSXpxdWllcmRhKDk4LXJlc3RvLCAyKSArIGNjYztcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsb3JDaWZyYXMoY2lmcmFzKSB7XHJcbiAgICAgIHZhciBMRVRSQVMgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPGNpZnJhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwb3NpY2lvbiA9IExFVFJBUy5pbmRleE9mKGNpZnJhc1tpXSk7XHJcbiAgICAgICAgaXRlbXMucHVzaChwb3NpY2lvbiA8IDA/IFwiLVwiOiBwb3NpY2lvbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGl0ZW1zLmpvaW4oXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kdWxvKGNpZnJhcywgZGl2aXNvcikge1xyXG4gICAgICB2YXIgQ1VFTlRBID0gMTA7XHJcbiAgICAgIHZhciBsYXJnbyA9IGNpZnJhcy5sZW5ndGg7XHJcbiAgICAgIHZhciByZXN0byA9IDA7XHJcbiAgICAgIGZvciAodmFyIGk9MDsgaTxsYXJnbzsgaSs9Q1VFTlRBKSB7XHJcbiAgICAgICAgdmFyIGRpdmlkZW5kbyA9IHJlc3RvICsgXCJcIiArIGNpZnJhcy5zdWJzdHIoaSwgQ1VFTlRBKTtcclxuICAgICAgICByZXN0byA9IGRpdmlkZW5kbyAlIGRpdmlzb3I7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3RvO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNlcm9zSXpxdWllcmRhKGNpZnJhcywgbGFyZ28pIHtcclxuICAgICAgY2lmcmFzICs9ICcnO1xyXG4gICAgICB3aGlsZShjaWZyYXMubGVuZ3RoIDwgbGFyZ28pIHsgY2lmcmFzID0gJzAnK2NpZnJhczsgfVxyXG4gICAgICByZXR1cm4gY2lmcmFzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3N0cmluZ1RvRGF0ZScsIHN0cmluZ1RvRGF0ZSlcclxuICAgIC5maWx0ZXIoJ2RhdGVUb1N0cmluZycsIGRhdGVUb1N0cmluZyk7XHJcblxyXG4gIGZ1bmN0aW9uIHN0cmluZ1RvRGF0ZSgpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBuZXcgRGF0ZShkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8pO1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uID0gbmV3IERhdGUoZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbik7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVUb1N0cmluZygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3JlbW92ZU51bGxzJywgcmVtb3ZlTnVsbHMpO1xyXG5cclxuICBmdW5jdGlvbiByZW1vdmVOdWxscygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iail7XHJcbiAgICAgIHZhciBpc0FycmF5ID0gb2JqIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgIGZvciAodmFyIGsgaW4gb2JqKXtcclxuICAgICAgICBpZiAob2JqW2tdPT09bnVsbCkgaXNBcnJheSA/IG9iai5zcGxpY2UoaywxKSA6IGRlbGV0ZSBvYmpba107XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9ialtrXT09XCJvYmplY3RcIikgcmVtb3ZlTnVsbHMob2JqW2tdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2NvZnJhZGVzU2VydmljZScsIGNvZnJhZGVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzU2VydmljZSgkcmVzb3VyY2UsICRodHRwLCAkZmlsdGVyKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb2ZyYWRlc1Jlc3Q6IGNvZnJhZGVzUmVzdCxcclxuICAgICAgY29mcmFkZXNCYWphc1Jlc3Q6IGNvZnJhZGVzQmFqYXNSZXN0LFxyXG4gICAgICBnZXRDYWxsZXM6IGdldENhbGxlcyxcclxuICAgICAgZ2V0UmVnaXN0cm9zOiBnZXRSZWdpc3Ryb3NcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzLzppZC5qc29uOmpzb24nLCBudWxsLCB7XHJcbiAgICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IGZhbHNlfSxcclxuICAgICAgICAnZ2V0JzogICAge21ldGhvZDonR0VUJywgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ3N0cmluZ1RvRGF0ZScpKGFuZ3VsYXIuZnJvbUpzb24oZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICdzYXZlJzogICB7bWV0aG9kOidQT1NUJywgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci50b0pzb24oJGZpbHRlcigncmVtb3ZlTnVsbHMnKShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvZnJhZGVzQmFqYXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzQmFqYXMvOmlkLmpzb246anNvbicsIG51bGwsIHsncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTpmYWxzZX19KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDYWxsZXMoY2FsbGUpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9jYWxsZXMvJywge3BhcmFtczoge2NhbGxlOiBjYWxsZX19KS5cclxuICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmZyb21Kc29uKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSZWdpc3Ryb3MoKSB7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvcmVnaXN0cm9zLycpLlxyXG4gICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ21hcGFzU2VydmljZScsIG1hcGFzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIG1hcGFzU2VydmljZSgkaHR0cCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZ2VvQ29kaW5nQVBJOiBnZW9Db2RpbmdBUElcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2VvQ29kaW5nQVBJKGFkZHJlc3MpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsIHtwYXJhbXM6IHthZGRyZXNzOiBhZGRyZXNzLCBrZXk6IFwiQUl6YVN5RENfT0lEU2w2Y3VyakNNQ0x5em4yeWhNbWctZXI1a25JXCJ9fSkuXHJcbiAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgfSk7XHJcbiAgICB9ICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdzZWN0b3Jlc1NlcnZpY2UnLCBzZWN0b3Jlc1NlcnZpY2UpO1xyXG5cclxuICBmdW5jdGlvbiBzZWN0b3Jlc1NlcnZpY2UoJHJlc291cmNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzZWN0b3Jlc1Jlc3Q6IHNlY3RvcmVzUmVzdFxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZWN0b3Jlc1Jlc3QoKSB7XHJcbiAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvc2VjdG9yZXMvOmlkLmpzb246anNvbicsIG51bGwsIHtcclxuICAgICAgICAnZ2V0JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IHRydWV9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1Jlc3RvcmVDb2ZyYWRlJywgUmVzdG9yZUNvZnJhZGUpO1xyXG5cclxuICBmdW5jdGlvbiBSZXN0b3JlQ29mcmFkZSgkc3RhdGUsICRtZERpYWxvZywgY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLnJlc3RvcmVDb2ZyYWRlID0gcmVzdG9yZUNvZnJhZGU7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHJlc3RvcmVDb2ZyYWRlKGlkLCBldmVudCl7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB2YXIgcmVzdGF1cmFyRGlhbG9nID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxyXG4gICAgICAgICAgLnRpdGxlKCdSZXN0YXVyYXIgY29mcmFkZScpXHJcbiAgICAgICAgICAuY29udGVudCgnwr9Fc3TDoSBzZWd1cm8gcXVlIGRlc2VhIHJlc3RhdXJhciBlc3RlIGNvZnJhZGU/PGJyPlN1IG7Dum1lcm8gZGUgQ29mcmFkZSBzZSBjYWxjdWxhcsOhIGRlIG51ZXZvLicpXHJcbiAgICAgICAgICAuYXJpYUxhYmVsKCdSZXN0YXVyYXIgY29mcmFkZScpXHJcbiAgICAgICAgICAudGFyZ2V0RXZlbnQoZXZlbnQpXHJcbiAgICAgICAgICAub2soJ0FjZXB0YXInKVxyXG4gICAgICAgICAgLmNhbmNlbCgnQ2FuY2VsYXInKTtcclxuICAgICAgJG1kRGlhbG9nLnNob3cocmVzdGF1cmFyRGlhbG9nKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJlc3RvcmVFbmRDb2ZyYWRlKGlkKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzdG9yZUVuZENvZnJhZGUoaWQpe1xyXG4gICAgICB2YXIgY29mcmFkZSA9IGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5nZXQoe2lkOiBpZH0sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29mcmFkZS5iYWphID0gbnVsbDtcclxuICAgICAgICBjb2ZyYWRlLiRzYXZlKHt1cGRhdGVOdW1lcm9Db2ZyYWRlOiB0cnVlfSkudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgaWYoJHN0YXRlLmN1cnJlbnQubmFtZSA9PT0gJ2NvZnJhZGVzJyl7XHJcbiAgICAgICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oJHN0YXRlLmN1cnJlbnQsIG51bGwsIHtcclxuICAgICAgICAgICAgICByZWxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgaW5oZXJpdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlcycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgncmVzdG9yZUNvZnJhZGUnLCByZXN0b3JlQ29mcmFkZSk7XHJcblxyXG5cclxuICBmdW5jdGlvbiByZXN0b3JlQ29mcmFkZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9yZXN0b3JlL3Jlc3RvcmVDb2ZyYWRlLmRpcmVjdGl2ZS5odG1sJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBjb2ZyYWRlSWQ6ICc9Y29mcmFkZScgICAgICAgIFxyXG4gICAgICB9LFxyXG4gICAgICBjb250cm9sbGVyOiAnUmVzdG9yZUNvZnJhZGUnLFxyXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0xpc3RhQ29mcmFkZXMnLCBMaXN0YUNvZnJhZGVzKTtcclxuXHJcbiAgZnVuY3Rpb24gTGlzdGFDb2ZyYWRlcygkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgXHJcbiAgICB2bS5maWx0cm8gICAgPSAnbm9tYnJlJztcclxuICAgIHZtLnR5cGVJbnB1dCA9ICd0ZXh0JztcclxuICAgIHZtLmJ1c2NhciAgICA9IG51bGw7XHJcblxyXG4gICAgdm0uc2VhcmNoICAgICAgICAgPSBzZWFyY2g7XHJcbiAgICB2bS5yYWRpb0NoYW5nZSAgICA9IHJhZGlvQ2hhbmdlO1xyXG4gICAgdm0uZ29Ub0NvZnJhZGUgICAgPSBnb1RvQ29mcmFkZTtcclxuICAgIHZtLm1vZGlmeUNvZnJhZGUgID0gbW9kaWZ5Q29mcmFkZTtcclxuICAgIHZtLnJlbW92ZUNvZnJhZGUgID0gcmVtb3ZlQ29mcmFkZTtcclxuXHJcbiAgICB2YXIgaGFuZGxlciA9ICRyb290U2NvcGUuJG9uKCdzY3JvbGxEb3duJywgZ2V0TmV4dFBhZ2UpO1xyXG5cclxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgaGFuZGxlciA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKCF2bS5iYWphcylcclxuICAgICAgICBnZXROZXh0UGFnZUFsdGFzKCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBnZXROZXh0UGFnZUJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFBhZ2VBbHRhcygpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE5leHRQYWdlQmFqYXMoKSB7XHJcbiAgICAgIGlmICh2bS5uZXh0UGFnZUJhamFzKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZUJhamFzfTtcclxuXHJcbiAgICAgICAgaWYgKHZtLmJ1c2NhcilcclxuICAgICAgICAgIHBhcmFtZXRlcnNbdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuXHJcbiAgICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkocGFyYW1ldGVycywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXNCYWphcyA9IHZtLmNvZnJhZGVzQmFqYXMuY29uY2F0KGRhdGEucmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAgIGlmICghdm0uYmFqYXMpXHJcbiAgICAgICAgc2VhcmNoQWx0YXMoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlYXJjaEJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VhcmNoQWx0YXMoKSB7XHJcbiAgICAgIHZhciBmaWx0cm8gPSB7fTtcclxuICAgICAgZmlsdHJvW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcbiAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShmaWx0cm8sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2hCYWphcygpIHtcclxuICAgICAgdmFyIGZpbHRybyA9IHt9O1xyXG4gICAgICBmaWx0cm9bdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhZGlvQ2hhbmdlKCkge1xyXG4gICAgICB2bS5idXNjYXIgPSBudWxsO1xyXG4gICAgICB2bS50eXBlSW5wdXQgPSAodm0uZmlsdHJvID09PSAnbm9tYnJlJykgPyAndGV4dCc6ICdudW1iZXInO1xyXG4gICAgICB2bS5zZWFyY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnb1RvQ29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzRGV0YWxsZScsIHtjb2ZyYWRlSWQ6IGlkfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdlbGltaW5hciBjb2ZyYWRlJyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ2xpc3RhQ29mcmFkZXMnLCBsaXN0YUNvZnJhZGVzKTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIGxpc3RhQ29mcmFkZXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogJy4vdGVtcGxhdGVzL2RpcmVjdGl2ZXMvY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5kaXJlY3RpdmUuaHRtbCcsXHJcbiAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgY29mcmFkZXM6ICc9Y29mcmFkZXMnLFxyXG4gICAgICAgIG5leHRQYWdlOiAnPXBhZ2UnLFxyXG4gICAgICAgIGNvZnJhZGVzQmFqYXM6ICc9Y29mcmFkZXNCYWphcycsXHJcbiAgICAgICAgbmV4dFBhZ2VCYWphczogJz1wYWdlQmFqYXMnXHJcbiAgICAgICAgXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdMaXN0YUNvZnJhZGVzJyxcclxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
