!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,r){r.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:r}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:o,getMapsPrepService:n}}).state("cofradesModificar",{url:"/cofrades/cambios/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/modify/cofradeModificar.html")}],controller:"CofradeModificar",controllerAs:"vm",resolve:{getCofradePrepService:o}}).state("cofradesNuevo",{url:"/cofrades/nuevo/",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCallesPrepService:t}})}function r(e){return e.cofradesRest().query()}function o(e,r){return e.cofradesRest().get({id:r.cofradeId})}function t(e){return e.getCalles().then(function(e){return e.data})}function n(e,r,o){return r.$promise.then(function(r){var t=r.datosPersonales.direccion.calle+" "+r.datosPersonales.direccion.numero+" "+r.datosPersonales.direccion.municipio+" "+r.datosPersonales.direccion.provincia+" "+r.datosPersonales.direccion.cp;return o.geoCodingAPI(t).then(function(r){if(r.data.results.length){var o=r.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:o.lat,longitude:o.lng},marker:{latitude:o.lat,longitude:o.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],r.$inject=["cofradesService"],o.$inject=["cofradesService","$stateParams"],t.$inject=["cofradesService"],n.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,r){function o(r){e(r).toggle()}function t(e,t){o(t),r.go(e)}var n=this;n.toggleSidenav=o,n.navigateTo=t}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e){function r(){c.calles=e}function o(){window.history.back()}function t(e){var r=e?c.calles.filter(n(e)):c.calles;return r}function n(e){var r=angular.lowercase(e);return function(e){return 0===angular.lowercase(e.calle).indexOf(r)}}function a(e){e?(c.cofrade.datosPersonales.direccion.calle=e.calle,c.cofrade.datosPersonales.direccion.municipio=e.municipio,c.cofrade.datosPersonales.direccion.cp=e.cp,c.cofrade.datosPersonales.direccion.provincia=e.provincia):(c.cofrade.datosPersonales.direccion.calle=null,c.cofrade.datosPersonales.direccion.municipio=null,c.cofrade.datosPersonales.direccion.cp=null,c.cofrade.datosPersonales.direccion.provincia=null)}var c=this;c.cofrade={datosFinancieros:{deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:!1}},c.backState=o,c.querySearch=t,c.selectedItemChange=a,r()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["getCallesPrepService"]}(),function(){"use strict";function e(e,r,o,t){function n(){return o.$promise.then(function(e){c.cofrade=r("dateToString")(e),c.iban=r("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=r("parseCC")(c.cofrade.datosFinancieros.cuenta.cc),c.maps=t})}function a(r,o){e.go("cofradesModificar",{cofradeId:r})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=a,n()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e){function r(){return e.$promise.then(function(e){o.nextPage=e.next,o.cofrades=e.results})}var o=this;o.cofrades=null,o.nextPage=null,r()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService"]}(),function(){"use strict";function e(e){function r(){return e.$promise.then(function(e){t.cofrade=e,t.cofrade.datosFinancieros||(t.cofrade.datosFinancieros={deuda:[]})})}function o(){window.history.back()}var t=this;t.cofrade=null,t.cofrade={datosFinancieros:{deuda:[]}},t.backState=o,r()}angular.module("app").controller("CofradeModificar",e),e.$inject=["getCofradePrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,r,o){var t=r[0];r.bind("scroll",function(){t.scrollTop+t.offsetHeight>=t.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var r="",o=0;o<e.length;o++)o>0&&o%4===0&&(r+=" "),r+=e[o];return r}}function r(){return function(e){e=e||"";var r="";return r=e.substr(0,4)+"-",r+=e.substr(4,4)+"-",r+=e.substr(8,2)+"-",r+=e.substr(10,10)}}angular.module("app").filter("parseIban",e).filter("parseCC",r)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function r(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",r)}(),function(){"use strict";function e(){return function(r){var o=r instanceof Array;for(var t in r)null===r[t]?o?r.splice(t,1):delete r[t]:"object"==typeof r[t]&&e(r[t]);return r}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,r,o){function t(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1,cache:!0},get:{method:"GET",transformResponse:function(e,r){return o("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,r){return angular.toJson(o("removeNulls")(e))}}})}function n(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function a(){return r.get("http://127.0.0.1:5050/api/calles/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:t,cofradesBajasRest:n,getCalles:a}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function r(r){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:r,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:r}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,r,o){function t(){if(s.nextPage){var e={page:s.nextPage};s.buscar&&(e[s.filtro]=s.buscar),o.cofradesRest().query(e,function(e){s.nextPage=e.next,s.cofrades=s.cofrades.concat(e.results)})}}function n(){var e={};e[s.filtro]=s.buscar,o.cofradesRest().query(e,function(e){s.nextPage=e.next,s.cofrades=e.results})}function a(){s.buscar=null,s.typeInput="nombre"===s.filtro?"text":"number"}function c(e,o){r.go("cofradesDetalle",{cofradeId:e})}function i(e,o){r.go("cofradesModificar",{cofradeId:e})}var s=this;s.filtro="nombre",s.typeInput="text",s.buscar=null,s.busqueda=n,s.radioChange=a,s.goToCofrade=c,s.modifyCofrade=i,e.$on("scrollDown",t)}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiY29mcmFkZXMvY29mcmFkZXMucm91dGVzLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL2xpc3QvY29mcmFkZXMuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL21vZGlmeS9jb2ZyYWRlTW9kaWZpY2FyLmNvbnRyb2xsZXIuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvc2Nyb2xseS5kaXJlY3RpdmUuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VDdWVudGEuZmlsdGVyLmpzIiwiY29tbW9ucy9maWx0ZXJzL3BhcnNlRGF0ZS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcmVtb3ZlTnVsbHMuZmlsdGVyLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9jb2ZyYWRlcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9tYXBhcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiZGF0ZVBpY2tlckNvbmZpZyIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsIm1vbnRocyIsInNob3J0TW9udGhzIiwiZGF5cyIsInNob3J0RGF5cyIsImZpcnN0RGF5T2ZXZWVrIiwicGFyc2VEYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInRoZW1lQW5ndWxhck1hdGVyaWFsIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidGVtcGxhdGVQcm92aWRlciIsIiR0ZW1wbGF0ZUNhY2hlIiwiZ2V0IiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc29sdmUiLCJjb2ZyYWRlc1ByZXBTZXJ2aWNlIiwiZ2V0Q29mcmFkZVByZXBTZXJ2aWNlIiwiZ2V0TWFwc1ByZXBTZXJ2aWNlIiwiZ2V0Q2FsbGVzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc1NlcnZpY2UiLCJjb2ZyYWRlc1Jlc3QiLCJxdWVyeSIsIiRzdGF0ZVBhcmFtcyIsImlkIiwiY29mcmFkZUlkIiwiZ2V0Q2FsbGVzIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInVpR21hcEdvb2dsZU1hcEFwaSIsIm1hcGFzU2VydmljZSIsIiRwcm9taXNlIiwiYWRkcmVzcyIsImRhdG9zUGVyc29uYWxlcyIsImRpcmVjY2lvbiIsImNhbGxlIiwibnVtZXJvIiwibXVuaWNpcGlvIiwicHJvdmluY2lhIiwiY3AiLCJnZW9Db2RpbmdBUEkiLCJyZXN1bHRzIiwibGVuZ3RoIiwiY29vcmRpbmF0ZXMiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibWFwcyIsImNvb3JkIiwibGF0aXR1ZGUiLCJsYXQiLCJsb25naXR1ZGUiLCJsbmciLCJtYXJrZXIiLCJ6b29tIiwiQXBwQ3RybCIsIiRtZFNpZGVuYXYiLCIkc3RhdGUiLCJ0b2dnbGVTaWRlbmF2IiwibWVudUlkIiwidG9nZ2xlIiwibmF2aWdhdGVUbyIsInRvIiwiZ28iLCJ2bSIsInRoaXMiLCJDb2ZyYWRlTnVldm8iLCJhY3RpdmF0ZSIsImNhbGxlcyIsImJhY2tTdGF0ZSIsIndpbmRvdyIsImhpc3RvcnkiLCJiYWNrIiwicXVlcnlTZWFyY2giLCJmaWx0ZXIiLCJjcmVhdGVGaWx0ZXJGb3IiLCJsb3dlcmNhc2VRdWVyeSIsImxvd2VyY2FzZSIsIml0ZW0iLCJpbmRleE9mIiwic2VsZWN0ZWRJdGVtQ2hhbmdlIiwiY29mcmFkZSIsImRhdG9zRmluYW5jaWVyb3MiLCJkZXVkYSIsInNleG8iLCJmZWNoYUluc2NyaXBjaW9uIiwiZmVjaGFOYWNpbWllbnRvIiwiQ29mcmFkZURldGFsbGUiLCIkZmlsdGVyIiwiaWJhbiIsImN1ZW50YSIsImNjIiwibW9kaWZ5Q29mcmFkZSIsImV2ZW50IiwiQ29mcmFkZXMiLCJuZXh0UGFnZSIsIm5leHQiLCJjb2ZyYWRlcyIsIkNvZnJhZGVNb2RpZmljYXIiLCJzY3JvbGx5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHJvb3RTY29wZSIsImVsZW1lbnQiLCJhdHRycyIsInJhdyIsImJpbmQiLCJzY3JvbGxUb3AiLCJvZmZzZXRIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCIkZW1pdCIsImRpcmVjdGl2ZSIsInBhcnNlSWJhbiIsImZvcm1hdHRlZEliYW4iLCJpIiwicGFyc2VDQyIsImZvcm1hdHRlZENDIiwic3Vic3RyIiwic3RyaW5nVG9EYXRlIiwiZGF0ZVRvU3RyaW5nIiwicmVtb3ZlTnVsbHMiLCJvYmoiLCJpc0FycmF5IiwiQXJyYXkiLCJrIiwic3BsaWNlIiwiJHJlc291cmNlIiwiJGh0dHAiLCJtZXRob2QiLCJjYWNoZSIsInRyYW5zZm9ybVJlc3BvbnNlIiwiaGVhZGVyc0dldHRlciIsImZyb21Kc29uIiwic2F2ZSIsInRyYW5zZm9ybVJlcXVlc3QiLCJ0b0pzb24iLCJjb2ZyYWRlc0JhamFzUmVzdCIsImZhY3RvcnkiLCJwYXJhbXMiLCJrZXkiLCJMaXN0YUNvZnJhZGVzIiwiZ2V0TmV4dFBhZ2UiLCJwYXJhbWV0ZXJzIiwicGFnZSIsImJ1c2NhciIsImZpbHRybyIsImNvbmNhdCIsImJ1c3F1ZWRhIiwicmFkaW9DaGFuZ2UiLCJ0eXBlSW5wdXQiLCJnb1RvQ29mcmFkZSIsIiRvbiIsImxpc3RhQ29mcmFkZXMiLCJ0ZW1wbGF0ZVVybCIsInNjb3BlIiwiYmluZFRvQ29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLE9BQ0EsWUFDQSxhQUNBLGFBQ0Esb0JBQ0Esa0JDUkEsV0FDQSxZQU1BLFNBQUFDLEdBQUFDLEdBQ0FBLEVBQUFDLFdBQ0FDLFVBQUEsbUNBTkFMLFFBQ0FDLE9BQUEsT0FDQUssT0FBQUosR0NtQkVBLEVBQWFLLFNBQVcsaUNDeEIxQixXQUNBLFlBTUEsU0FBQUMsR0FBQUMsR0FFQUEsRUFBQUMsUUFBQSxRQUFBLFVBQUEsUUFBQSxRQUFBLE9BQUEsUUFBQSxRQUFBLFNBQUEsYUFBQSxVQUFBLFlBQUEsYUFDQUQsRUFBQUUsYUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsT0FDQUYsRUFBQUcsTUFBQSxRQUFBLFNBQUEsWUFBQSxTQUFBLFVBQUEsU0FBQSxXQUNBSCxFQUFBSSxXQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUFBLE9BRUFKLEVBQUFLLGVBQUEsRUFFQUwsRUFBQU0sVUFBQSxTQUFBQyxHQUNBLE1BQUEsSUFBQUMsTUFBQUQsSUFHQVAsRUFBQVMsV0FBQSxTQUFBQyxHQUNBLE1BQUEsSUFBQUYsTUFBQUUsR0FBQUMsc0JBbEJBcEIsUUFDQUMsT0FBQSxPQUNBSyxPQUFBRSxHRCtDRUEsRUFBaUJELFNBQVcsNEJFcEQ5QixXQUNBLFlBTUEsU0FBQUQsR0FBQWUsRUFBQUMsR0FFQUEsRUFBQUMsVUFBQSxLQUVBRixFQUNBRyxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsU0FBQSxzU0FYQTFCLFFBQ0FDLE9BQUEsT0FDQUssT0FBQUEsR0Z3RUVBLEVBQU9DLFNBQVcsaUJBQWtCLHlCRzdFdEMsV0FDQSxZQU1BLFNBQUFvQixHQUFBQyxJQUpBNUIsUUFDQUMsT0FBQSxPQUNBSyxPQUFB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QUFWLEdBaEJBaEssUUFDQUMsT0FBQSxPQUNBK0IsV0FBQSxnQkFBQStILEdoQjhrQkVBLEVBQWN4SixTQUFXLGFBQWMsU0FBVSxzQmlCbmxCbkQsV0FDQSxZQU9BLFNBQUFvSyxLQUNBLE9BQ0FwRCxTQUFBLElBQ0FxRCxZQUFBLDBEQUNBQyxPQUNBekQsU0FBQSxZQUNBRixTQUFBLFNBRUFsRixXQUFBLGdCQUNBQyxhQUFBLEtBQ0E2SSxrQkFBQSxHQWZBOUssUUFDQUMsT0FBQSxPQUNBaUksVUFBQSxnQkFBQXlDIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAnbmdNYXRlcmlhbCcsXHJcbiAgICAndWlHbWFwZ29vZ2xlLW1hcHMnLFxyXG4gICAgJ25nTWVzc2FnZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGdvb2dsZU1hcEFQSSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdvb2dsZU1hcEFQSSh1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcil7XHJcbiAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgIGxpYnJhcmllczogJ3dlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvbidcclxuICAgIH0pOyAgICBcclxuICB9XHJcblxyXG59KSgpOyIsbnVsbCwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZGF0ZVBpY2tlckNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVQaWNrZXJDb25maWcoJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XHJcblxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLm1vbnRocyA9IFsnZW5lcm8nLCAnZmVicmVybycsICdtYXJ6bycsICdhYnJpbCcsICdtYXlvJywgJ2p1bmlvJywgJ2p1bGlvJywgJ2Fnb3N0bycsICdzZXB0aWVtYnJlJywgJ29jdHVicmUnLCAnbm92aWVtYnJlJywgJ2RpY2llbWJyZSddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0TW9udGhzID0gWydlbmUnLCAnZmViJywgJ21hcicsICdhYnInLCAnbWF5JywgJ2p1bicsICdqdWwnLCAnYWdvJywgJ3NlcCcsICdvY3QnLCAnbm92JywgJ2RpYyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmRheXMgPSBbJ2x1bmVzJywgJ21hcnRlcycsICdtacOpcmNvbGVzJywgJ2p1ZXZlcycsICd2aWVybmVzJywgJ3PDoWJhZG8nLCAnZG9taW5nbyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0RGF5cyA9IFsnbHVuJywgJ21hcicsICdtacOpJywgJ2p1ZScsICd2aWUnLCAnc8OhYicsICdkb20nXTtcclxuXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZmlyc3REYXlPZldlZWsgPSAxO1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIucGFyc2VEYXRlID0gZnVuY3Rpb24oZGF0ZVN0cmluZykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfTtcclxuXHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPHAgY2xhc3M9XCJsZWFkXCI+V2VsY29tZSB0byB0aGUgVUktUm91dGVyIERlbW88L3A+JyArXHJcbiAgICAgICAgICAnPHA+VXNlIHRoZSBtZW51IGFib3ZlIHRvIG5hdmlnYXRlLiAnICtcclxuICAgICAgICAgICdQYXkgYXR0ZW50aW9uIHRvIHRoZSA8Y29kZT4kc3RhdGU8L2NvZGU+IGFuZCA8Y29kZT4kc3RhdGVQYXJhbXM8L2NvZGU+IHZhbHVlcyBiZWxvdy48L3A+JyArXHJcbiAgICAgICAgICAnPHA+Q2xpY2sgdGhlc2UgbGlua3PigJQ8YSBocmVmPVwiIy9jP2lkPTFcIj5BbGljZTwvYT4gb3IgJyArXHJcbiAgICAgICAgICAnPGEgaHJlZj1cIiMvdXNlci80MlwiPkJvYjwvYT7igJR0byBzZWUgYSB1cmwgcmVkaXJlY3QgaW4gYWN0aW9uLjwvcD4nXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcodGhlbWVBbmd1bGFyTWF0ZXJpYWwpO1xyXG5cclxuICBmdW5jdGlvbiB0aGVtZUFuZ3VsYXJNYXRlcmlhbCgkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXMnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlc1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVzJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuc3RhdGUoJ2NvZnJhZGVzRGV0YWxsZScsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2RldGFpbC9jb2ZyYWRlRGV0YWxsZS5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVEZXRhbGxlJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBnZXRDb2ZyYWRlUHJlcFNlcnZpY2U6IGdldENvZnJhZGVQcmVwU2VydmljZSxcclxuICAgICAgICAgICAgZ2V0TWFwc1ByZXBTZXJ2aWNlOiBnZXRNYXBzUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pLlxyXG4gICAgICBzdGF0ZSgnY29mcmFkZXNNb2RpZmljYXInLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlcy9jYW1iaW9zLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL21vZGlmeS9jb2ZyYWRlTW9kaWZpY2FyLmh0bWwnKTsgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOiAnQ29mcmFkZU1vZGlmaWNhcicsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlOiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pLlxyXG4gICAgICBzdGF0ZSgnY29mcmFkZXNOdWV2bycsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzL251ZXZvL1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvYWRkL2NvZnJhZGVOdWV2by5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVOdWV2bycsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q2FsbGVzUHJlcFNlcnZpY2U6IGdldENhbGxlc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLnF1ZXJ5KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkuZ2V0KHtpZDogJHN0YXRlUGFyYW1zLmNvZnJhZGVJZH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2FsbGVzUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmdldENhbGxlcygpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe3JldHVybiByZXNwb25zZS5kYXRhO30pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBnZXRNYXBzUHJlcFNlcnZpY2UodWlHbWFwR29vZ2xlTWFwQXBpLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIG1hcGFzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBcclxuICAgICAgdmFyIGFkZHJlc3MgPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubnVtZXJvICAgICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhICsgJyAnICtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3A7XHJcblxyXG4gICAgICByZXR1cm4gbWFwYXNTZXJ2aWNlLmdlb0NvZGluZ0FQSShhZGRyZXNzKS5cclxuICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdWlHbWFwR29vZ2xlTWFwQXBpLnRoZW4oZnVuY3Rpb24obWFwcykge1xyXG4gICAgICAgICAgICAgIHJldHVybiAge2Nvb3JkOiAgeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogeyBsYXRpdHVkZTogY29vcmRpbmF0ZXMubGF0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGNvb3JkaW5hdGVzLmxuZyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbTogMTcgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBDdHJsJywgQXBwQ3RybCk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBBcHBDdHJsKCRtZFNpZGVuYXYsICRzdGF0ZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSB0b2dnbGVTaWRlbmF2O1xyXG4gICAgdm0ubmF2aWdhdGVUbyAgICA9IG5hdmlnYXRlVG87XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYobWVudUlkKSB7XHJcbiAgICAgICRtZFNpZGVuYXYobWVudUlkKS50b2dnbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvKHRvLCBtZW51SWQpe1xyXG4gICAgICB0b2dnbGVTaWRlbmF2KG1lbnVJZCk7XHJcbiAgICAgICRzdGF0ZS5nbyh0byk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZU51ZXZvJywgQ29mcmFkZU51ZXZvKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZU51ZXZvKGdldENhbGxlc1ByZXBTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLmNvZnJhZGUgPSB7ZGF0b3NGaW5hbmNpZXJvczoge2RldWRhOiBbXX0sXHJcbiAgICAgICAgICAgICAgICAgIGRhdG9zUGVyc29uYWxlczogIHtkaXJlY2Npb246IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V4bzogXCJIb21icmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhSW5zY3JpcGNpb246IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWNoYU5hY2ltaWVudG86IGZhbHNlfVxyXG4gICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgdm0uYmFja1N0YXRlID0gYmFja1N0YXRlO1xyXG4gICAgdm0ucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcclxuICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcclxuXHJcbiAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICB2bS5jYWxsZXMgPSBnZXRDYWxsZXNQcmVwU2VydmljZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYWNrU3RhdGUoKXtcclxuICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoKHF1ZXJ5KXtcclxuICAgICAgdmFyIHJlc3VsdHMgPSBxdWVyeSA/IHZtLmNhbGxlcy5maWx0ZXIoIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkgKSA6IHZtLmNhbGxlcztcclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XHJcbiAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IGFuZ3VsYXIubG93ZXJjYXNlKHF1ZXJ5KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gKGFuZ3VsYXIubG93ZXJjYXNlKGl0ZW0uY2FsbGUpLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSl7XHJcbiAgICAgIGlmIChpdGVtKXtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSBpdGVtLmNhbGxlO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gPSBpdGVtLm11bmljaXBpbztcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AgPSBpdGVtLmNwO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgPSBpdGVtLnByb3ZpbmNpYTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AgPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZURldGFsbGUnLCBDb2ZyYWRlRGV0YWxsZSk7XHJcblxyXG4gIGZ1bmN0aW9uIENvZnJhZGVEZXRhbGxlKCRzdGF0ZSwgJGZpbHRlciwgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLCBnZXRNYXBzUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgdm0uY29mcmFkZSA9IG51bGw7XHJcbiAgICB2bS5tYXBzID0gbnVsbDtcclxuICAgIFxyXG4gICAgdm0ubW9kaWZ5Q29mcmFkZSA9IG1vZGlmeUNvZnJhZGU7XHJcbiAgICBcclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIHJldHVybiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5jb2ZyYWRlID0gJGZpbHRlcignZGF0ZVRvU3RyaW5nJykoZGF0YSk7XHJcbiAgICAgICAgdm0uaWJhbiA9ICRmaWx0ZXIoJ3BhcnNlSWJhbicpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbik7XHJcbiAgICAgICAgdm0uY2MgPSAkZmlsdGVyKCdwYXJzZUNDJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYyk7XHJcbiAgICAgICAgdm0ubWFwcyA9IGdldE1hcHNQcmVwU2VydmljZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzTW9kaWZpY2FyJywge2NvZnJhZGVJZDogaWR9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlcycsIENvZnJhZGVzKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZXMoY29mcmFkZXNQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0uY29mcmFkZXMgPSBudWxsO1xyXG4gICAgdm0ubmV4dFBhZ2UgPSBudWxsO1xyXG5cclxuICAgIGFjdGl2YXRlKCk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICByZXR1cm4gY29mcmFkZXNQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZU1vZGlmaWNhcicsIENvZnJhZGVNb2RpZmljYXIpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlTW9kaWZpY2FyKGdldENvZnJhZGVQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5jb2ZyYWRlID0gbnVsbDtcclxuICAgIHZtLmNvZnJhZGUgPSB7ZGF0b3NGaW5hbmNpZXJvczoge2RldWRhOiBbXX19O1xyXG5cclxuICAgIHZtLmJhY2tTdGF0ZSA9IGJhY2tTdGF0ZTtcclxuICAgIFxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLmNvZnJhZGUgPSBkYXRhO1xyXG4gICAgICAgIGlmICghdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zKVxyXG4gICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0ge2RldWRhOiBbXX07XHJcblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYWNrU3RhdGUoKXtcclxuICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ3Njcm9sbHknLCBzY3JvbGx5KTtcclxuXHJcbiAgZnVuY3Rpb24gc2Nyb2xseSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgIHZhciByYXcgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgIGVsZW1lbnQuYmluZCgnc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHJhdy5zY3JvbGxUb3AgKyByYXcub2Zmc2V0SGVpZ2h0ID49IHJhdy5zY3JvbGxIZWlnaHQtNSkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwic2Nyb2xsRG93blwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigncGFyc2VJYmFuJywgcGFyc2VJYmFuKVxyXG4gICAgLmZpbHRlcigncGFyc2VDQycsIHBhcnNlQ0MpO1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZUliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHZhciBmb3JtYXR0ZWRJYmFuID0gJyc7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGliYW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA+IDAgJiYgaSAlIDQgPT09IDApIHtcclxuICAgICAgICAgIGZvcm1hdHRlZEliYW4gKz0gJyAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXR0ZWRJYmFuICs9IGliYW5baV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZEliYW47XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2MpIHtcclxuICAgICAgY2MgPSBjYyB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZENDID0gJyc7XHJcblxyXG4gICAgICBmb3JtYXR0ZWRDQyA9IGNjLnN1YnN0cigwLCA0KSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDQsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoOCwgMikgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cigxMCwgMTApO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZENDO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmlsdGVyKCdzdHJpbmdUb0RhdGUnLCBzdHJpbmdUb0RhdGUpXHJcbiAgICAuZmlsdGVyKCdkYXRlVG9TdHJpbmcnLCBkYXRlVG9TdHJpbmcpO1xyXG5cclxuICBmdW5jdGlvbiBzdHJpbmdUb0RhdGUoKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFOYWNpbWllbnRvID0gbmV3IERhdGUoZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFOYWNpbWllbnRvKTtcclxuICAgICAgZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbiA9IG5ldyBEYXRlKGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24pO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkYXRlVG9TdHJpbmcoKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFOYWNpbWllbnRvID0gZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFOYWNpbWllbnRvLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uID0gZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbi50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmlsdGVyKCdyZW1vdmVOdWxscycsIHJlbW92ZU51bGxzKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlTnVsbHMoKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihvYmope1xyXG4gICAgICB2YXIgaXNBcnJheSA9IG9iaiBpbnN0YW5jZW9mIEFycmF5O1xyXG4gICAgICBmb3IgKHZhciBrIGluIG9iail7XHJcbiAgICAgICAgaWYgKG9ialtrXT09PW51bGwpIGlzQXJyYXkgPyBvYmouc3BsaWNlKGssMSkgOiBkZWxldGUgb2JqW2tdO1xyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmpba109PVwib2JqZWN0XCIpIHJlbW92ZU51bGxzKG9ialtrXSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdjb2ZyYWRlc1NlcnZpY2UnLCBjb2ZyYWRlc1NlcnZpY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjb2ZyYWRlc1NlcnZpY2UoJHJlc291cmNlLCAkaHR0cCwgJGZpbHRlcikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29mcmFkZXNSZXN0OiBjb2ZyYWRlc1Jlc3QsXHJcbiAgICAgIGNvZnJhZGVzQmFqYXNSZXN0OiBjb2ZyYWRlc0JhamFzUmVzdCxcclxuICAgICAgZ2V0Q2FsbGVzOiBnZXRDYWxsZXNcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzLzppZC5qc29uOmpzb24nLCBudWxsLCB7XHJcbiAgICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IGZhbHNlLCBjYWNoZTogdHJ1ZX0sXHJcbiAgICAgICAgJ2dldCc6ICAgIHttZXRob2Q6J0dFVCcsIHRyYW5zZm9ybVJlc3BvbnNlOiBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkZmlsdGVyKCdzdHJpbmdUb0RhdGUnKShhbmd1bGFyLmZyb21Kc29uKGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAnc2F2ZSc6ICAge21ldGhvZDonUE9TVCcsIHRyYW5zZm9ybVJlcXVlc3Q6IGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIudG9Kc29uKCRmaWx0ZXIoJ3JlbW92ZU51bGxzJykoZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb2ZyYWRlc0JhamFzUmVzdCgpIHtcclxuICAgICAgcmV0dXJuICRyZXNvdXJjZSgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9jb2ZyYWRlc0JhamFzLzppZC5qc29uOmpzb24nLCBudWxsLCB7J3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6ZmFsc2V9fSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q2FsbGVzKCkge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NhbGxlcy8nKS5cclxuICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmZyb21Kc29uKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdtYXBhc1NlcnZpY2UnLCBtYXBhc1NlcnZpY2UpO1xyXG5cclxuICBmdW5jdGlvbiBtYXBhc1NlcnZpY2UoJGh0dHApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGdlb0NvZGluZ0FQSTogZ2VvQ29kaW5nQVBJXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdlb0NvZGluZ0FQSShhZGRyZXNzKSB7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24nLCB7cGFyYW1zOiB7YWRkcmVzczogYWRkcmVzcywga2V5OiBcIkFJemFTeURDX09JRFNsNmN1cmpDTUNMeXpuMnloTW1nLWVyNWtuSVwifX0pLlxyXG4gICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfSAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignTGlzdGFDb2ZyYWRlcycsIExpc3RhQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBMaXN0YUNvZnJhZGVzKCRyb290U2NvcGUsICRzdGF0ZSwgY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgXHJcbiAgICB2bS5maWx0cm8gICAgPSAnbm9tYnJlJztcclxuICAgIHZtLnR5cGVJbnB1dCA9ICd0ZXh0JztcclxuICAgIHZtLmJ1c2NhciAgICA9IG51bGw7XHJcblxyXG4gICAgdm0uYnVzcXVlZGEgICAgICA9IGJ1c3F1ZWRhO1xyXG4gICAgdm0ucmFkaW9DaGFuZ2UgICA9IHJhZGlvQ2hhbmdlO1xyXG4gICAgdm0uZ29Ub0NvZnJhZGUgICA9IGdvVG9Db2ZyYWRlO1xyXG4gICAgdm0ubW9kaWZ5Q29mcmFkZSA9IG1vZGlmeUNvZnJhZGU7XHJcblxyXG4gICAgJHJvb3RTY29wZS4kb24oJ3Njcm9sbERvd24nLCBnZXROZXh0UGFnZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFBhZ2UoKSB7XHJcbiAgICAgIGlmICh2bS5uZXh0UGFnZSl7XHJcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB7cGFnZTogdm0ubmV4dFBhZ2V9O1xyXG5cclxuICAgICAgICBpZiAodm0uYnVzY2FyKVxyXG4gICAgICAgICAgcGFyYW1ldGVyc1t2bS5maWx0cm9dID0gdm0uYnVzY2FyO1xyXG5cclxuICAgICAgICBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkucXVlcnkocGFyYW1ldGVycywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2bS5uZXh0UGFnZSA9IGRhdGEubmV4dDtcclxuICAgICAgICAgIHZtLmNvZnJhZGVzID0gdm0uY29mcmFkZXMuY29uY2F0KGRhdGEucmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBidXNxdWVkYSgpIHtcclxuICAgICAgdmFyIGZpbHRybyA9IHt9O1xyXG4gICAgICBmaWx0cm9bdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLnF1ZXJ5KGZpbHRybywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0ubmV4dFBhZ2UgPSBkYXRhLm5leHQ7XHJcbiAgICAgICAgdm0uY29mcmFkZXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhZGlvQ2hhbmdlKCkge1xyXG4gICAgICB2bS5idXNjYXIgPSBudWxsO1xyXG4gICAgICB2bS50eXBlSW5wdXQgPSAodm0uZmlsdHJvID09PSAnbm9tYnJlJykgPyAndGV4dCc6ICdudW1iZXInO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdvVG9Db2ZyYWRlKGlkLCBldmVudCl7XHJcbiAgICAgICRzdGF0ZS5nbygnY29mcmFkZXNEZXRhbGxlJywge2NvZnJhZGVJZDogaWR9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb2RpZnlDb2ZyYWRlKGlkLCBldmVudCl7XHJcbiAgICAgICRzdGF0ZS5nbygnY29mcmFkZXNNb2RpZmljYXInLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdsaXN0YUNvZnJhZGVzJywgbGlzdGFDb2ZyYWRlcyk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBsaXN0YUNvZnJhZGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5odG1sJyxcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBjb2ZyYWRlczogJz1jb2ZyYWRlcycsXHJcbiAgICAgICAgbmV4dFBhZ2U6ICc9cGFnZSdcclxuICAgICAgfSxcclxuICAgICAgY29udHJvbGxlcjogJ0xpc3RhQ29mcmFkZXMnLFxyXG4gICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
