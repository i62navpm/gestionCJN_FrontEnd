!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,o){o.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:o}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:r,getMapsPrepService:n}}).state("cofradesCambios",{url:"/cofrades/nuevos/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCofradePrepService:r,getCallesPrepService:t}})}function o(e){return e.cofradesRest().query()}function r(e,o){return o.cofradeId?e.cofradesRest().get({id:o.cofradeId}):!1}function t(e){return e.getCalles().then(function(e){return e.data})}function n(e,o,r){return o.$promise.then(function(o){var t=o.datosPersonales.direccion.calle+" "+o.datosPersonales.direccion.numero+" "+o.datosPersonales.direccion.municipio+" "+o.datosPersonales.direccion.provincia+" "+o.datosPersonales.direccion.cp;return r.geoCodingAPI(t).then(function(o){if(o.data.results.length){var r=o.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:r.lat,longitude:r.lng},marker:{latitude:r.lat,longitude:r.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],o.$inject=["cofradesService"],r.$inject=["cofradesService","$stateParams"],t.$inject=["cofradesService"],n.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,o){function r(o){e(o).toggle()}function t(e,t){r(t),o.go(e)}var n=this;n.toggleSidenav=r,n.navigateTo=t}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e,o,r,t,n,a,c,i){function s(){n?n.$promise.then(function(e){return $.cofrade=e,$.calleSelected={calle:$.cofrade.datosPersonales.direccion.calle,cp:$.cofrade.datosPersonales.direccion.cp,provincia:$.cofrade.datosPersonales.direccion.provincia,municipio:$.cofrade.datosPersonales.direccion.municipio},p($.cofrade.datosPersonales.direccion.calle),$.cofrade.datosFinancieros=$.cofrade.datosFinancieros||{cuenta:{},deuda:[]},$.cofrade.datosFinancieros.cuenta=$.cofrade.datosFinancieros.cuenta||{},$.cofrade.datosFinancieros.deuda=$.cofrade.datosFinancieros.deuda||[],!0}):c.getRegistros().then(function(e){$.cofrade.numeroOrden=e.data.numeroOrden,$.cofrade.numeroCofrade=e.data.numeroCofrade}),$.calles=a}function u(){window.history.back()}function l(e){var o=e?$.calles.filter(d(e)):$.calles;return o}function d(e){var o=angular.lowercase(e);return function(e){return 0===angular.lowercase(e.calle).indexOf(o)}}function f(e){e?($.cofrade.datosPersonales.direccion.calle=e.calle,$.cofrade.datosPersonales.direccion.municipio=e.municipio,$.cofrade.datosPersonales.direccion.cp=e.cp,$.cofrade.datosPersonales.direccion.provincia=e.provincia,p(e.calle)):($.cofrade.datosPersonales.direccion.calle=null,$.cofrade.datosPersonales.direccion.municipio=null,$.cofrade.datosPersonales.direccion.cp=null,$.cofrade.datosPersonales.direccion.provincia=null,$.sector=null,$.nuevaCalle=!0)}function p(e){i.sectoresRest().query({calle:e},function(e){$.sector=e[0].numeroSector,$.nuevaCalle=!1})}function g(){$.cofrade.datosFinancieros.cuenta.iban&&($.cofrade.datosFinancieros.cuenta.cc=e("calcularCC")($.cofrade.datosFinancieros.cuenta.iban))}function m(){$.cofrade.datosFinancieros.cuenta.cc&&($.cofrade.datosFinancieros.cuenta.iban=e("calcularIban")($.cofrade.datosFinancieros.cuenta.cc))}function v(e){function t(){i.sectoresRest().get({sector:$.sector},function(e){var t=e[0];t?(t.calles.push($.searchText),t.$save(),a.save($.cofrade,h,P)):r.show(r.simple().content("El sector "+$.sector+" no existe!!").position("top right").parent(o[0].querySelector("#toastBounds")).hideDelay(3e3))})}if(e){var n={cuenta:{},deuda:[]};$.cofrade.datosPersonales.direccion.calle=$.searchText,JSON.stringify($.cofrade.datosFinancieros)===JSON.stringify(n)&&delete $.cofrade.datosFinancieros;var a=c.cofradesRest();$.nuevaCalle?t():a.save($.cofrade,h,P)}else C()}function h(e){r.show(r.simple().content("Guardado con éxito!!").position("top right").hideDelay(3e3)),t.go("cofrades")}function P(e){r.show(r.simple().content("Error al guardar!!").position("top right").parent(o[0].querySelector("#toastBounds")).hideDelay(3e3))}function C(){r.show(r.simple().content("Existen errores en el formulario").action("OK").highlightAction(!1).parent(o[0].querySelector("#toastBounds")).position("top right"))}var $=this;$.nuevaCalle=!0,$.cofrade={datosFinancieros:{cuenta:{},deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:new Date}},$.backState=u,$.querySearch=l,$.selectedItemChange=f,$.calcularCC=g,$.calcularIban=m,$.guardar=v,s()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["$filter","$document","$mdToast","$state","getCofradePrepService","getCallesPrepService","cofradesService","sectoresService"]}(),function(){"use strict";function e(e,o,r,t){function n(){return r.$promise.then(function(e){c.cofrade=o("dateToString")(e),c.cofrade.datosFinancieros&&c.cofrade.datosFinancieros.cuenta&&(c.iban=o("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=o("parseCC")(c.cofrade.datosFinancieros.cuenta.cc)),c.maps=t})}function a(o,r){e.go("cofradesCambios",{cofradeId:o})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=a,n()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e){function o(){return e.$promise.then(function(e){r.nextPage=e.next,r.cofrades=e.results})}var r=this;r.cofrades=null,r.nextPage=null,o()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService"]}(),function(){"use strict";function e(e){function o(){return e.$promise.then(function(e){t.cofrade=e,t.cofrade.datosFinancieros||(t.cofrade.datosFinancieros={deuda:[]})})}function r(){window.history.back()}var t=this;t.cofrade=null,t.cofrade={datosFinancieros:{deuda:[]}},t.backState=r,o()}angular.module("app").controller("CofradeModificar",e),e.$inject=["getCofradePrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,o,r){var t=o[0];o.bind("scroll",function(){t.scrollTop+t.offsetHeight>=t.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var o="",r=0;r<e.length;r++)r>0&&r%4===0&&(o+=" "),o+=e[r];return o}}function o(){return function(e){e=e||"";var o="";return o=e.substr(0,4)+"-",o+=e.substr(4,4)+"-",o+=e.substr(8,2)+"-",o+=e.substr(10,10)}}function r(){return function(e){return e=e||"",e.substr(4,20)}}function t(){function e(e){for(var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=[],t=0;t<e.length;t++){var n=o.indexOf(e[t]);r.push(0>n?"-":n)}return r.join("")}function o(e,o){for(var r=10,t=e.length,n=0,a=0;t>a;a+=r){var c=n+""+e.substr(a,r);n=c%o}return n}function r(e,o){for(e+="";e.length<o;)e="0"+e;return e}return function(t){var n="ES",a=t+e(n)+"00",c=o(a,97);return n+r(98-c,2)+t}}angular.module("app").filter("parseIban",e).filter("parseCC",o).filter("calcularIban",t).filter("calcularCC",r)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function o(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",o)}(),function(){"use strict";function e(){return function(o){var r=o instanceof Array;for(var t in o)null===o[t]?r?o.splice(t,1):delete o[t]:"object"==typeof o[t]&&e(o[t]);return o}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,o,r){function t(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1},get:{method:"GET",transformResponse:function(e,o){return r("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,o){return angular.toJson(r("removeNulls")(e))}}})}function n(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function a(){return o.get("http://127.0.0.1:5050/api/calles/").then(function(e){return angular.fromJson(e)})}function c(){return o.get("http://127.0.0.1:5050/api/registros/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:t,cofradesBajasRest:n,getCalles:a,getRegistros:c}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function o(o){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:o,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:o}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function o(){return e("http://127.0.0.1:5050/api/sectores/:id.json:json",null,{get:{method:"GET",isArray:!0}})}return{sectoresRest:o}}angular.module("app").factory("sectoresService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,o,r,t){function n(){if(u.nextPage){var e={page:u.nextPage};u.buscar&&(e[u.filtro]=u.buscar),t.cofradesRest().query(e,function(e){u.nextPage=e.next,u.cofrades=u.cofrades.concat(e.results)})}}function a(){var e={};e[u.filtro]=u.buscar,t.cofradesRest().query(e,function(e){u.nextPage=e.next,u.cofrades=e.results})}function c(){u.buscar=null,u.typeInput="nombre"===u.filtro?"text":"number"}function i(e,o){r.go("cofradesDetalle",{cofradeId:e})}function s(e,o){o.stopPropagation(),r.go("cofradesCambios",{cofradeId:e})}var u=this;u.filtro="nombre",u.typeInput="text",u.buscar=null,u.busqueda=a,u.radioChange=c,u.goToCofrade=i,u.modifyCofrade=s;var l=e.$on("scrollDown",n);o.$on("$destroy",function(){l(),l=null})}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$scope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiY29mcmFkZXMvY29mcmFkZXMucm91dGVzLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL2xpc3QvY29mcmFkZXMuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL21vZGlmeS9jb2ZyYWRlTW9kaWZpY2FyLmNvbnRyb2xsZXIuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvc2Nyb2xseS5kaXJlY3RpdmUuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VDdWVudGEuZmlsdGVyLmpzIiwiY29tbW9ucy9maWx0ZXJzL3BhcnNlRGF0ZS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcmVtb3ZlTnVsbHMuZmlsdGVyLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9jb2ZyYWRlcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9tYXBhcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9zZXJ2aWNlcy9zZWN0b3Jlcy5zZXJ2aWNlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmNvbnRyb2xsZXIuZGlyZWN0aXZlLmpzIiwiY29tbW9ucy9kaXJlY3RpdmVzL2NvZnJhZGVzL2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiZGF0ZVBpY2tlckNvbmZpZyIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsIm1vbnRocyIsInNob3J0TW9udGhzIiwiZGF5cyIsInNob3J0RGF5cyIsImZpcnN0RGF5T2ZXZWVrIiwicGFyc2VEYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInRoZW1lQW5ndWxhck1hdGVyaWFsIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidGVtcGxhdGVQcm92aWRlciIsIiR0ZW1wbGF0ZUNhY2hlIiwiZ2V0IiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc29sdmUiLCJjb2ZyYWRlc1ByZXBTZXJ2aWNlIiwiZ2V0Q29mcmFkZVByZXBTZXJ2aWNlIiwiZ2V0TWFwc1ByZXBTZXJ2aWNlIiwiZ2V0Q2FsbGVzUHJlcFNlcnZpY2UiLCJjb2ZyYWRlc1NlcnZpY2UiLCJjb2ZyYWRlc1Jlc3QiLCJxdWVyeSIsIiRzdGF0ZVBhcmFtcyIsImlkIiwiY29mcmFkZUlkIiwiZ2V0Q2FsbGVzIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInVpR21hcEdvb2dsZU1hcEFwaSIsIm1hcGFzU2VydmljZSIsIiRwcm9taXNlIiwiYWRkcmVzcyIsImRhdG9zUGVyc29uYWxlcyIsImRpcmVjY2lvbiIsImNhbGxlIiwibnVtZXJvIiwibXVuaWNpcGlvIiwicHJvdmluY2lhIiwiY3AiLCJnZW9Db2RpbmdBUEkiLCJyZXN1bHRzIiwibGVuZ3RoIiwiY29vcmRpbmF0ZXMiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibWFwcyIsImNvb3JkIiwibGF0aXR1ZGUiLCJsYXQiLCJsb25naXR1ZGUiLCJsbmciLCJtYXJrZXIiLCJ6b29tIiwiQXBwQ3RybCIsIiRtZFNpZGVuYXYiLCIkc3RhdGUiLCJ0b2dnbGVTaWRlbmF2IiwibWVudUlkIiwidG9nZ2xlIiwibmF2aWdhdGVUbyIsInRvIiwiZ28iLCJ2bSIsInRoaXMiLCJDb2ZyYWRlTnVldm8iLCIkZmlsdGVyIiwiJGRvY3VtZW50IiwiJG1kVG9hc3QiLCJzZWN0b3Jlc1NlcnZpY2UiLCJhY3RpdmF0ZSIsImNvZnJhZGUiLCJjYWxsZVNlbGVjdGVkIiwic2VhcmNoU2VjdG9yIiwiZGF0b3NGaW5hbmNpZXJvcyIsImN1ZW50YSIsImRldWRhIiwiZ2V0UmVnaXN0cm9zIiwibnVtZXJvT3JkZW4iLCJudW1lcm9Db2ZyYWRlIiwiY2FsbGVzIiwiYmFja1N0YXRlIiwid2luZG93IiwiaGlzdG9yeSIsImJhY2siLCJxdWVyeVNlYXJjaCIsImZpbHRlciIsImNyZWF0ZUZpbHRlckZvciIsImxvd2VyY2FzZVF1ZXJ5IiwibG93ZXJjYXNlIiwiaXRlbSIsImluZGV4T2YiLCJzZWxlY3RlZEl0ZW1DaGFuZ2UiLCJzZWN0b3IiLCJudWV2YUNhbGxlIiwic2VjdG9yZXNSZXN0IiwibnVtZXJvU2VjdG9yIiwiY2FsY3VsYXJDQyIsImliYW4iLCJjYyIsImNhbGN1bGFySWJhbiIsImd1YXJkYXIiLCJpc1ZhbGlkIiwiZ3VhcmRhckNhbGxlIiwic2VjdG9yUmVzb3VyY2UiLCJwdXNoIiwic2VhcmNoVGV4dCIsIiRzYXZlIiwiQ29mcmFkZVJlc291cmNlIiwic2F2ZSIsImd1YXJkYXJTdWNjZXNzIiwiZ3VhcmRhckVycm9yIiwic2hvdyIsInNpbXBsZSIsImNvbnRlbnQiLCJwb3NpdGlvbiIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoaWRlRGVsYXkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2hvd0FjdGlvblRvYXN0IiwiYWN0aW9uIiwiaGlnaGxpZ2h0QWN0aW9uIiwic2V4byIsImZlY2hhSW5zY3JpcGNpb24iLCJmZWNoYU5hY2ltaWVudG8iLCJDb2ZyYWRlRGV0YWxsZSIsIm1vZGlmeUNvZnJhZGUiLCJldmVudCIsIkNvZnJhZGVzIiwibmV4dFBhZ2UiLCJuZXh0IiwiY29mcmFkZXMiLCJDb2ZyYWRlTW9kaWZpY2FyIiwic2Nyb2xseSIsInJlc3RyaWN0IiwibGluayIsIiRyb290U2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJyYXciLCJiaW5kIiwic2Nyb2xsVG9wIiwib2Zmc2V0SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiJGVtaXQiLCJkaXJlY3RpdmUiLCJwYXJzZUliYW4iLCJmb3JtYXR0ZWRJYmFuIiwiaSIsInBhcnNlQ0MiLCJmb3JtYXR0ZWRDQyIsInN1YnN0ciIsInZhbG9yQ2lmcmFzIiwiY2lmcmFzIiwiTEVUUkFTIiwiaXRlbXMiLCJwb3NpY2lvbiIsImpvaW4iLCJtb2R1bG8iLCJkaXZpc29yIiwiQ1VFTlRBIiwibGFyZ28iLCJyZXN0byIsImRpdmlkZW5kbyIsImNlcm9zSXpxdWllcmRhIiwiY2NjIiwicGFpcyIsInN0cmluZ1RvRGF0ZSIsImRhdGVUb1N0cmluZyIsInJlbW92ZU51bGxzIiwib2JqIiwiaXNBcnJheSIsIkFycmF5IiwiayIsInNwbGljZSIsIiRyZXNvdXJjZSIsIiRodHRwIiwibWV0aG9kIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJoZWFkZXJzR2V0dGVyIiwiZnJvbUpzb24iLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwidG9Kc29uIiwiY29mcmFkZXNCYWphc1Jlc3QiLCJmYWN0b3J5IiwicGFyYW1zIiwia2V5IiwiTGlzdGFDb2ZyYWRlcyIsIiRzY29wZSIsImdldE5leHRQYWdlIiwicGFyYW1ldGVycyIsInBhZ2UiLCJidXNjYXIiLCJmaWx0cm8iLCJjb25jYXQiLCJidXNxdWVkYSIsInJhZGlvQ2hhbmdlIiwidHlwZUlucHV0IiwiZ29Ub0NvZnJhZGUiLCJzdG9wUHJvcGFnYXRpb24iLCJoYW5kbGVyIiwiJG9uIiwibGlzdGFDb2ZyYWRlcyIsInRlbXBsYXRlVXJsIiwic2NvcGUiLCJiaW5kVG9Db250cm9sbGVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQUFDLE9BQUEsT0FDQSxZQUNBLGFBQ0EsYUFDQSxvQkFDQSxrQkNSQSxXQUNBLFlBTUEsU0FBQUMsR0FBQUMsR0FDQUEsRUFBQUMsV0FDQUMsVUFBQSxtQ0FOQUwsUUFD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QWlFLGNBQUFBLENBRUEsSUFBQTBFLEdBQUFoRSxFQUFBaUUsSUFBQSxhQUFBWixFQUVBRCxHQUFBYSxJQUFBLFdBQUEsV0FDQUQsSUFDQUEsRUFBQSxPQXBCQTlOLFFBQ0FDLE9BQUEsT0FDQStCLFdBQUEsZ0JBQUFpTCxHakIrd0JFQSxFQUFjMU0sU0FBVyxhQUFjLFNBQVUsU0FBVSxzQmtCcHhCN0QsV0FDQSxZQU9BLFNBQUF5TixLQUNBLE9BQ0FwRSxTQUFBLElBQ0FxRSxZQUFBLDBEQUNBQyxPQUNBekUsU0FBQSxZQUNBRixTQUFBLFNBRUF2SCxXQUFBLGdCQUNBQyxhQUFBLEtBQ0FrTSxrQkFBQSxHQWZBbk8sUUFDQUMsT0FBQSxPQUNBc0ssVUFBQSxnQkFBQXlEIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAnbmdNYXRlcmlhbCcsXHJcbiAgICAndWlHbWFwZ29vZ2xlLW1hcHMnLFxyXG4gICAgJ25nTWVzc2FnZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGdvb2dsZU1hcEFQSSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdvb2dsZU1hcEFQSSh1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcil7XHJcbiAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgIGxpYnJhcmllczogJ3dlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvbidcclxuICAgIH0pOyAgICBcclxuICB9XHJcblxyXG59KSgpOyIsbnVsbCwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZGF0ZVBpY2tlckNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVQaWNrZXJDb25maWcoJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XHJcblxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLm1vbnRocyA9IFsnZW5lcm8nLCAnZmVicmVybycsICdtYXJ6bycsICdhYnJpbCcsICdtYXlvJywgJ2p1bmlvJywgJ2p1bGlvJywgJ2Fnb3N0bycsICdzZXB0aWVtYnJlJywgJ29jdHVicmUnLCAnbm92aWVtYnJlJywgJ2RpY2llbWJyZSddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0TW9udGhzID0gWydlbmUnLCAnZmViJywgJ21hcicsICdhYnInLCAnbWF5JywgJ2p1bicsICdqdWwnLCAnYWdvJywgJ3NlcCcsICdvY3QnLCAnbm92JywgJ2RpYyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmRheXMgPSBbJ2x1bmVzJywgJ21hcnRlcycsICdtacOpcmNvbGVzJywgJ2p1ZXZlcycsICd2aWVybmVzJywgJ3PDoWJhZG8nLCAnZG9taW5nbyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0RGF5cyA9IFsnbHVuJywgJ21hcicsICdtacOpJywgJ2p1ZScsICd2aWUnLCAnc8OhYicsICdkb20nXTtcclxuXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZmlyc3REYXlPZldlZWsgPSAxO1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIucGFyc2VEYXRlID0gZnVuY3Rpb24oZGF0ZVN0cmluZykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfTtcclxuXHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPHAgY2xhc3M9XCJsZWFkXCI+V2VsY29tZSB0byB0aGUgVUktUm91dGVyIERlbW88L3A+JyArXHJcbiAgICAgICAgICAnPHA+VXNlIHRoZSBtZW51IGFib3ZlIHRvIG5hdmlnYXRlLiAnICtcclxuICAgICAgICAgICdQYXkgYXR0ZW50aW9uIHRvIHRoZSA8Y29kZT4kc3RhdGU8L2NvZGU+IGFuZCA8Y29kZT4kc3RhdGVQYXJhbXM8L2NvZGU+IHZhbHVlcyBiZWxvdy48L3A+JyArXHJcbiAgICAgICAgICAnPHA+Q2xpY2sgdGhlc2UgbGlua3PigJQ8YSBocmVmPVwiIy9jP2lkPTFcIj5BbGljZTwvYT4gb3IgJyArXHJcbiAgICAgICAgICAnPGEgaHJlZj1cIiMvdXNlci80MlwiPkJvYjwvYT7igJR0byBzZWUgYSB1cmwgcmVkaXJlY3QgaW4gYWN0aW9uLjwvcD4nXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcodGhlbWVBbmd1bGFyTWF0ZXJpYWwpO1xyXG5cclxuICBmdW5jdGlvbiB0aGVtZUFuZ3VsYXJNYXRlcmlhbCgkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXMnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlc1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVzJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuc3RhdGUoJ2NvZnJhZGVzRGV0YWxsZScsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2RldGFpbC9jb2ZyYWRlRGV0YWxsZS5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVEZXRhbGxlJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBnZXRDb2ZyYWRlUHJlcFNlcnZpY2U6IGdldENvZnJhZGVQcmVwU2VydmljZSxcclxuICAgICAgICAgICAgZ2V0TWFwc1ByZXBTZXJ2aWNlOiBnZXRNYXBzUHJlcFNlcnZpY2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pLlxyXG4gICAgICBzdGF0ZSgnY29mcmFkZXNDYW1iaW9zJywge1xyXG4gICAgICAgIHVybDogXCIvY29mcmFkZXMvbnVldm9zLzpjb2ZyYWRlSWRcIixcclxuICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSl7ICBcclxuICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2NvZnJhZGVzL2FkZC9jb2ZyYWRlTnVldm8uaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlTnVldm8nLFxyXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZTogZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICBnZXRDYWxsZXNQcmVwU2VydmljZTogZ2V0Q2FsbGVzUHJlcFNlcnZpY2UsXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpLnF1ZXJ5KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgIHJldHVybiAoJHN0YXRlUGFyYW1zLmNvZnJhZGVJZCkgPyBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkuZ2V0KHtpZDogJHN0YXRlUGFyYW1zLmNvZnJhZGVJZH0pIDogZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDYWxsZXNQcmVwU2VydmljZShjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHJldHVybiBjb2ZyYWRlc1NlcnZpY2UuZ2V0Q2FsbGVzKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdldE1hcHNQcmVwU2VydmljZSh1aUdtYXBHb29nbGVNYXBBcGksIGdldENvZnJhZGVQcmVwU2VydmljZSwgbWFwYXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIFxyXG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSAgICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5udW1lcm8gICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcDtcclxuXHJcbiAgICAgIHJldHVybiBtYXBhc1NlcnZpY2UuZ2VvQ29kaW5nQVBJKGFkZHJlc3MpLlxyXG4gICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgICAgIHJldHVybiB1aUdtYXBHb29nbGVNYXBBcGkudGhlbihmdW5jdGlvbihtYXBzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICB7Y29vcmQ6ICB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyOiB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIEFwcEN0cmwoJG1kU2lkZW5hdiwgJHN0YXRlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0udG9nZ2xlU2lkZW5hdiA9IHRvZ2dsZVNpZGVuYXY7XHJcbiAgICB2bS5uYXZpZ2F0ZVRvICAgID0gbmF2aWdhdGVUbztcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZW5hdihtZW51SWQpIHtcclxuICAgICAgJG1kU2lkZW5hdihtZW51SWQpLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlVG8odG8sIG1lbnVJZCl7XHJcbiAgICAgIHRvZ2dsZVNpZGVuYXYobWVudUlkKTtcclxuICAgICAgJHN0YXRlLmdvKHRvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlTnVldm8nLCBDb2ZyYWRlTnVldm8pO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlTnVldm8oJGZpbHRlciwgJGRvY3VtZW50LCAkbWRUb2FzdCwgJHN0YXRlLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIGdldENhbGxlc1ByZXBTZXJ2aWNlLCBjb2ZyYWRlc1NlcnZpY2UsIHNlY3RvcmVzU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0ubnVldmFDYWxsZSA9IHRydWU7XHJcbiAgICB2bS5jb2ZyYWRlID0ge2RhdG9zRmluYW5jaWVyb3M6IHtjdWVudGE6IHt9LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldWRhOiBbXX0sXHJcbiAgICAgICAgICAgICAgICAgIGRhdG9zUGVyc29uYWxlczogIHtkaXJlY2Npb246IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V4bzogXCJIb21icmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhSW5zY3JpcGNpb246IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWNoYU5hY2ltaWVudG86IG5ldyBEYXRlKCl9XHJcbiAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICB2bS5iYWNrU3RhdGUgICAgICAgICAgPSBiYWNrU3RhdGU7XHJcbiAgICB2bS5xdWVyeVNlYXJjaCAgICAgICAgPSBxdWVyeVNlYXJjaDtcclxuICAgIHZtLnNlbGVjdGVkSXRlbUNoYW5nZSA9IHNlbGVjdGVkSXRlbUNoYW5nZTtcclxuICAgIHZtLmNhbGN1bGFyQ0MgICAgICAgICA9IGNhbGN1bGFyQ0M7XHJcbiAgICB2bS5jYWxjdWxhckliYW4gICAgICAgPSBjYWxjdWxhckliYW47XHJcbiAgICB2bS5ndWFyZGFyICAgICAgICAgICAgPSBndWFyZGFyO1xyXG5cclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIGlmIChnZXRDb2ZyYWRlUHJlcFNlcnZpY2Upe1xyXG4gICAgICAgIGdldENvZnJhZGVQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jYWxsZVNlbGVjdGVkID0ge2NhbGxlOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcDogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNwLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmluY2lhOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXVuaWNpcGlvOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFNlY3Rvcih2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zIHx8IHtjdWVudGE6IHt9LCBkZXVkYTogW119O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSA9IHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEgfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuZGV1ZGEgPSB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuZGV1ZGEgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5nZXRSZWdpc3Ryb3MoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNvZnJhZGUubnVtZXJvT3JkZW4gPSByZXNwb25zZS5kYXRhLm51bWVyb09yZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5udW1lcm9Db2ZyYWRlID0gcmVzcG9uc2UuZGF0YS5udW1lcm9Db2ZyYWRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgICB2bS5jYWxsZXMgPSBnZXRDYWxsZXNQcmVwU2VydmljZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFja1N0YXRlKCkge1xyXG4gICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcclxuICAgICAgdmFyIHJlc3VsdHMgPSBxdWVyeSA/IHZtLmNhbGxlcy5maWx0ZXIoIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkgKSA6IHZtLmNhbGxlcztcclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XHJcbiAgICAgIHZhciBsb3dlcmNhc2VRdWVyeSA9IGFuZ3VsYXIubG93ZXJjYXNlKHF1ZXJ5KTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gKGFuZ3VsYXIubG93ZXJjYXNlKGl0ZW0uY2FsbGUpLmluZGV4T2YobG93ZXJjYXNlUXVlcnkpID09PSAwKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1DaGFuZ2UoaXRlbSkge1xyXG4gICAgICBpZiAoaXRlbSl7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlID0gaXRlbS5jYWxsZTtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvID0gaXRlbS5tdW5pY2lwaW87XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNwID0gaXRlbS5jcDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhID0gaXRlbS5wcm92aW5jaWE7XHJcbiAgICAgICAgc2VhcmNoU2VjdG9yKGl0ZW0uY2FsbGUpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUgPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcCA9IG51bGw7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLnByb3ZpbmNpYSA9IG51bGw7XHJcbiAgICAgICAgdm0uc2VjdG9yID0gbnVsbDtcclxuICAgICAgICB2bS5udWV2YUNhbGxlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZWFyY2hTZWN0b3IoY2FsbGUpIHtcclxuICAgICAgc2VjdG9yZXNTZXJ2aWNlLnNlY3RvcmVzUmVzdCgpLnF1ZXJ5KHtjYWxsZTogY2FsbGV9LCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5zZWN0b3IgPSBkYXRhWzBdLm51bWVyb1NlY3RvcjtcclxuICAgICAgICB2bS5udWV2YUNhbGxlID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbGN1bGFyQ0MoKSB7XHJcbiAgICAgIGlmICh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4pXHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYyA9ICRmaWx0ZXIoJ2NhbGN1bGFyQ0MnKSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmliYW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbGN1bGFySWJhbigpIHtcclxuICAgICAgaWYgKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuY2MpXHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5pYmFuID0gJGZpbHRlcignY2FsY3VsYXJJYmFuJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ3VhcmRhcihpc1ZhbGlkKSB7XHJcbiAgICAgIGlmKGlzVmFsaWQpe1xyXG4gICAgICAgIHZhciBkYXRvc0ZpbmFuY2llcm9zID0ge2N1ZW50YToge30sIGRldWRhOiBbXX07XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlID0gdm0uc2VhcmNoVGV4dDtcclxuXHJcbiAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcykgPT09IEpTT04uc3RyaW5naWZ5KGRhdG9zRmluYW5jaWVyb3MpKVxyXG4gICAgICAgICAgZGVsZXRlIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcztcclxuICAgICAgICBcclxuICAgICAgICB2YXIgQ29mcmFkZVJlc291cmNlID0gY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzUmVzdCgpO1xyXG4gICAgICAgIGlmKHZtLm51ZXZhQ2FsbGUpXHJcbiAgICAgICAgICBndWFyZGFyQ2FsbGUoKTtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgQ29mcmFkZVJlc291cmNlLnNhdmUodm0uY29mcmFkZSwgZ3VhcmRhclN1Y2Nlc3MsIGd1YXJkYXJFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBzaG93QWN0aW9uVG9hc3QoKTtcclxuICAgICAgXHJcbiAgICAgIGZ1bmN0aW9uIGd1YXJkYXJDYWxsZSgpIHtcclxuICAgICAgICBzZWN0b3Jlc1NlcnZpY2Uuc2VjdG9yZXNSZXN0KCkuZ2V0KHtzZWN0b3I6IHZtLnNlY3Rvcn0sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgdmFyIHNlY3RvclJlc291cmNlID0gIGRhdGFbMF07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmKHNlY3RvclJlc291cmNlKXtcclxuICAgICAgICAgICAgc2VjdG9yUmVzb3VyY2UuY2FsbGVzLnB1c2godm0uc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgICAgIHNlY3RvclJlc291cmNlLiRzYXZlKCk7XHJcbiAgICAgICAgICAgIENvZnJhZGVSZXNvdXJjZS5zYXZlKHZtLmNvZnJhZGUsIGd1YXJkYXJTdWNjZXNzLCBndWFyZGFyRXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQoJ0VsIHNlY3RvciAnICt2bS5zZWN0b3IrICcgbm8gZXhpc3RlISEnKVxyXG4gICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLnBhcmVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcignI3RvYXN0Qm91bmRzJykpXHJcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBndWFyZGFyU3VjY2VzcyhyZXNwb25zZSkge1xyXG4gICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAuY29udGVudCgnR3VhcmRhZG8gY29uIMOpeGl0byEhJylcclxuICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgKTtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlcycpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGd1YXJkYXJFcnJvcihyZXNwb25zZSkge1xyXG4gICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAuY29udGVudCgnRXJyb3IgYWwgZ3VhcmRhciEhJylcclxuICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgIC5wYXJlbnQoJGRvY3VtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJyN0b2FzdEJvdW5kcycpKVxyXG4gICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzaG93QWN0aW9uVG9hc3QoKSB7XHJcbiAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgIC5jb250ZW50KCdFeGlzdGVuIGVycm9yZXMgZW4gZWwgZm9ybXVsYXJpbycpXHJcbiAgICAgICAgICAuYWN0aW9uKCdPSycpXHJcbiAgICAgICAgICAuaGlnaGxpZ2h0QWN0aW9uKGZhbHNlKVxyXG4gICAgICAgICAgLnBhcmVudCgkZG9jdW1lbnRbMF0ucXVlcnlTZWxlY3RvcignI3RvYXN0Qm91bmRzJykpXHJcbiAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVEZXRhbGxlJywgQ29mcmFkZURldGFsbGUpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlRGV0YWxsZSgkc3RhdGUsICRmaWx0ZXIsIGdldENvZnJhZGVQcmVwU2VydmljZSwgZ2V0TWFwc1ByZXBTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLmNvZnJhZGUgPSBudWxsO1xyXG4gICAgdm0ubWFwcyA9IG51bGw7XHJcbiAgICBcclxuICAgIHZtLm1vZGlmeUNvZnJhZGUgPSBtb2RpZnlDb2ZyYWRlO1xyXG4gICAgXHJcbiAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0uY29mcmFkZSA9ICRmaWx0ZXIoJ2RhdGVUb1N0cmluZycpKGRhdGEpO1xyXG4gICAgICAgIGlmKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcylcclxuICAgICAgICAgIGlmKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEpe1xyXG4gICAgICAgICAgICB2bS5pYmFuID0gJGZpbHRlcigncGFyc2VJYmFuJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5pYmFuKTtcclxuICAgICAgICAgICAgdm0uY2MgPSAkZmlsdGVyKCdwYXJzZUNDJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgdm0ubWFwcyA9IGdldE1hcHNQcmVwU2VydmljZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzQ2FtYmlvcycsIHtjb2ZyYWRlSWQ6IGlkfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZXMnLCBDb2ZyYWRlcyk7XHJcblxyXG4gIGZ1bmN0aW9uIENvZnJhZGVzKGNvZnJhZGVzUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmNvZnJhZGVzID0gbnVsbDtcclxuICAgIHZtLm5leHRQYWdlID0gbnVsbDtcclxuXHJcbiAgICBhY3RpdmF0ZSgpO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgcmV0dXJuIGNvZnJhZGVzUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZSA9IGRhdGEubmV4dDtcclxuICAgICAgICB2bS5jb2ZyYWRlcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVNb2RpZmljYXInLCBDb2ZyYWRlTW9kaWZpY2FyKTtcclxuXHJcbiAgZnVuY3Rpb24gQ29mcmFkZU1vZGlmaWNhcihnZXRDb2ZyYWRlUHJlcFNlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgdm0uY29mcmFkZSA9IG51bGw7XHJcbiAgICB2bS5jb2ZyYWRlID0ge2RhdG9zRmluYW5jaWVyb3M6IHtkZXVkYTogW119fTtcclxuXHJcbiAgICB2bS5iYWNrU3RhdGUgPSBiYWNrU3RhdGU7XHJcbiAgICBcclxuICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgIHJldHVybiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UuJHByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5jb2ZyYWRlID0gZGF0YTtcclxuICAgICAgICBpZiAoIXZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcylcclxuICAgICAgICAgIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcyA9IHtkZXVkYTogW119O1xyXG5cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYmFja1N0YXRlKCl7XHJcbiAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdzY3JvbGx5Jywgc2Nyb2xseSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbHkoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHJvb3RTY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICB2YXIgcmF3ID0gZWxlbWVudFswXTtcclxuICAgICAgICBlbGVtZW50LmJpbmQoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChyYXcuc2Nyb2xsVG9wICsgcmF3Lm9mZnNldEhlaWdodCA+PSByYXcuc2Nyb2xsSGVpZ2h0LTUpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZW1pdChcInNjcm9sbERvd25cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3BhcnNlSWJhbicsIHBhcnNlSWJhbilcclxuICAgIC5maWx0ZXIoJ3BhcnNlQ0MnLCBwYXJzZUNDKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJJYmFuJywgY2FsY3VsYXJJYmFuKVxyXG4gICAgLmZpbHRlcignY2FsY3VsYXJDQycsIGNhbGN1bGFyQ0MpO1xyXG5cclxuICBmdW5jdGlvbiBwYXJzZUliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHZhciBmb3JtYXR0ZWRJYmFuID0gJyc7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGliYW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA+IDAgJiYgaSAlIDQgPT09IDApIHtcclxuICAgICAgICAgIGZvcm1hdHRlZEliYW4gKz0gJyAnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3JtYXR0ZWRJYmFuICs9IGliYW5baV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZEliYW47XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2MpIHtcclxuICAgICAgY2MgPSBjYyB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZENDID0gJyc7XHJcblxyXG4gICAgICBmb3JtYXR0ZWRDQyA9IGNjLnN1YnN0cigwLCA0KSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDQsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoOCwgMikgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cigxMCwgMTApO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1hdHRlZENDO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbGN1bGFyQ0MoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGliYW4pIHtcclxuICAgICAgaWJhbiA9IGliYW4gfHwgJyc7XHJcbiAgICAgIHJldHVybiBpYmFuLnN1YnN0cig0LCAyMCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXJJYmFuKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjY2MpIHtcclxuICAgICAgdmFyIHBhaXMgPSBcIkVTXCI7XHJcbiAgICAgIHZhciBjaWZyYXMgPSBjY2MgKyB2YWxvckNpZnJhcyhwYWlzKSArIFwiMDBcIjtcclxuICAgICAgdmFyIHJlc3RvID0gbW9kdWxvKGNpZnJhcywgOTcpO1xyXG4gICAgICByZXR1cm4gcGFpcyArIGNlcm9zSXpxdWllcmRhKDk4LXJlc3RvLCAyKSArIGNjYztcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsb3JDaWZyYXMoY2lmcmFzKSB7XHJcbiAgICAgIHZhciBMRVRSQVMgPSBcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPGNpZnJhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBwb3NpY2lvbiA9IExFVFJBUy5pbmRleE9mKGNpZnJhc1tpXSk7XHJcbiAgICAgICAgaXRlbXMucHVzaChwb3NpY2lvbiA8IDA/IFwiLVwiOiBwb3NpY2lvbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGl0ZW1zLmpvaW4oXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kdWxvKGNpZnJhcywgZGl2aXNvcikge1xyXG4gICAgICB2YXIgQ1VFTlRBID0gMTA7XHJcbiAgICAgIHZhciBsYXJnbyA9IGNpZnJhcy5sZW5ndGg7XHJcbiAgICAgIHZhciByZXN0byA9IDA7XHJcbiAgICAgIGZvciAodmFyIGk9MDsgaTxsYXJnbzsgaSs9Q1VFTlRBKSB7XHJcbiAgICAgICAgdmFyIGRpdmlkZW5kbyA9IHJlc3RvICsgXCJcIiArIGNpZnJhcy5zdWJzdHIoaSwgQ1VFTlRBKTtcclxuICAgICAgICByZXN0byA9IGRpdmlkZW5kbyAlIGRpdmlzb3I7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3RvO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNlcm9zSXpxdWllcmRhKGNpZnJhcywgbGFyZ28pIHtcclxuICAgICAgY2lmcmFzICs9ICcnO1xyXG4gICAgICB3aGlsZShjaWZyYXMubGVuZ3RoIDwgbGFyZ28pIHsgY2lmcmFzID0gJzAnK2NpZnJhczsgfVxyXG4gICAgICByZXR1cm4gY2lmcmFzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3N0cmluZ1RvRGF0ZScsIHN0cmluZ1RvRGF0ZSlcclxuICAgIC5maWx0ZXIoJ2RhdGVUb1N0cmluZycsIGRhdGVUb1N0cmluZyk7XHJcblxyXG4gIGZ1bmN0aW9uIHN0cmluZ1RvRGF0ZSgpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBuZXcgRGF0ZShkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8pO1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uID0gbmV3IERhdGUoZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbik7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVUb1N0cmluZygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYU5hY2ltaWVudG8udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24gPSBkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5maWx0ZXIoJ3JlbW92ZU51bGxzJywgcmVtb3ZlTnVsbHMpO1xyXG5cclxuICBmdW5jdGlvbiByZW1vdmVOdWxscygpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iail7XHJcbiAgICAgIHZhciBpc0FycmF5ID0gb2JqIGluc3RhbmNlb2YgQXJyYXk7XHJcbiAgICAgIGZvciAodmFyIGsgaW4gb2JqKXtcclxuICAgICAgICBpZiAob2JqW2tdPT09bnVsbCkgaXNBcnJheSA/IG9iai5zcGxpY2UoaywxKSA6IGRlbGV0ZSBvYmpba107XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9ialtrXT09XCJvYmplY3RcIikgcmVtb3ZlTnVsbHMob2JqW2tdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ2NvZnJhZGVzU2VydmljZScsIGNvZnJhZGVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNvZnJhZGVzU2VydmljZSgkcmVzb3VyY2UsICRodHRwLCAkZmlsdGVyKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb2ZyYWRlc1Jlc3Q6IGNvZnJhZGVzUmVzdCxcclxuICAgICAgY29mcmFkZXNCYWphc1Jlc3Q6IGNvZnJhZGVzQmFqYXNSZXN0LFxyXG4gICAgICBnZXRDYWxsZXM6IGdldENhbGxlcyxcclxuICAgICAgZ2V0UmVnaXN0cm9zOiBnZXRSZWdpc3Ryb3NcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzLzppZC5qc29uOmpzb24nLCBudWxsLCB7XHJcbiAgICAgICAgJ3F1ZXJ5JzogIHttZXRob2Q6J0dFVCcsIGlzQXJyYXk6IGZhbHNlfSxcclxuICAgICAgICAnZ2V0JzogICAge21ldGhvZDonR0VUJywgdHJhbnNmb3JtUmVzcG9uc2U6IGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ3N0cmluZ1RvRGF0ZScpKGFuZ3VsYXIuZnJvbUpzb24oZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICdzYXZlJzogICB7bWV0aG9kOidQT1NUJywgdHJhbnNmb3JtUmVxdWVzdDogZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci50b0pzb24oJGZpbHRlcigncmVtb3ZlTnVsbHMnKShkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvZnJhZGVzQmFqYXNSZXN0KCkge1xyXG4gICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NvZnJhZGVzQmFqYXMvOmlkLmpzb246anNvbicsIG51bGwsIHsncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTpmYWxzZX19KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDYWxsZXMoKSB7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY2FsbGVzLycpLlxyXG4gICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlZ2lzdHJvcygpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9yZWdpc3Ryb3MvJykuXHJcbiAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5mcm9tSnNvbihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnbWFwYXNTZXJ2aWNlJywgbWFwYXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gbWFwYXNTZXJ2aWNlKCRodHRwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZW9Db2RpbmdBUEk6IGdlb0NvZGluZ0FQSVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZW9Db2RpbmdBUEkoYWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJywge3BhcmFtczoge2FkZHJlc3M6IGFkZHJlc3MsIGtleTogXCJBSXphU3lEQ19PSURTbDZjdXJqQ01DTHl6bjJ5aE1tZy1lcjVrbklcIn19KS5cclxuICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB9KTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NlY3RvcmVzU2VydmljZScsIHNlY3RvcmVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNlY3RvcmVzU2VydmljZSgkcmVzb3VyY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlY3RvcmVzUmVzdDogc2VjdG9yZXNSZXN0XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlY3RvcmVzUmVzdCgpIHtcclxuICAgICAgcmV0dXJuICRyZXNvdXJjZSgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9zZWN0b3Jlcy86aWQuanNvbjpqc29uJywgbnVsbCwge1xyXG4gICAgICAgICdnZXQnOiAge21ldGhvZDonR0VUJywgaXNBcnJheTogdHJ1ZX0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignTGlzdGFDb2ZyYWRlcycsIExpc3RhQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBMaXN0YUNvZnJhZGVzKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmZpbHRybyAgICA9ICdub21icmUnO1xyXG4gICAgdm0udHlwZUlucHV0ID0gJ3RleHQnO1xyXG4gICAgdm0uYnVzY2FyICAgID0gbnVsbDtcclxuXHJcbiAgICB2bS5idXNxdWVkYSAgICAgID0gYnVzcXVlZGE7XHJcbiAgICB2bS5yYWRpb0NoYW5nZSAgID0gcmFkaW9DaGFuZ2U7XHJcbiAgICB2bS5nb1RvQ29mcmFkZSAgID0gZ29Ub0NvZnJhZGU7XHJcbiAgICB2bS5tb2RpZnlDb2ZyYWRlID0gbW9kaWZ5Q29mcmFkZTtcclxuXHJcbiAgICB2YXIgaGFuZGxlciA9ICRyb290U2NvcGUuJG9uKCdzY3JvbGxEb3duJywgZ2V0TmV4dFBhZ2UpO1xyXG5cclxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgaGFuZGxlciA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1c3F1ZWRhKCkge1xyXG4gICAgICB2YXIgZmlsdHJvID0ge307XHJcbiAgICAgIGZpbHRyb1t2bS5maWx0cm9dID0gdm0uYnVzY2FyO1xyXG4gICAgICBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZSA9IGRhdGEubmV4dDtcclxuICAgICAgICB2bS5jb2ZyYWRlcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmFkaW9DaGFuZ2UoKSB7XHJcbiAgICAgIHZtLmJ1c2NhciA9IG51bGw7XHJcbiAgICAgIHZtLnR5cGVJbnB1dCA9ICh2bS5maWx0cm8gPT09ICdub21icmUnKSA/ICd0ZXh0JzogJ251bWJlcic7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ29Ub0NvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0RldGFsbGUnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vZGlmeUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICRzdGF0ZS5nbygnY29mcmFkZXNDYW1iaW9zJywge2NvZnJhZGVJZDogaWR9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnbGlzdGFDb2ZyYWRlcycsIGxpc3RhQ29mcmFkZXMpO1xyXG5cclxuXHJcbiAgZnVuY3Rpb24gbGlzdGFDb2ZyYWRlcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9jb2ZyYWRlcy5kaXJlY3RpdmUuaHRtbCcsXHJcbiAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgY29mcmFkZXM6ICc9Y29mcmFkZXMnLFxyXG4gICAgICAgIG5leHRQYWdlOiAnPXBhZ2UnXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdMaXN0YUNvZnJhZGVzJyxcclxuICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
