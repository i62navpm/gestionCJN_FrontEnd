!function(){"use strict";angular.module("app",["ui.router","ngResource","ngMaterial","uiGmapgoogle-maps","ngMessages"])}(),function(){"use strict";function e(e){e.configure({libraries:"weather,geometry,visualization"})}angular.module("app").config(e),e.$inject=["uiGmapGoogleMapApiProvider"]}(),function(){"use strict";function e(e){e.months=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],e.shortMonths=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],e.days=["lunes","martes","miércoles","jueves","viernes","sábado","domingo"],e.shortDays=["lun","mar","mié","jue","vie","sáb","dom"],e.firstDayOfWeek=1,e.parseDate=function(e){return new Date(e)},e.formatDate=function(e){return new Date(e).toLocaleDateString()}}angular.module("app").config(e),e.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";function e(e,o){o.otherwise("/"),e.state("home",{url:"/",template:'<p class="lead">Welcome to the UI-Router Demo</p><p>Use the menu above to navigate. Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p><p>Click these links—<a href="#/c?id=1">Alice</a> or <a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}(),function(){"use strict";function e(e){e.state("cofrades",{url:"/cofrades",templateProvider:["$templateCache",function(e){return e.get("cofrades/list/cofrades.html")}],controller:"Cofrades",controllerAs:"vm",resolve:{cofradesPrepService:o,cofradesBajasPrepService:r}}).state("cofradesDetalle",{url:"/cofrades/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/detail/cofradeDetalle.html")}],controller:"CofradeDetalle",controllerAs:"vm",resolve:{getCofradePrepService:a,getMapsPrepService:t}}).state("cofradesCambios",{url:"/cofrades/nuevos/:cofradeId",templateProvider:["$templateCache",function(e){return e.get("cofrades/add/cofradeNuevo.html")}],controller:"CofradeNuevo",controllerAs:"vm",resolve:{getCofradePrepService:a}})}function o(e){return e.cofradesRest().query()}function r(e){return e.cofradesBajasRest().query()}function a(e,o){return o.cofradeId?e.cofradesRest().get({id:o.cofradeId}):!1}function t(e,o,r){return o.$promise.then(function(o){var a=o.datosPersonales.direccion.calle+" "+o.datosPersonales.direccion.numero+" "+o.datosPersonales.direccion.municipio+" "+o.datosPersonales.direccion.provincia+" "+o.datosPersonales.direccion.cp;return r.geoCodingAPI(a).then(function(o){if(o.data.results.length){var r=o.data.results[0].geometry.location;return e.then(function(e){return{coord:{latitude:r.lat,longitude:r.lng},marker:{latitude:r.lat,longitude:r.lng},zoom:17}})}})})}angular.module("app").config(e),e.$inject=["$stateProvider"],o.$inject=["cofradesService"],r.$inject=["cofradesService"],a.$inject=["cofradesService","$stateParams"],t.$inject=["uiGmapGoogleMapApi","getCofradePrepService","mapasService"]}(),function(){"use strict";function e(e,o){function r(o){e(o).toggle()}function a(e,a){r(a),o.go(e)}var t=this;t.toggleSidenav=r,t.navigateTo=a}angular.module("app").controller("AppCtrl",e),e.$inject=["$mdSidenav","$state"]}(),function(){"use strict";function e(e,o,r,a,t,n,c){function s(){t?t.$promise.then(i):n.getRegistros().then(function(e){j.cofrade.numeroOrden=e.data.numeroOrden,j.cofrade.numeroCofrade=e.data.numeroCofrade})}function i(e){return j.cofrade=e,j.calleSelected={calle:j.cofrade.datosPersonales.direccion.calle,cp:j.cofrade.datosPersonales.direccion.cp,provincia:j.cofrade.datosPersonales.direccion.provincia,municipio:j.cofrade.datosPersonales.direccion.municipio},f(j.cofrade.datosPersonales.direccion.calle),j.cofrade.datosFinancieros=j.cofrade.datosFinancieros||{cuenta:{},deuda:[]},j.cofrade.datosFinancieros.cuenta=j.cofrade.datosFinancieros.cuenta||{},j.cofrade.datosFinancieros.deuda=j.cofrade.datosFinancieros.deuda||[],!0}function u(){window.history.back()}function l(e){return n.getCalles(e).then(function(e){return e.data})}function d(e){e?(j.cofrade.datosPersonales.direccion.calle=e.calle,j.cofrade.datosPersonales.direccion.municipio=e.municipio,j.cofrade.datosPersonales.direccion.cp=e.cp,j.cofrade.datosPersonales.direccion.provincia=e.provincia,f(e.calle)):(j.cofrade.datosPersonales.direccion.calle=null,j.cofrade.datosPersonales.direccion.municipio=null,j.cofrade.datosPersonales.direccion.cp=null,j.cofrade.datosPersonales.direccion.provincia=null,j.sector=null,j.nuevaCalle=!0)}function f(e){c.sectoresRest().query({calle:e},function(e){j.sector=e[0].numeroSector,j.nuevaCalle=!1})}function p(){j.cofrade.datosFinancieros.cuenta.iban&&(j.cofrade.datosFinancieros.cuenta.cc=e("calcularCC")(j.cofrade.datosFinancieros.cuenta.iban))}function g(){j.cofrade.datosFinancieros.cuenta.cc&&(j.cofrade.datosFinancieros.cuenta.iban=e("calcularIban")(j.cofrade.datosFinancieros.cuenta.cc))}function m(e){function a(){c.sectoresRest().get({sector:j.sector},function(e){var a=e[0];a?(a.calles.push(j.searchText),a.$save(),s.save(j.cofrade,v,h)):r.show(r.simple().content("El sector "+j.sector+" no existe!!").position("top right").parent(o[0].querySelector("#toastBounds")).hideDelay(3e3))})}if(e){var t={cuenta:{},deuda:[]};j.cofrade.datosPersonales.direccion.calle=j.searchText,JSON.stringify(j.cofrade.datosFinancieros)===JSON.stringify(t)&&delete j.cofrade.datosFinancieros;var s=n.cofradesRest();j.nuevaCalle?a():s.save(j.cofrade,v,h)}else P()}function v(e){r.show(r.simple().content("Guardado con éxito!!").position("top right").hideDelay(3e3)),a.go("cofrades")}function h(e){r.show(r.simple().content("Error al guardar!!").position("top right").parent(o[0].querySelector("#toastBounds")).hideDelay(3e3))}function P(){r.show(r.simple().content("Existen errores en el formulario").action("OK").highlightAction(!1).parent(o[0].querySelector("#toastBounds")).position("top right"))}var j=this;j.nuevaCalle=!0,j.cofrade={datosFinancieros:{cuenta:{},deuda:[]},datosPersonales:{direccion:{},sexo:"Hombre",fechaInscripcion:new Date,fechaNacimiento:new Date}},j.backState=u,j.querySearch=l,j.selectedItemChange=d,j.calcularCC=p,j.calcularIban=g,j.guardar=m,s()}angular.module("app").controller("CofradeNuevo",e),e.$inject=["$filter","$document","$mdToast","$state","getCofradePrepService","cofradesService","sectoresService"]}(),function(){"use strict";function e(e,o,r,a){function t(){return r.$promise.then(function(e){c.cofrade=o("dateToString")(e),c.cofrade.datosFinancieros&&c.cofrade.datosFinancieros.cuenta&&(c.iban=o("parseIban")(c.cofrade.datosFinancieros.cuenta.iban),c.cc=o("parseCC")(c.cofrade.datosFinancieros.cuenta.cc)),c.maps=a})}function n(o,r){e.go("cofradesCambios",{cofradeId:o})}var c=this;c.cofrade=null,c.maps=null,c.modifyCofrade=n,t()}angular.module("app").controller("CofradeDetalle",e),e.$inject=["$state","$filter","getCofradePrepService","getMapsPrepService"]}(),function(){"use strict";function e(e,o){function r(){return e.$promise.then(function(e){a.nextPage=e.next,a.cofrades=e.results}),o.$promise.then(function(e){a.nextPageBajas=e.next,a.cofradesBajas=e.results})}var a=this;a.cofrades=null,a.nextPage=null,a.cofradesBajas=null,a.nextPageBajas=null,a.selectedTab=0,r()}angular.module("app").controller("Cofrades",e),e.$inject=["cofradesPrepService","cofradesBajasPrepService"]}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,o,r){var a=o[0];o.bind("scroll",function(){a.scrollTop+a.offsetHeight>=a.scrollHeight-5&&e.$emit("scrollDown")})}}}angular.module("app").directive("scrolly",e)}(),function(){"use strict";function e(){return function(e){e=e||"";for(var o="",r=0;r<e.length;r++)r>0&&r%4===0&&(o+=" "),o+=e[r];return o}}function o(){return function(e){e=e||"";var o="";return o=e.substr(0,4)+"-",o+=e.substr(4,4)+"-",o+=e.substr(8,2)+"-",o+=e.substr(10,10)}}function r(){return function(e){return e=e||"",e.substr(4,20)}}function a(){function e(e){for(var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=[],a=0;a<e.length;a++){var t=o.indexOf(e[a]);r.push(0>t?"-":t)}return r.join("")}function o(e,o){for(var r=10,a=e.length,t=0,n=0;a>n;n+=r){var c=t+""+e.substr(n,r);t=c%o}return t}function r(e,o){for(e+="";e.length<o;)e="0"+e;return e}return function(a){var t="ES",n=a+e(t)+"00",c=o(n,97);return t+r(98-c,2)+a}}angular.module("app").filter("parseIban",e).filter("parseCC",o).filter("calcularIban",a).filter("calcularCC",r)}(),function(){"use strict";function e(){return function(e){return e.datosPersonales.fechaNacimiento=new Date(e.datosPersonales.fechaNacimiento),e.datosPersonales.fechaInscripcion=new Date(e.datosPersonales.fechaInscripcion),e}}function o(){return function(e){return e.datosPersonales.fechaNacimiento=e.datosPersonales.fechaNacimiento.toLocaleDateString(),e.datosPersonales.fechaInscripcion=e.datosPersonales.fechaInscripcion.toLocaleDateString(),e}}angular.module("app").filter("stringToDate",e).filter("dateToString",o)}(),function(){"use strict";function e(){return function(o){var r=o instanceof Array;for(var a in o)null===o[a]?r?o.splice(a,1):delete o[a]:"object"==typeof o[a]&&e(o[a]);return o}}angular.module("app").filter("removeNulls",e)}(),function(){"use strict";function e(e,o,r){function a(){return e("http://127.0.0.1:5050/api/cofrades/:id.json:json",null,{query:{method:"GET",isArray:!1},get:{method:"GET",transformResponse:function(e,o){return r("stringToDate")(angular.fromJson(e))}},save:{method:"POST",transformRequest:function(e,o){return angular.toJson(r("removeNulls")(e))}}})}function t(){return e("http://127.0.0.1:5050/api/cofradesBajas/:id.json:json",null,{query:{method:"GET",isArray:!1}})}function n(e){return o.get("http://127.0.0.1:5050/api/calles/",{params:{calle:e}}).then(function(e){return angular.fromJson(e)})}function c(){return o.get("http://127.0.0.1:5050/api/registros/").then(function(e){return angular.fromJson(e)})}return{cofradesRest:a,cofradesBajasRest:t,getCalles:n,getRegistros:c}}angular.module("app").factory("cofradesService",e),e.$inject=["$resource","$http","$filter"]}(),function(){"use strict";function e(e){function o(o){return e.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:o,key:"AIzaSyDC_OIDSl6curjCMCLyzn2yhMmg-er5knI"}}).then(function(e){return e})}return{geoCodingAPI:o}}angular.module("app").factory("mapasService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function o(){return e("http://127.0.0.1:5050/api/sectores/:id.json:json",null,{get:{method:"GET",isArray:!0}})}return{sectoresRest:o}}angular.module("app").factory("sectoresService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,o,r,a){function t(){m.bajas?c():n()}function n(){if(m.nextPage){var e={page:m.nextPage};m.buscar&&(e[m.filtro]=m.buscar),a.cofradesRest().query(e,function(e){m.nextPage=e.next,m.cofrades=m.cofrades.concat(e.results)})}}function c(){if(m.nextPageBajas){var e={page:m.nextPageBajas};m.buscar&&(e[m.filtro]=m.buscar),a.cofradesBajasRest().query(e,function(e){m.nextPageBajas=e.next,m.cofradesBajas=m.cofradesBajas.concat(e.results)})}}function s(){m.bajas?u():i()}function i(){var e={};e[m.filtro]=m.buscar,a.cofradesRest().query(e,function(e){m.nextPage=e.next,m.cofrades=e.results})}function u(){var e={};e[m.filtro]=m.buscar,a.cofradesBajasRest().query(e,function(e){m.nextPageBajas=e.next,m.cofradesBajas=e.results})}function l(){m.buscar=null,m.typeInput="nombre"===m.filtro?"text":"number",m.search()}function d(e,o){r.go("cofradesDetalle",{cofradeId:e})}function f(e,o){o.stopPropagation(),r.go("cofradesCambios",{cofradeId:e})}function p(e,o){o.stopPropagation(),console.log("eliminar cofrade")}function g(e,o){o.stopPropagation(),console.log("restaurar cofrade")}var m=this;m.filtro="nombre",m.typeInput="text",m.buscar=null,m.search=s,m.radioChange=l,m.goToCofrade=d,m.modifyCofrade=f,m.removeCofrade=p,m.restoreCofrade=g;var v=e.$on("scrollDown",t);o.$on("$destroy",function(){v(),v=null})}angular.module("app").controller("ListaCofrades",e),e.$inject=["$rootScope","$scope","$state","cofradesService"]}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"./templates/directives/cofrades/list/cofrades.directive.html",scope:{cofrades:"=cofrades",nextPage:"=page",cofradesBajas:"=cofradesBajas",nextPageBajas:"=pageBajas"},controller:"ListaCofrades",controllerAs:"vm",bindToController:!0}}angular.module("app").directive("listaCofrades",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5pbml0Lm1vZHVsZS5qcyIsImFwcC5tYXAuanMiLCJhbGwubWluLmpzIiwiYXBwLnBpY2tlckRhdGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXBwLnRoZW1lLmpzIiwiY29mcmFkZXMvY29mcmFkZXMucm91dGVzLmpzIiwiaW50ZXJmYXovYXBwLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmNvbnRyb2xsZXIuanMiLCJjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuY29udHJvbGxlci5qcyIsImNvZnJhZGVzL2xpc3QvY29mcmFkZXMuY29udHJvbGxlci5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9zY3JvbGx5LmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZmlsdGVycy9wYXJzZUN1ZW50YS5maWx0ZXIuanMiLCJjb21tb25zL2ZpbHRlcnMvcGFyc2VEYXRlLmZpbHRlci5qcyIsImNvbW1vbnMvZmlsdGVycy9yZW1vdmVOdWxscy5maWx0ZXIuanMiLCJjb21tb25zL3NlcnZpY2VzL2NvZnJhZGVzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL21hcGFzLnNlcnZpY2UuanMiLCJjb21tb25zL3NlcnZpY2VzL3NlY3RvcmVzLnNlcnZpY2UuanMiLCJjb21tb25zL2RpcmVjdGl2ZXMvY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5jb250cm9sbGVyLmRpcmVjdGl2ZS5qcyIsImNvbW1vbnMvZGlyZWN0aXZlcy9jb2ZyYWRlcy9saXN0L2NvZnJhZGVzLmRpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZ29vZ2xlTWFwQVBJIiwidWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIiLCJjb25maWd1cmUiLCJsaWJyYXJpZXMiLCJjb25maWciLCIkaW5qZWN0IiwiZGF0ZVBpY2tlckNvbmZpZyIsIiRtZERhdGVMb2NhbGVQcm92aWRlciIsIm1vbnRocyIsInNob3J0TW9udGhzIiwiZGF5cyIsInNob3J0RGF5cyIsImZpcnN0RGF5T2ZXZWVrIiwicGFyc2VEYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJmb3JtYXREYXRlIiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZSIsInRoZW1lQW5ndWxhck1hdGVyaWFsIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidGVtcGxhdGVQcm92aWRlciIsIiR0ZW1wbGF0ZUNhY2hlIiwiZ2V0IiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc29sdmUiLCJjb2ZyYWRlc1ByZXBTZXJ2aWNlIiwiY29mcmFkZXNCYWphc1ByZXBTZXJ2aWNlIiwiZ2V0Q29mcmFkZVByZXBTZXJ2aWNlIiwiZ2V0TWFwc1ByZXBTZXJ2aWNlIiwiY29mcmFkZXNTZXJ2aWNlIiwiY29mcmFkZXNSZXN0IiwicXVlcnkiLCJjb2ZyYWRlc0JhamFzUmVzdCIsIiRzdGF0ZVBhcmFtcyIsImlkIiwiY29mcmFkZUlkIiwidWlHbWFwR29vZ2xlTWFwQXBpIiwibWFwYXNTZXJ2aWNlIiwiJHByb21pc2UiLCJ0aGVuIiwiZGF0YSIsImFkZHJlc3MiLCJkYXRvc1BlcnNvbmFsZXMiLCJkaXJlY2Npb24iLCJjYWxsZSIsIm51bWVybyIsIm11bmljaXBpbyIsInByb3ZpbmNpYSIsImNwIiwiZ2VvQ29kaW5nQVBJIiwicmVzcG9uc2UiLCJyZXN1bHRzIiwibGVuZ3RoIiwiY29vcmRpbmF0ZXMiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibWFwcyIsImNvb3JkIiwibGF0aXR1ZGUiLCJsYXQiLCJsb25naXR1ZGUiLCJsbmciLCJtYXJrZXIiLCJ6b29tIiwiQXBwQ3RybCIsIiRtZFNpZGVuYXYiLCIkc3RhdGUiLCJ0b2dnbGVTaWRlbmF2IiwibWVudUlkIiwidG9nZ2xlIiwibmF2aWdhdGVUbyIsInRvIiwiZ28iLCJ2bSIsInRoaXMiLCJDb2ZyYWRlTnVldm8iLCIkZmlsdGVyIiwiJGRvY3VtZW50IiwiJG1kVG9hc3QiLCJzZWN0b3Jlc1NlcnZpY2UiLCJhY3RpdmF0ZSIsImluaXRDb2ZyYWRlIiwiZ2V0UmVnaXN0cm9zIiwiY29mcmFkZSIsIm51bWVyb09yZGVuIiwibnVtZXJvQ29mcmFkZSIsImNhbGxlU2VsZWN0ZWQiLCJzZWFyY2hTZWN0b3IiLCJkYXRvc0ZpbmFuY2llcm9zIiwiY3VlbnRhIiwiZGV1ZGEiLCJiYWNrU3RhdGUiLCJ3aW5kb3ciLCJoaXN0b3J5IiwiYmFjayIsInF1ZXJ5U2VhcmNoIiwiZ2V0Q2FsbGVzIiwic2VsZWN0ZWRJdGVtQ2hhbmdlIiwiaXRlbSIsInNlY3RvciIsIm51ZXZhQ2FsbGUiLCJzZWN0b3Jlc1Jlc3QiLCJudW1lcm9TZWN0b3IiLCJjYWxjdWxhckNDIiwiaWJhbiIsImNjIiwiY2FsY3VsYXJJYmFuIiwiZ3VhcmRhciIsImlzVmFsaWQiLCJndWFyZGFyQ2FsbGUiLCJzZWN0b3JSZXNvdXJjZSIsImNhbGxlcyIsInB1c2giLCJzZWFyY2hUZXh0IiwiJHNhdmUiLCJDb2ZyYWRlUmVzb3VyY2UiLCJzYXZlIiwiZ3VhcmRhclN1Y2Nlc3MiLCJndWFyZGFyRXJyb3IiLCJzaG93Iiwic2ltcGxlIiwiY29udGVudCIsInBvc2l0aW9uIiwicGFyZW50IiwicXVlcnlTZWxlY3RvciIsImhpZGVEZWxheSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzaG93QWN0aW9uVG9hc3QiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJzZXhvIiwiZmVjaGFJbnNjcmlwY2lvbiIsImZlY2hhTmFjaW1pZW50byIsIkNvZnJhZGVEZXRhbGxlIiwibW9kaWZ5Q29mcmFkZSIsImV2ZW50IiwiQ29mcmFkZXMiLCJuZXh0UGFnZSIsIm5leHQiLCJjb2ZyYWRlcyIsIm5leHRQYWdlQmFqYXMiLCJjb2ZyYWRlc0JhamFzIiwic2VsZWN0ZWRUYWIiLCJzY3JvbGx5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHJvb3RTY29wZSIsImVsZW1lbnQiLCJhdHRycyIsInJhdyIsImJpbmQiLCJzY3JvbGxUb3AiLCJvZmZzZXRIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCIkZW1pdCIsImRpcmVjdGl2ZSIsInBhcnNlSWJhbiIsImZvcm1hdHRlZEliYW4iLCJpIiwicGFyc2VDQyIsImZvcm1hdHRlZENDIiwic3Vic3RyIiwidmFsb3JDaWZyYXMiLCJjaWZyYXMiLCJMRVRSQVMiLCJpdGVtcyIsInBvc2ljaW9uIiwiaW5kZXhPZiIsImpvaW4iLCJtb2R1bG8iLCJkaXZpc29yIiwiQ1VFTlRBIiwibGFyZ28iLCJyZXN0byIsImRpdmlkZW5kbyIsImNlcm9zSXpxdWllcmRhIiwiY2NjIiwicGFpcyIsImZpbHRlciIsInN0cmluZ1RvRGF0ZSIsImRhdGVUb1N0cmluZyIsInJlbW92ZU51bGxzIiwib2JqIiwiaXNBcnJheSIsIkFycmF5IiwiayIsInNwbGljZSIsIiRyZXNvdXJjZSIsIiRodHRwIiwibWV0aG9kIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJoZWFkZXJzR2V0dGVyIiwiZnJvbUpzb24iLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwidG9Kc29uIiwicGFyYW1zIiwiZmFjdG9yeSIsImtleSIsIkxpc3RhQ29mcmFkZXMiLCIkc2NvcGUiLCJnZXROZXh0UGFnZSIsImJhamFzIiwiZ2V0TmV4dFBhZ2VCYWphcyIsImdldE5leHRQYWdlQWx0YXMiLCJwYXJhbWV0ZXJzIiwicGFnZSIsImJ1c2NhciIsImZpbHRybyIsImNvbmNhdCIsInNlYXJjaCIsInNlYXJjaEJhamFzIiwic2VhcmNoQWx0YXMiLCJyYWRpb0NoYW5nZSIsInR5cGVJbnB1dCIsImdvVG9Db2ZyYWRlIiwic3RvcFByb3BhZ2F0aW9uIiwicmVtb3ZlQ29mcmFkZSIsImNvbnNvbGUiLCJsb2ciLCJyZXN0b3JlQ29mcmFkZSIsImhhbmRsZXIiLCIkb24iLCJsaXN0YUNvZnJhZGVzIiwidGVtcGxhdGVVcmwiLCJzY29wZSIsImJpbmRUb0NvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FBQUMsT0FBQSxPQUNBLFlB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QUFBRCxJQUdBLFFBQUFxRyxHQUFBckcsRUFBQXNHLEdBQ0FBLEVBQUFnRixrQkFDQXRKLEVBQUFNLEdBQUEsbUJBQUFyQyxVQUFBRCxJQUdBLFFBQUF1TCxHQUFBdkwsRUFBQXNHLEdBQ0FBLEVBQUFnRixrQkFDQUUsUUFBQUMsSUFBQSxvQkFHQSxRQUFBQyxHQUFBMUwsRUFBQXNHLEdBQ0FBLEVBQUFnRixrQkFDQUUsUUFBQUMsSUFBQSxxQkF0R0EsR0FBQWxKLEdBQUFDLElBRUFELEdBQUF1SSxPQUFBLFNBQ0F2SSxFQUFBNkksVUFBQSxPQUNBN0ksRUFBQXNJLE9BQUEsS0FFQXRJLEVBQUF5SSxPQUFBQSxFQUNBekksRUFBQTRJLFlBQUFBLEVBQ0E1SSxFQUFBOEksWUFBQUEsRUFDQTlJLEVBQUE4RCxjQUFBQSxFQUNBOUQsRUFBQWdKLGNBQUFBLEVBQ0FoSixFQUFBbUosZUFBQUEsQ0FFQSxJQUFBQyxHQUFBMUUsRUFBQTJFLElBQUEsYUFBQXJCLEVBRUFELEdBQUFzQixJQUFBLFdBQUEsV0FDQUQsSUFDQUEsRUFBQSxPQXRCQXZPLFFBQ0FDLE9BQUEsT0FDQStCLFdBQUEsZ0JBQUFpTCxHaEJneUJFQSxFQUFjMU0sU0FBVyxhQUFjLFNBQVUsU0FBVSxzQmlCcnlCN0QsV0FDQSxZQU9BLFNBQUFrTyxLQUNBLE9BQ0E5RSxTQUFBLElBQ0ErRSxZQUFBLCtEQUNBQyxPQUNBckYsU0FBQSxZQUNBRixTQUFBLFFBQ0FJLGNBQUEsaUJBQ0FELGNBQUEsY0FHQXZILFdBQUEsZ0JBQ0FDLGFBQUEsS0FDQTJNLGtCQUFBLEdBbEJBNU8sUUFDQUMsT0FBQSxPQUNBcUssVUFBQSxnQkFBQW1FIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAnbmdNYXRlcmlhbCcsXHJcbiAgICAndWlHbWFwZ29vZ2xlLW1hcHMnLFxyXG4gICAgJ25nTWVzc2FnZXMnXHJcbiAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGdvb2dsZU1hcEFQSSk7XHJcblxyXG4gIGZ1bmN0aW9uIGdvb2dsZU1hcEFQSSh1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlcil7XHJcbiAgICB1aUdtYXBHb29nbGVNYXBBcGlQcm92aWRlci5jb25maWd1cmUoe1xyXG4gICAgICAgIGxpYnJhcmllczogJ3dlYXRoZXIsZ2VvbWV0cnksdmlzdWFsaXphdGlvbidcclxuICAgIH0pOyAgICBcclxuICB9XHJcblxyXG59KSgpOyIsbnVsbCwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoZGF0ZVBpY2tlckNvbmZpZyk7XHJcblxyXG4gIGZ1bmN0aW9uIGRhdGVQaWNrZXJDb25maWcoJG1kRGF0ZUxvY2FsZVByb3ZpZGVyKSB7XHJcblxyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLm1vbnRocyA9IFsnZW5lcm8nLCAnZmVicmVybycsICdtYXJ6bycsICdhYnJpbCcsICdtYXlvJywgJ2p1bmlvJywgJ2p1bGlvJywgJ2Fnb3N0bycsICdzZXB0aWVtYnJlJywgJ29jdHVicmUnLCAnbm92aWVtYnJlJywgJ2RpY2llbWJyZSddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0TW9udGhzID0gWydlbmUnLCAnZmViJywgJ21hcicsICdhYnInLCAnbWF5JywgJ2p1bicsICdqdWwnLCAnYWdvJywgJ3NlcCcsICdvY3QnLCAnbm92JywgJ2RpYyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLmRheXMgPSBbJ2x1bmVzJywgJ21hcnRlcycsICdtacOpcmNvbGVzJywgJ2p1ZXZlcycsICd2aWVybmVzJywgJ3PDoWJhZG8nLCAnZG9taW5nbyddO1xyXG4gICAgJG1kRGF0ZUxvY2FsZVByb3ZpZGVyLnNob3J0RGF5cyA9IFsnbHVuJywgJ21hcicsICdtacOpJywgJ2p1ZScsICd2aWUnLCAnc8OhYicsICdkb20nXTtcclxuXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZmlyc3REYXlPZldlZWsgPSAxO1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIucGFyc2VEYXRlID0gZnVuY3Rpb24oZGF0ZVN0cmluZykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkbWREYXRlTG9jYWxlUHJvdmlkZXIuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfTtcclxuXHJcbiAgfVxyXG5cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoXCJob21lXCIsIHtcclxuICAgICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPHAgY2xhc3M9XCJsZWFkXCI+V2VsY29tZSB0byB0aGUgVUktUm91dGVyIERlbW88L3A+JyArXHJcbiAgICAgICAgICAnPHA+VXNlIHRoZSBtZW51IGFib3ZlIHRvIG5hdmlnYXRlLiAnICtcclxuICAgICAgICAgICdQYXkgYXR0ZW50aW9uIHRvIHRoZSA8Y29kZT4kc3RhdGU8L2NvZGU+IGFuZCA8Y29kZT4kc3RhdGVQYXJhbXM8L2NvZGU+IHZhbHVlcyBiZWxvdy48L3A+JyArXHJcbiAgICAgICAgICAnPHA+Q2xpY2sgdGhlc2UgbGlua3PigJQ8YSBocmVmPVwiIy9jP2lkPTFcIj5BbGljZTwvYT4gb3IgJyArXHJcbiAgICAgICAgICAnPGEgaHJlZj1cIiMvdXNlci80MlwiPkJvYjwvYT7igJR0byBzZWUgYSB1cmwgcmVkaXJlY3QgaW4gYWN0aW9uLjwvcD4nXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcodGhlbWVBbmd1bGFyTWF0ZXJpYWwpO1xyXG5cclxuICBmdW5jdGlvbiB0aGVtZUFuZ3VsYXJNYXRlcmlhbCgkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG4gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY29mcmFkZXMnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlc1wiLFxyXG4gICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKXsgIFxyXG4gICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnY29mcmFkZXMvbGlzdC9jb2ZyYWRlcy5odG1sJyk7IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogJ0NvZnJhZGVzJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlOiBjb2ZyYWRlc1ByZXBTZXJ2aWNlLFxyXG4gICAgICAgICAgICBjb2ZyYWRlc0JhamFzUHJlcFNlcnZpY2U6IGNvZnJhZGVzQmFqYXNQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnN0YXRlKCdjb2ZyYWRlc0RldGFsbGUnLCB7XHJcbiAgICAgICAgdXJsOiBcIi9jb2ZyYWRlcy86Y29mcmFkZUlkXCIsXHJcbiAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpeyAgXHJcbiAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb2ZyYWRlcy9kZXRhaWwvY29mcmFkZURldGFsbGUuaHRtbCcpOyBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb2ZyYWRlRGV0YWxsZScsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlOiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsXHJcbiAgICAgICAgICAgIGdldE1hcHNQcmVwU2VydmljZTogZ2V0TWFwc1ByZXBTZXJ2aWNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5cclxuICAgICAgc3RhdGUoJ2NvZnJhZGVzQ2FtYmlvcycsIHtcclxuICAgICAgICB1cmw6IFwiL2NvZnJhZGVzL251ZXZvcy86Y29mcmFkZUlkXCIsXHJcbiAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpeyAgXHJcbiAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdjb2ZyYWRlcy9hZGQvY29mcmFkZU51ZXZvLmh0bWwnKTsgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOiAnQ29mcmFkZU51ZXZvJyxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICBnZXRDb2ZyYWRlUHJlcFNlcnZpY2U6IGdldENvZnJhZGVQcmVwU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb2ZyYWRlc1ByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29mcmFkZXNCYWphc1ByZXBTZXJ2aWNlKGNvZnJhZGVzU2VydmljZSkge1xyXG4gICAgcmV0dXJuIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc0JhamFzUmVzdCgpLnF1ZXJ5KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UoY29mcmFkZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgIHJldHVybiAoJHN0YXRlUGFyYW1zLmNvZnJhZGVJZCkgPyBjb2ZyYWRlc1NlcnZpY2UuY29mcmFkZXNSZXN0KCkuZ2V0KHtpZDogJHN0YXRlUGFyYW1zLmNvZnJhZGVJZH0pIDogZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdldE1hcHNQcmVwU2VydmljZSh1aUdtYXBHb29nbGVNYXBBcGksIGdldENvZnJhZGVQcmVwU2VydmljZSwgbWFwYXNTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIFxyXG4gICAgICB2YXIgYWRkcmVzcyA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSAgICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5udW1lcm8gICAgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5tdW5pY2lwaW8gKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcDtcclxuXHJcbiAgICAgIHJldHVybiBtYXBhc1NlcnZpY2UuZ2VvQ29kaW5nQVBJKGFkZHJlc3MpLlxyXG4gICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0cy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgICAgIHJldHVybiB1aUdtYXBHb29nbGVNYXBBcGkudGhlbihmdW5jdGlvbihtYXBzKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuICB7Y29vcmQ6ICB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyOiB7IGxhdGl0dWRlOiBjb29yZGluYXRlcy5sYXQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXMubG5nIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBBcHBDdHJsKTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIEFwcEN0cmwoJG1kU2lkZW5hdiwgJHN0YXRlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0udG9nZ2xlU2lkZW5hdiA9IHRvZ2dsZVNpZGVuYXY7XHJcbiAgICB2bS5uYXZpZ2F0ZVRvICAgID0gbmF2aWdhdGVUbztcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZW5hdihtZW51SWQpIHtcclxuICAgICAgJG1kU2lkZW5hdihtZW51SWQpLnRvZ2dsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlVG8odG8sIG1lbnVJZCl7XHJcbiAgICAgIHRvZ2dsZVNpZGVuYXYobWVudUlkKTtcclxuICAgICAgJHN0YXRlLmdvKHRvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDb2ZyYWRlTnVldm8nLCBDb2ZyYWRlTnVldm8pO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlTnVldm8oJGZpbHRlciwgJGRvY3VtZW50LCAkbWRUb2FzdCwgJHN0YXRlLCBnZXRDb2ZyYWRlUHJlcFNlcnZpY2UsIGNvZnJhZGVzU2VydmljZSwgc2VjdG9yZXNTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgXHJcbiAgICB2bS5udWV2YUNhbGxlID0gdHJ1ZTtcclxuICAgIHZtLmNvZnJhZGUgPSB7ZGF0b3NGaW5hbmNpZXJvczoge2N1ZW50YToge30sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV1ZGE6IFtdfSxcclxuICAgICAgICAgICAgICAgICAgZGF0b3NQZXJzb25hbGVzOiAge2RpcmVjY2lvbjoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXhvOiBcIkhvbWJyZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVjaGFJbnNjcmlwY2lvbjogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlY2hhTmFjaW1pZW50bzogbmV3IERhdGUoKX1cclxuICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgIHZtLmJhY2tTdGF0ZSAgICAgICAgICA9IGJhY2tTdGF0ZTtcclxuICAgIHZtLnF1ZXJ5U2VhcmNoICAgICAgICA9IHF1ZXJ5U2VhcmNoO1xyXG4gICAgdm0uc2VsZWN0ZWRJdGVtQ2hhbmdlID0gc2VsZWN0ZWRJdGVtQ2hhbmdlO1xyXG4gICAgdm0uY2FsY3VsYXJDQyAgICAgICAgID0gY2FsY3VsYXJDQztcclxuICAgIHZtLmNhbGN1bGFySWJhbiAgICAgICA9IGNhbGN1bGFySWJhbjtcclxuICAgIHZtLmd1YXJkYXIgICAgICAgICAgICA9IGd1YXJkYXI7XHJcblxyXG4gICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgaWYgKGdldENvZnJhZGVQcmVwU2VydmljZSl7XHJcbiAgICAgICAgZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oaW5pdENvZnJhZGUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgY29mcmFkZXNTZXJ2aWNlLmdldFJlZ2lzdHJvcygpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY29mcmFkZS5udW1lcm9PcmRlbiA9IHJlc3BvbnNlLmRhdGEubnVtZXJvT3JkZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jb2ZyYWRlLm51bWVyb0NvZnJhZGUgPSByZXNwb25zZS5kYXRhLm51bWVyb0NvZnJhZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdENvZnJhZGUoZGF0YSkge1xyXG4gICAgICB2bS5jb2ZyYWRlID0gZGF0YTtcclxuICAgICAgdm0uY2FsbGVTZWxlY3RlZCA9IHtjYWxsZTogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNwOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmluY2lhOiB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ucHJvdmluY2lhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG11bmljaXBpbzogdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpb307XHJcbiAgICAgIHNlYXJjaFNlY3Rvcih2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY2FsbGUpO1xyXG5cclxuICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zIHx8IHtjdWVudGE6IHt9LCBkZXVkYTogW119O1xyXG4gICAgICB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YSB8fCB7fTtcclxuICAgICAgdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmRldWRhID0gdm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmRldWRhIHx8IFtdO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBiYWNrU3RhdGUoKSB7XHJcbiAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBxdWVyeVNlYXJjaChxdWVyeSkge1xyXG4gICAgICByZXR1cm4gY29mcmFkZXNTZXJ2aWNlLmdldENhbGxlcyhxdWVyeSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHJlc3BvbnNlLmRhdGE7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRJdGVtQ2hhbmdlKGl0ZW0pIHtcclxuICAgICAgaWYgKGl0ZW0pe1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSA9IGl0ZW0uY2FsbGU7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLm11bmljaXBpbyA9IGl0ZW0ubXVuaWNpcGlvO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jcCA9IGl0ZW0uY3A7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLnByb3ZpbmNpYSA9IGl0ZW0ucHJvdmluY2lhO1xyXG4gICAgICAgIHNlYXJjaFNlY3RvcihpdGVtLmNhbGxlKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdm0uY29mcmFkZS5kYXRvc1BlcnNvbmFsZXMuZGlyZWNjaW9uLmNhbGxlID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24ubXVuaWNpcGlvID0gbnVsbDtcclxuICAgICAgICB2bS5jb2ZyYWRlLmRhdG9zUGVyc29uYWxlcy5kaXJlY2Npb24uY3AgPSBudWxsO1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5wcm92aW5jaWEgPSBudWxsO1xyXG4gICAgICAgIHZtLnNlY3RvciA9IG51bGw7XHJcbiAgICAgICAgdm0ubnVldmFDYWxsZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2VhcmNoU2VjdG9yKGNhbGxlKSB7XHJcbiAgICAgIHNlY3RvcmVzU2VydmljZS5zZWN0b3Jlc1Jlc3QoKS5xdWVyeSh7Y2FsbGU6IGNhbGxlfSwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0uc2VjdG9yID0gZGF0YVswXS5udW1lcm9TZWN0b3I7XHJcbiAgICAgICAgdm0ubnVldmFDYWxsZSA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhckNDKCkge1xyXG4gICAgICBpZiAodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5pYmFuKVxyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuY2MgPSAkZmlsdGVyKCdjYWxjdWxhckNDJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5pYmFuKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhckliYW4oKSB7XHJcbiAgICAgIGlmICh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MuY3VlbnRhLmNjKVxyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuaWJhbiA9ICRmaWx0ZXIoJ2NhbGN1bGFySWJhbicpKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEuY2MpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGd1YXJkYXIoaXNWYWxpZCkge1xyXG4gICAgICBpZihpc1ZhbGlkKXtcclxuICAgICAgICB2YXIgZGF0b3NGaW5hbmNpZXJvcyA9IHtjdWVudGE6IHt9LCBkZXVkYTogW119O1xyXG4gICAgICAgIHZtLmNvZnJhZGUuZGF0b3NQZXJzb25hbGVzLmRpcmVjY2lvbi5jYWxsZSA9IHZtLnNlYXJjaFRleHQ7XHJcblxyXG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3MpID09PSBKU09OLnN0cmluZ2lmeShkYXRvc0ZpbmFuY2llcm9zKSlcclxuICAgICAgICAgIGRlbGV0ZSB2bS5jb2ZyYWRlLmRhdG9zRmluYW5jaWVyb3M7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIENvZnJhZGVSZXNvdXJjZSA9IGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKTtcclxuICAgICAgICBpZih2bS5udWV2YUNhbGxlKVxyXG4gICAgICAgICAgZ3VhcmRhckNhbGxlKCk7XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgIENvZnJhZGVSZXNvdXJjZS5zYXZlKHZtLmNvZnJhZGUsIGd1YXJkYXJTdWNjZXNzLCBndWFyZGFyRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgc2hvd0FjdGlvblRvYXN0KCk7XHJcbiAgICAgIFxyXG4gICAgICBmdW5jdGlvbiBndWFyZGFyQ2FsbGUoKSB7XHJcbiAgICAgICAgc2VjdG9yZXNTZXJ2aWNlLnNlY3RvcmVzUmVzdCgpLmdldCh7c2VjdG9yOiB2bS5zZWN0b3J9LCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZhciBzZWN0b3JSZXNvdXJjZSA9ICBkYXRhWzBdO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZihzZWN0b3JSZXNvdXJjZSl7XHJcbiAgICAgICAgICAgIHNlY3RvclJlc291cmNlLmNhbGxlcy5wdXNoKHZtLnNlYXJjaFRleHQpO1xyXG4gICAgICAgICAgICBzZWN0b3JSZXNvdXJjZS4kc2F2ZSgpO1xyXG4gICAgICAgICAgICBDb2ZyYWRlUmVzb3VyY2Uuc2F2ZSh2bS5jb2ZyYWRlLCBndWFyZGFyU3VjY2VzcywgZ3VhcmRhckVycm9yKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgIC5jb250ZW50KCdFbCBzZWN0b3IgJyArdm0uc2VjdG9yKyAnIG5vIGV4aXN0ZSEhJylcclxuICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5wYXJlbnQoJGRvY3VtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJyN0b2FzdEJvdW5kcycpKVxyXG4gICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ3VhcmRhclN1Y2Nlc3MocmVzcG9uc2UpIHtcclxuICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgLmNvbnRlbnQoJ0d1YXJkYWRvIGNvbiDDqXhpdG8hIScpXHJcbiAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICk7XHJcbiAgICAgICRzdGF0ZS5nbygnY29mcmFkZXMnKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBndWFyZGFyRXJyb3IocmVzcG9uc2UpIHtcclxuICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgLmNvbnRlbnQoJ0Vycm9yIGFsIGd1YXJkYXIhIScpXHJcbiAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAucGFyZW50KCRkb2N1bWVudFswXS5xdWVyeVNlbGVjdG9yKCcjdG9hc3RCb3VuZHMnKSlcclxuICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2hvd0FjdGlvblRvYXN0KCkge1xyXG4gICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAuY29udGVudCgnRXhpc3RlbiBlcnJvcmVzIGVuIGVsIGZvcm11bGFyaW8nKVxyXG4gICAgICAgICAgLmFjdGlvbignT0snKVxyXG4gICAgICAgICAgLmhpZ2hsaWdodEFjdGlvbihmYWxzZSlcclxuICAgICAgICAgIC5wYXJlbnQoJGRvY3VtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJyN0b2FzdEJvdW5kcycpKVxyXG4gICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NvZnJhZGVEZXRhbGxlJywgQ29mcmFkZURldGFsbGUpO1xyXG5cclxuICBmdW5jdGlvbiBDb2ZyYWRlRGV0YWxsZSgkc3RhdGUsICRmaWx0ZXIsIGdldENvZnJhZGVQcmVwU2VydmljZSwgZ2V0TWFwc1ByZXBTZXJ2aWNlKSB7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLmNvZnJhZGUgPSBudWxsO1xyXG4gICAgdm0ubWFwcyA9IG51bGw7XHJcbiAgICBcclxuICAgIHZtLm1vZGlmeUNvZnJhZGUgPSBtb2RpZnlDb2ZyYWRlO1xyXG4gICAgXHJcbiAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICByZXR1cm4gZ2V0Q29mcmFkZVByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0uY29mcmFkZSA9ICRmaWx0ZXIoJ2RhdGVUb1N0cmluZycpKGRhdGEpO1xyXG4gICAgICAgIGlmKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcylcclxuICAgICAgICAgIGlmKHZtLmNvZnJhZGUuZGF0b3NGaW5hbmNpZXJvcy5jdWVudGEpe1xyXG4gICAgICAgICAgICB2bS5pYmFuID0gJGZpbHRlcigncGFyc2VJYmFuJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5pYmFuKTtcclxuICAgICAgICAgICAgdm0uY2MgPSAkZmlsdGVyKCdwYXJzZUNDJykodm0uY29mcmFkZS5kYXRvc0ZpbmFuY2llcm9zLmN1ZW50YS5jYyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgdm0ubWFwcyA9IGdldE1hcHNQcmVwU2VydmljZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzQ2FtYmlvcycsIHtjb2ZyYWRlSWQ6IGlkfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignQ29mcmFkZXMnLCBDb2ZyYWRlcyk7XHJcblxyXG4gIGZ1bmN0aW9uIENvZnJhZGVzKGNvZnJhZGVzUHJlcFNlcnZpY2UsIGNvZnJhZGVzQmFqYXNQcmVwU2VydmljZSkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIFxyXG4gICAgdm0uY29mcmFkZXMgPSBudWxsO1xyXG4gICAgdm0ubmV4dFBhZ2UgPSBudWxsO1xyXG4gICAgdm0uY29mcmFkZXNCYWphcyA9IG51bGw7XHJcbiAgICB2bS5uZXh0UGFnZUJhamFzID0gbnVsbDtcclxuICAgIHZtLnNlbGVjdGVkVGFiID0gMDtcclxuICAgIGFjdGl2YXRlKCk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICBjb2ZyYWRlc1ByZXBTZXJ2aWNlLiRwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgdm0ubmV4dFBhZ2UgPSBkYXRhLm5leHQ7XHJcbiAgICAgICAgdm0uY29mcmFkZXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGNvZnJhZGVzQmFqYXNQcmVwU2VydmljZS4kcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlQmFqYXMgPSBkYXRhLm5leHQ7XHJcbiAgICAgICAgdm0uY29mcmFkZXNCYWphcyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5kaXJlY3RpdmUoJ3Njcm9sbHknLCBzY3JvbGx5KTtcclxuXHJcbiAgZnVuY3Rpb24gc2Nyb2xseSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkcm9vdFNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgIHZhciByYXcgPSBlbGVtZW50WzBdO1xyXG4gICAgICAgIGVsZW1lbnQuYmluZCgnc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHJhdy5zY3JvbGxUb3AgKyByYXcub2Zmc2V0SGVpZ2h0ID49IHJhdy5zY3JvbGxIZWlnaHQtNSkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRlbWl0KFwic2Nyb2xsRG93blwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigncGFyc2VJYmFuJywgcGFyc2VJYmFuKVxyXG4gICAgLmZpbHRlcigncGFyc2VDQycsIHBhcnNlQ0MpXHJcbiAgICAuZmlsdGVyKCdjYWxjdWxhckliYW4nLCBjYWxjdWxhckliYW4pXHJcbiAgICAuZmlsdGVyKCdjYWxjdWxhckNDJywgY2FsY3VsYXJDQyk7XHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlSWJhbigpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoaWJhbikge1xyXG4gICAgICBpYmFuID0gaWJhbiB8fCAnJztcclxuICAgICAgdmFyIGZvcm1hdHRlZEliYW4gPSAnJztcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWJhbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChpID4gMCAmJiBpICUgNCA9PT0gMCkge1xyXG4gICAgICAgICAgZm9ybWF0dGVkSWJhbiArPSAnICc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcm1hdHRlZEliYW4gKz0gaWJhbltpXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZm9ybWF0dGVkSWJhbjtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwYXJzZUNDKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYykge1xyXG4gICAgICBjYyA9IGNjIHx8ICcnO1xyXG4gICAgICB2YXIgZm9ybWF0dGVkQ0MgPSAnJztcclxuXHJcbiAgICAgIGZvcm1hdHRlZENDID0gY2Muc3Vic3RyKDAsIDQpICsgJy0nO1xyXG4gICAgICBmb3JtYXR0ZWRDQyArPSBjYy5zdWJzdHIoNCwgNCkgKyAnLSc7XHJcbiAgICAgIGZvcm1hdHRlZENDICs9IGNjLnN1YnN0cig4LCAyKSArICctJztcclxuICAgICAgZm9ybWF0dGVkQ0MgKz0gY2Muc3Vic3RyKDEwLCAxMCk7XHJcblxyXG4gICAgICByZXR1cm4gZm9ybWF0dGVkQ0M7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FsY3VsYXJDQygpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoaWJhbikge1xyXG4gICAgICBpYmFuID0gaWJhbiB8fCAnJztcclxuICAgICAgcmV0dXJuIGliYW4uc3Vic3RyKDQsIDIwKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjYWxjdWxhckliYW4oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNjYykge1xyXG4gICAgICB2YXIgcGFpcyA9IFwiRVNcIjtcclxuICAgICAgdmFyIGNpZnJhcyA9IGNjYyArIHZhbG9yQ2lmcmFzKHBhaXMpICsgXCIwMFwiO1xyXG4gICAgICB2YXIgcmVzdG8gPSBtb2R1bG8oY2lmcmFzLCA5Nyk7XHJcbiAgICAgIHJldHVybiBwYWlzICsgY2Vyb3NJenF1aWVyZGEoOTgtcmVzdG8sIDIpICsgY2NjO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiB2YWxvckNpZnJhcyhjaWZyYXMpIHtcclxuICAgICAgdmFyIExFVFJBUyA9IFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XHJcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICBmb3IgKHZhciBpPTA7IGk8Y2lmcmFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBvc2ljaW9uID0gTEVUUkFTLmluZGV4T2YoY2lmcmFzW2ldKTtcclxuICAgICAgICBpdGVtcy5wdXNoKHBvc2ljaW9uIDwgMD8gXCItXCI6IHBvc2ljaW9uKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gaXRlbXMuam9pbihcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtb2R1bG8oY2lmcmFzLCBkaXZpc29yKSB7XHJcbiAgICAgIHZhciBDVUVOVEEgPSAxMDtcclxuICAgICAgdmFyIGxhcmdvID0gY2lmcmFzLmxlbmd0aDtcclxuICAgICAgdmFyIHJlc3RvID0gMDtcclxuICAgICAgZm9yICh2YXIgaT0wOyBpPGxhcmdvOyBpKz1DVUVOVEEpIHtcclxuICAgICAgICB2YXIgZGl2aWRlbmRvID0gcmVzdG8gKyBcIlwiICsgY2lmcmFzLnN1YnN0cihpLCBDVUVOVEEpO1xyXG4gICAgICAgIHJlc3RvID0gZGl2aWRlbmRvICUgZGl2aXNvcjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdG87XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2Vyb3NJenF1aWVyZGEoY2lmcmFzLCBsYXJnbykge1xyXG4gICAgICBjaWZyYXMgKz0gJyc7XHJcbiAgICAgIHdoaWxlKGNpZnJhcy5sZW5ndGggPCBsYXJnbykgeyBjaWZyYXMgPSAnMCcrY2lmcmFzOyB9XHJcbiAgICAgIHJldHVybiBjaWZyYXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcignc3RyaW5nVG9EYXRlJywgc3RyaW5nVG9EYXRlKVxyXG4gICAgLmZpbHRlcignZGF0ZVRvU3RyaW5nJywgZGF0ZVRvU3RyaW5nKTtcclxuXHJcbiAgZnVuY3Rpb24gc3RyaW5nVG9EYXRlKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byA9IG5ldyBEYXRlKGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byk7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24gPSBuZXcgRGF0ZShkYXRhLmRhdG9zUGVyc29uYWxlcy5mZWNoYUluc2NyaXBjaW9uKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGF0ZVRvU3RyaW5nKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgIGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50byA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhTmFjaW1pZW50by50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgICAgZGF0YS5kYXRvc1BlcnNvbmFsZXMuZmVjaGFJbnNjcmlwY2lvbiA9IGRhdGEuZGF0b3NQZXJzb25hbGVzLmZlY2hhSW5zY3JpcGNpb24udG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZpbHRlcigncmVtb3ZlTnVsbHMnLCByZW1vdmVOdWxscyk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZU51bGxzKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKXtcclxuICAgICAgdmFyIGlzQXJyYXkgPSBvYmogaW5zdGFuY2VvZiBBcnJheTtcclxuICAgICAgZm9yICh2YXIgayBpbiBvYmope1xyXG4gICAgICAgIGlmIChvYmpba109PT1udWxsKSBpc0FycmF5ID8gb2JqLnNwbGljZShrLDEpIDogZGVsZXRlIG9ialtrXTtcclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqW2tdPT1cIm9iamVjdFwiKSByZW1vdmVOdWxscyhvYmpba10pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnY29mcmFkZXNTZXJ2aWNlJywgY29mcmFkZXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY29mcmFkZXNTZXJ2aWNlKCRyZXNvdXJjZSwgJGh0dHAsICRmaWx0ZXIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvZnJhZGVzUmVzdDogY29mcmFkZXNSZXN0LFxyXG4gICAgICBjb2ZyYWRlc0JhamFzUmVzdDogY29mcmFkZXNCYWphc1Jlc3QsXHJcbiAgICAgIGdldENhbGxlczogZ2V0Q2FsbGVzLFxyXG4gICAgICBnZXRSZWdpc3Ryb3M6IGdldFJlZ2lzdHJvc1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb2ZyYWRlc1Jlc3QoKSB7XHJcbiAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY29mcmFkZXMvOmlkLmpzb246anNvbicsIG51bGwsIHtcclxuICAgICAgICAncXVlcnknOiAge21ldGhvZDonR0VUJywgaXNBcnJheTogZmFsc2V9LFxyXG4gICAgICAgICdnZXQnOiAgICB7bWV0aG9kOidHRVQnLCB0cmFuc2Zvcm1SZXNwb25zZTogZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGZpbHRlcignc3RyaW5nVG9EYXRlJykoYW5ndWxhci5mcm9tSnNvbihkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgJ3NhdmUnOiAgIHttZXRob2Q6J1BPU1QnLCB0cmFuc2Zvcm1SZXF1ZXN0OiBmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLnRvSnNvbigkZmlsdGVyKCdyZW1vdmVOdWxscycpKGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29mcmFkZXNCYWphc1Jlc3QoKSB7XHJcbiAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2h0dHA6Ly8xMjcuMC4wLjE6NTA1MC9hcGkvY29mcmFkZXNCYWphcy86aWQuanNvbjpqc29uJywgbnVsbCwgeydxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OmZhbHNlfX0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldENhbGxlcyhjYWxsZSkge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwOi8vMTI3LjAuMC4xOjUwNTAvYXBpL2NhbGxlcy8nLCB7cGFyYW1zOiB7Y2FsbGU6IGNhbGxlfX0pLlxyXG4gICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24ocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlZ2lzdHJvcygpIHtcclxuICAgICAgcmV0dXJuICRodHRwLmdldCgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9yZWdpc3Ryb3MvJykuXHJcbiAgICAgICAgICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5mcm9tSnNvbihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnbWFwYXNTZXJ2aWNlJywgbWFwYXNTZXJ2aWNlKTtcclxuXHJcbiAgZnVuY3Rpb24gbWFwYXNTZXJ2aWNlKCRodHRwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZW9Db2RpbmdBUEk6IGdlb0NvZGluZ0FQSVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZW9Db2RpbmdBUEkoYWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uJywge3BhcmFtczoge2FkZHJlc3M6IGFkZHJlc3MsIGtleTogXCJBSXphU3lEQ19PSURTbDZjdXJqQ01DTHl6bjJ5aE1tZy1lcjVrbklcIn19KS5cclxuICAgICAgdGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB9KTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NlY3RvcmVzU2VydmljZScsIHNlY3RvcmVzU2VydmljZSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNlY3RvcmVzU2VydmljZSgkcmVzb3VyY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlY3RvcmVzUmVzdDogc2VjdG9yZXNSZXN0XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlY3RvcmVzUmVzdCgpIHtcclxuICAgICAgcmV0dXJuICRyZXNvdXJjZSgnaHR0cDovLzEyNy4wLjAuMTo1MDUwL2FwaS9zZWN0b3Jlcy86aWQuanNvbjpqc29uJywgbnVsbCwge1xyXG4gICAgICAgICdnZXQnOiAge21ldGhvZDonR0VUJywgaXNBcnJheTogdHJ1ZX0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICBcclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignTGlzdGFDb2ZyYWRlcycsIExpc3RhQ29mcmFkZXMpO1xyXG5cclxuICBmdW5jdGlvbiBMaXN0YUNvZnJhZGVzKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBjb2ZyYWRlc1NlcnZpY2UpIHtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICBcclxuICAgIHZtLmZpbHRybyAgICA9ICdub21icmUnO1xyXG4gICAgdm0udHlwZUlucHV0ID0gJ3RleHQnO1xyXG4gICAgdm0uYnVzY2FyICAgID0gbnVsbDtcclxuXHJcbiAgICB2bS5zZWFyY2ggICAgICAgICA9IHNlYXJjaDtcclxuICAgIHZtLnJhZGlvQ2hhbmdlICAgID0gcmFkaW9DaGFuZ2U7XHJcbiAgICB2bS5nb1RvQ29mcmFkZSAgICA9IGdvVG9Db2ZyYWRlO1xyXG4gICAgdm0ubW9kaWZ5Q29mcmFkZSAgPSBtb2RpZnlDb2ZyYWRlO1xyXG4gICAgdm0ucmVtb3ZlQ29mcmFkZSAgPSByZW1vdmVDb2ZyYWRlO1xyXG4gICAgdm0ucmVzdG9yZUNvZnJhZGUgPSByZXN0b3JlQ29mcmFkZTtcclxuXHJcbiAgICB2YXIgaGFuZGxlciA9ICRyb290U2NvcGUuJG9uKCdzY3JvbGxEb3duJywgZ2V0TmV4dFBhZ2UpO1xyXG5cclxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGhhbmRsZXIoKTtcclxuICAgICAgaGFuZGxlciA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcclxuICAgICAgaWYgKCF2bS5iYWphcylcclxuICAgICAgICBnZXROZXh0UGFnZUFsdGFzKCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBnZXROZXh0UGFnZUJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TmV4dFBhZ2VBbHRhcygpIHtcclxuICAgICAgaWYgKHZtLm5leHRQYWdlKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZX07XHJcblxyXG4gICAgICAgIGlmICh2bS5idXNjYXIpXHJcbiAgICAgICAgICBwYXJhbWV0ZXJzW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcblxyXG4gICAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXMgPSB2bS5jb2ZyYWRlcy5jb25jYXQoZGF0YS5yZXN1bHRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE5leHRQYWdlQmFqYXMoKSB7XHJcbiAgICAgIGlmICh2bS5uZXh0UGFnZUJhamFzKXtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtwYWdlOiB2bS5uZXh0UGFnZUJhamFzfTtcclxuXHJcbiAgICAgICAgaWYgKHZtLmJ1c2NhcilcclxuICAgICAgICAgIHBhcmFtZXRlcnNbdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuXHJcbiAgICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkocGFyYW1ldGVycywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgICAgdm0uY29mcmFkZXNCYWphcyA9IHZtLmNvZnJhZGVzQmFqYXMuY29uY2F0KGRhdGEucmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAgIGlmICghdm0uYmFqYXMpXHJcbiAgICAgICAgc2VhcmNoQWx0YXMoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlYXJjaEJhamFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VhcmNoQWx0YXMoKSB7XHJcbiAgICAgIHZhciBmaWx0cm8gPSB7fTtcclxuICAgICAgZmlsdHJvW3ZtLmZpbHRyb10gPSB2bS5idXNjYXI7XHJcbiAgICAgIGNvZnJhZGVzU2VydmljZS5jb2ZyYWRlc1Jlc3QoKS5xdWVyeShmaWx0cm8sIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHZtLm5leHRQYWdlID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWFyY2hCYWphcygpIHtcclxuICAgICAgdmFyIGZpbHRybyA9IHt9O1xyXG4gICAgICBmaWx0cm9bdm0uZmlsdHJvXSA9IHZtLmJ1c2NhcjtcclxuICAgICAgY29mcmFkZXNTZXJ2aWNlLmNvZnJhZGVzQmFqYXNSZXN0KCkucXVlcnkoZmlsdHJvLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2bS5uZXh0UGFnZUJhamFzID0gZGF0YS5uZXh0O1xyXG4gICAgICAgIHZtLmNvZnJhZGVzQmFqYXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhZGlvQ2hhbmdlKCkge1xyXG4gICAgICB2bS5idXNjYXIgPSBudWxsO1xyXG4gICAgICB2bS50eXBlSW5wdXQgPSAodm0uZmlsdHJvID09PSAnbm9tYnJlJykgPyAndGV4dCc6ICdudW1iZXInO1xyXG4gICAgICB2bS5zZWFyY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnb1RvQ29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICAkc3RhdGUuZ28oJ2NvZnJhZGVzRGV0YWxsZScsIHtjb2ZyYWRlSWQ6IGlkfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbW9kaWZ5Q29mcmFkZShpZCwgZXZlbnQpe1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgJHN0YXRlLmdvKCdjb2ZyYWRlc0NhbWJpb3MnLCB7Y29mcmFkZUlkOiBpZH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdlbGltaW5hciBjb2ZyYWRlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzdG9yZUNvZnJhZGUoaWQsIGV2ZW50KXtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdyZXN0YXVyYXIgY29mcmFkZScpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZGlyZWN0aXZlKCdsaXN0YUNvZnJhZGVzJywgbGlzdGFDb2ZyYWRlcyk7XHJcblxyXG5cclxuICBmdW5jdGlvbiBsaXN0YUNvZnJhZGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2NvZnJhZGVzL2xpc3QvY29mcmFkZXMuZGlyZWN0aXZlLmh0bWwnLFxyXG4gICAgICBzY29wZToge1xyXG4gICAgICAgIGNvZnJhZGVzOiAnPWNvZnJhZGVzJyxcclxuICAgICAgICBuZXh0UGFnZTogJz1wYWdlJyxcclxuICAgICAgICBjb2ZyYWRlc0JhamFzOiAnPWNvZnJhZGVzQmFqYXMnLFxyXG4gICAgICAgIG5leHRQYWdlQmFqYXM6ICc9cGFnZUJhamFzJ1xyXG4gICAgICAgIFxyXG4gICAgICB9LFxyXG4gICAgICBjb250cm9sbGVyOiAnTGlzdGFDb2ZyYWRlcycsXHJcbiAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
